var S8=Object.defineProperty,A8=Object.defineProperties,x8=Object.getOwnPropertyDescriptors,wF=Object.getOwnPropertySymbols,R8=Object.prototype.hasOwnProperty,M8=Object.prototype.propertyIsEnumerable,EF=(Ke,Ee,O)=>Ee in Ke?S8(Ke,Ee,{enumerable:!0,configurable:!0,writable:!0,value:O}):Ke[Ee]=O,bF=(Ke,Ee)=>{for(var O in Ee||(Ee={}))R8.call(Ee,O)&&EF(Ke,O,Ee[O]);if(wF)for(var O of wF(Ee))M8.call(Ee,O)&&EF(Ke,O,Ee[O]);return Ke},CF=(Ke,Ee)=>A8(Ke,x8(Ee));(self.webpackChunksipjkcd=self.webpackChunksipjkcd||[]).push([[179],{2011:(Ke,Ee,O)=>{"use strict";O.d(Ee,{hO:()=>Be,xv:()=>pe,Dh:()=>ee,GT:()=>ae,cc:()=>Ae,on:()=>W,pX:()=>ce});var d=O(5e3),$=O(127),N=O(5813);Ke=O.hmd(Ke);const oe=["ngOnDestroy"],ce=(De,We,Ge,Pe={})=>new Proxy(De,{get:(Re,Te)=>Ge.runOutsideAngular(()=>{var qe;if(De[Te])return(null===(qe=null==Pe?void 0:Pe.spy)||void 0===qe?void 0:qe.get)&&Pe.spy.get(Te,De[Te]),De[Te];if(oe.indexOf(Te)>-1)return()=>{};const se=We.toPromise().then(ye=>{const be=ye&&ye[Te];return"function"==typeof be?be.bind(ye):be&&be.then?be.then(Q=>Ge.run(()=>Q)):Ge.run(()=>be)});return new Proxy(()=>{},{get:(ye,be)=>se[be],apply:(ye,be,Q)=>se.then(re=>{var ue;const we=re&&re(...Q);return(null===(ue=null==Pe?void 0:Pe.spy)||void 0===ue?void 0:ue.apply)&&Pe.spy.apply(Te,Q,we),we})})})}),ae=(De,We)=>{We.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(Pe=>{Object.defineProperty(De.prototype,Pe,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,Pe))})})};class X{constructor(We){return We}}const ee=new d.OlP("angularfire2.app.options"),pe=new d.OlP("angularfire2.app.name");function W(De,We,Ge){const Re="object"==typeof Ge&&Ge||{};Re.name=Re.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const qe=$.Z.apps.filter(se=>se&&se.name===Re.name)[0]||We.runOutsideAngular(()=>$.Z.initializeApp(De,Re));try{JSON.stringify(De)!==JSON.stringify(qe.options)&&q("error",`${qe.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(se){}return new X(qe)}const q=(De,...We)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[De](...We)},ie={provide:X,useFactory:W,deps:[ee,d.R0b,[new d.FiY,pe]]};let Be=(()=>{class De{constructor(Ge){$.Z.registerVersion("angularfire",N.q4.full,"core"),$.Z.registerVersion("angularfire",N.q4.full,"app-compat"),$.Z.registerVersion("angular",d.q4F.full,Ge.toString())}static initializeApp(Ge,Pe){return{ngModule:De,providers:[{provide:ee,useValue:Ge},{provide:pe,useValue:Pe}]}}}return De.\u0275fac=function(Ge){return new(Ge||De)(d.LFG(d.Lbi))},De.\u0275mod=d.oAB({type:De}),De.\u0275inj=d.cJS({providers:[ie]}),De})();function Ae(De,We,Ge,Pe,Re){const[,Te,qe]=globalThis.\u0275AngularfireInstanceCache.find(se=>se[0]===De)||[];if(Te)return function Le(De,We){try{return De.toString()===We.toString()}catch(Ge){return De===We}}(Re,qe)||(ve("error",`${We} was already initialized on the ${Ge} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Re,was:qe})),Te;{const se=Pe();return globalThis.\u0275AngularfireInstanceCache.push([De,se,Re]),se}}const $e=!!Ke.hot,ve=(De,...We)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[De](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ke,Ee,O)=>{"use strict";O.d(Ee,{q4:()=>qt,iC:()=>fu,fc:()=>tc,HU:()=>No,vb:()=>ff,JM:()=>Qu});var d=O(5e3),$=O(5867),N=O(5861),oe=O(9681),ce=O(2090),ae=O(4859),X=O(1877),ee=O(8766);const pe="@firebase/installations",W="0.5.16",ie=`w:${W}`,Be="FIS_v2",We=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(C){return C instanceof ce.ZR&&C.code.includes("request-failed")}function Pe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Re(C){return{token:C.token,requestStatus:2,expiresIn:re(C.expiresIn),creationTime:Date.now()}}function Te(C,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(C,D){const j=(yield D.json()).error;return We.create("request-failed",{requestName:C,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function se({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function ye(C,{refreshToken:D}){const M=se(C);return M.append("Authorization",function ue(C){return`${Be} ${C}`}(D)),M}function be(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function re(C){return Number(C.replace("s","000"))}function we(C,D){return fe.apply(this,arguments)}function fe(){return(fe=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:M}){const j=Pe(C),J=se(C),le=D.getImmediate({optional:!0});if(le){const Tt=yield le.getHeartbeatsHeader();Tt&&J.append("x-firebase-client",Tt)}const Ze={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:Be,appId:C.appId,sdkVersion:ie})},yt=yield be(()=>fetch(j,Ze));if(yt.ok){const Tt=yield yt.json();return{fid:Tt.fid||M,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Re(Tt.authToken)}}throw yield Te("Create Installation",yt)})).apply(this,arguments)}function Ue(C){return new Promise(D=>{setTimeout(D,C)})}const nn=/^[cdef][\w-]{21}$/;function Je(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function cn(C){return function ft(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return nn.test(M)?M:""}catch(C){return""}}function Dn(C){return`${C.appName}!${C.appId}`}const dn=new Map;function rn(C,D){const M=Dn(C);kn(M,D),function ei(C,D){const M=function Fn(){return!oi&&"BroadcastChannel"in self&&(oi=new BroadcastChannel("[Firebase] FID Change"),oi.onmessage=C=>{kn(C.data.key,C.data.fid)}),oi}();M&&M.postMessage({key:C,fid:D}),function ns(){0===dn.size&&oi&&(oi.close(),oi=null)}()}(M,D)}function kn(C,D){const M=dn.get(C);if(M)for(const j of M)j(D)}let oi=null;const $n="firebase-installations-store";let rs=null;function Et(){return rs||(rs=(0,ee.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore($n)}})),rs}function Nr(C,D){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(C,D){const M=Dn(C),J=(yield Et()).transaction($n,"readwrite"),le=J.objectStore($n),Ne=yield le.get(M);return yield le.put(D,M),yield J.done,(!Ne||Ne.fid!==D.fid)&&rn(C,D.fid),D})).apply(this,arguments)}function hn(C){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,N.Z)(function*(C){const D=Dn(C),j=(yield Et()).transaction($n,"readwrite");yield j.objectStore($n).delete(D),yield j.done})).apply(this,arguments)}function jr(C,D){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,N.Z)(function*(C,D){const M=Dn(C),J=(yield Et()).transaction($n,"readwrite"),le=J.objectStore($n),Ne=yield le.get(M),Ze=D(Ne);return void 0===Ze?yield le.delete(M):yield le.put(Ze,M),yield J.done,Ze&&(!Ne||Ne.fid!==Ze.fid)&&rn(C,Ze.fid),Ze})).apply(this,arguments)}function Sn(C){return gr.apply(this,arguments)}function gr(){return(gr=(0,N.Z)(function*(C){let D;const M=yield jr(C.appConfig,j=>{const J=vs(j),le=zt(C,J);return D=le.registrationPromise,le.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function vs(C){return Vi(C||{fid:Je(),registrationStatus:0})}function zt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(We.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function pt(C,D){return it.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Si(C)}:{installationEntry:D}}function it(){return(it=(0,N.Z)(function*(C,D){try{const M=yield we(C,D);return Nr(C.appConfig,M)}catch(M){throw Ge(M)&&409===M.customData.serverCode?yield hn(C.appConfig):yield Nr(C.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Si(C){return $r.apply(this,arguments)}function $r(){return($r=(0,N.Z)(function*(C){let D=yield Kt(C.appConfig);for(;1===D.registrationStatus;)yield Ue(100),D=yield Kt(C.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield Sn(C);return j||M}return D})).apply(this,arguments)}function Kt(C){return jr(C,D=>{if(!D)throw We.create("installation-not-found");return Vi(D)})}function Vi(C){return function Gn(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function gn(C,D){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},M){const j=ai(C,M),J=ye(C,M),le=D.getImmediate({optional:!0});if(le){const Tt=yield le.getHeartbeatsHeader();Tt&&J.append("x-firebase-client",Tt)}const Ze={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ie,appId:C.appId}})},yt=yield be(()=>fetch(j,Ze));if(yt.ok)return Re(yield yt.json());throw yield Te("Generate Auth Token",yt)})).apply(this,arguments)}function ai(C,{fid:D}){return`${Pe(C)}/${D}/authTokens:generate`}function $t(C){return ar.apply(this,arguments)}function ar(){return(ar=(0,N.Z)(function*(C,D=!1){let M;const j=yield jr(C.appConfig,le=>{if(!sn(le))throw We.create("not-registered");const Ne=le.authToken;if(!D&&Z(Ne))return le;if(1===Ne.requestStatus)return M=Xe(C,D),le;{if(!navigator.onLine)throw We.create("app-offline");const Ze=Y(le);return M=It(C,Ze),Ze}});return M?yield M:j.authToken})).apply(this,arguments)}function Xe(C,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,N.Z)(function*(C,D){let M=yield ze(C.appConfig);for(;1===M.authToken.requestStatus;)yield Ue(100),M=yield ze(C.appConfig);const j=M.authToken;return 0===j.requestStatus?$t(C,D):j})).apply(this,arguments)}function ze(C){return jr(C,D=>{if(!sn(D))throw We.create("not-registered");return function H(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function It(C,D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,N.Z)(function*(C,D){try{const M=yield gn(C,D),j=Object.assign(Object.assign({},D),{authToken:M});return yield Nr(C.appConfig,j),M}catch(M){if(!Ge(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Nr(C.appConfig,j)}else yield hn(C.appConfig);throw M}})).apply(this,arguments)}function sn(C){return void 0!==C&&2===C.registrationStatus}function Z(C){return 2===C.requestStatus&&!function G(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Y(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function B(){return(B=(0,N.Z)(function*(C){const D=C,{installationEntry:M,registrationPromise:j}=yield Sn(D);return j?j.catch(console.error):$t(D).catch(console.error),M.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,N.Z)(function*(C,D=!1){const M=C;return yield tt(M),(yield $t(M,D)).token})).apply(this,arguments)}function tt(C){return ut.apply(this,arguments)}function ut(){return(ut=(0,N.Z)(function*(C){const{registrationPromise:D}=yield Sn(C);D&&(yield D)})).apply(this,arguments)}function Ba(C){return We.create("missing-app-config-values",{valueName:C})}const ui="installations",jt=C=>{const D=C.getProvider("app").getImmediate(),M=function Cr(C){if(!C||!C.options)throw Ba("App Configuration");if(!C.name)throw Ba("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!C.options[M])throw Ba(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},vn=C=>{const D=C.getProvider("app").getImmediate(),M=(0,oe._getProvider)(D,ui).getImmediate();return{getId:()=>function P(C){return B.apply(this,arguments)}(M),getToken:J=>function de(C){return Fe.apply(this,arguments)}(M,J)}};(function ti(){(0,oe._registerComponent)(new ae.wA(ui,jt,"PUBLIC")),(0,oe._registerComponent)(new ae.wA("installations-internal",vn,"PRIVATE"))})(),(0,oe.registerVersion)(pe,W),(0,oe.registerVersion)(pe,W,"esm2017");const ws="@firebase/remote-config",qn=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nd{constructor(D,M,j,J){this.client=D,this.storage=M,this.storageCache=j,this.logger=J}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,J=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var M=this;return(0,N.Z)(function*(){const[j,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(D.cacheMaxAgeMillis,j))return J;D.eTag=J&&J.eTag;const le=yield M.client.fetch(D),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Ne),le})()}}function Lu(C=navigator){return C.languages&&C.languages[0]||C.language}class cr{constructor(D,M,j,J,le,Ne){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=j,this.projectId=J,this.apiKey=le,this.appId=Ne}fetch(D){var M=this;return(0,N.Z)(function*(){var j,J,le;const[Ne,Ze]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},mt={sdk_version:M.sdkVersion,app_instance_id:Ne,app_instance_id_token:Ze,app_id:M.appId,language_code:Lu()},tr={method:"POST",headers:kt,body:JSON.stringify(mt)},Fr=fetch(Tt,tr),Ns=new Promise((zr,hs)=>{D.signal.addEventListener(()=>{const Ju=new Error("The operation was aborted.");Ju.name="AbortError",hs(Ju)})});let Ps;try{yield Promise.race([Fr,Ns]),Ps=yield Fr}catch(zr){let hs="fetch-client-network";throw"AbortError"===(null===(j=zr)||void 0===j?void 0:j.name)&&(hs="fetch-timeout"),qn.create(hs,{originalErrorMessage:null===(J=zr)||void 0===J?void 0:J.message})}let ds=Ps.status;const nc=Ps.headers.get("ETag")||void 0;let pu,gu;if(200===Ps.status){let zr;try{zr=yield Ps.json()}catch(hs){throw qn.create("fetch-client-parse",{originalErrorMessage:null===(le=hs)||void 0===le?void 0:le.message})}pu=zr.entries,gu=zr.state}if("INSTANCE_STATE_UNSPECIFIED"===gu?ds=500:"NO_CHANGE"===gu?ds=304:("NO_TEMPLATE"===gu||"EMPTY_CONFIG"===gu)&&(pu={}),304!==ds&&200!==ds)throw qn.create("fetch-status",{httpStatus:ds});return{status:ds,eTag:nc,config:pu}})()}}class bs{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,N.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:j}){var J=this;return(0,N.Z)(function*(){yield function rd(C,D){return new Promise((M,j)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(M,J);C.addEventListener(()=>{clearTimeout(le),j(qn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const le=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),le}catch(le){if(!function fg(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(le))throw le;const Ne={throttleEndTimeMillis:Date.now()+(0,ce.$s)(j),backoffCount:j+1};return yield J.storage.setThrottleMetadata(Ne),J.attemptFetch(D,Ne)}})()}}class gg{constructor(D,M,j,J,le){this.app=D,this._client=M,this._storageCache=j,this._storage=J,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ja(C,D){var M;const j=C.target.error||void 0;return qn.create(D,{originalErrorMessage:j&&(null===(M=j)||void 0===M?void 0:M.message)})}const Jo="app_namespace_store";class ad{constructor(D,M,j,J=function od(){return new Promise((C,D)=>{var M;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=J=>{D(ja(J,"storage-open"))},j.onsuccess=J=>{C(J.target.result)},j.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Jo,{keyPath:"compositeKey"})}}catch(j){D(qn.create("storage-open",{originalErrorMessage:null===(M=j)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=j,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,N.Z)(function*(){const j=yield M.openDbPromise;return new Promise((J,le)=>{var Ne;const yt=j.transaction([Jo],"readonly").objectStore(Jo),Tt=M.createCompositeKey(D);try{const kt=yt.get(Tt);kt.onerror=mt=>{le(ja(mt,"storage-get"))},kt.onsuccess=mt=>{const tr=mt.target.result;J(tr?tr.value:void 0)}}catch(kt){le(qn.create("storage-get",{originalErrorMessage:null===(Ne=kt)||void 0===Ne?void 0:Ne.message}))}})})()}set(D,M){var j=this;return(0,N.Z)(function*(){const J=yield j.openDbPromise;return new Promise((le,Ne)=>{var Ze;const Tt=J.transaction([Jo],"readwrite").objectStore(Jo),kt=j.createCompositeKey(D);try{const mt=Tt.put({compositeKey:kt,value:M});mt.onerror=tr=>{Ne(ja(tr,"storage-set"))},mt.onsuccess=()=>{le()}}catch(mt){Ne(qn.create("storage-set",{originalErrorMessage:null===(Ze=mt)||void 0===Ze?void 0:Ze.message}))}})})()}delete(D){var M=this;return(0,N.Z)(function*(){const j=yield M.openDbPromise;return new Promise((J,le)=>{var Ne;const yt=j.transaction([Jo],"readwrite").objectStore(Jo),Tt=M.createCompositeKey(D);try{const kt=yt.delete(Tt);kt.onerror=mt=>{le(ja(mt,"storage-delete"))},kt.onsuccess=()=>{J()}}catch(kt){le(qn.create("storage-delete",{originalErrorMessage:null===(Ne=kt)||void 0===Ne?void 0:Ne.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Xo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const M=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),le=yield M;le&&(D.lastFetchStatus=le);const Ne=yield j;Ne&&(D.lastSuccessfulFetchTimestampMillis=Ne);const Ze=yield J;Ze&&(D.activeConfig=Ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function J_(){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,N.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(C){return!1}})).apply(this,arguments)}!function _g(){(0,oe._registerComponent)(new ae.wA("remote-config",function C(D,{instanceIdentifier:M}){const j=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw qn.create("registration-window");if(!(0,ce.hl)())throw qn.create("indexed-db-unavailable");const{projectId:le,apiKey:Ne,appId:Ze}=j.options;if(!le)throw qn.create("registration-project-id");if(!Ne)throw qn.create("registration-api-key");if(!Ze)throw qn.create("registration-app-id");const yt=new ad(Ze,j.name,M=M||"firebase"),Tt=new Xo(yt),kt=new X.Yd(ws);kt.logLevel=X.in.ERROR;const mt=new cr(J,oe.SDK_VERSION,M,le,Ne,Ze),tr=new bs(mt,yt),Fr=new nd(tr,yt,Tt,kt),Ns=new gg(j,Fr,Tt,yt,kt);return function mn(C){const D=(0,ce.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ws,"0.3.15"),(0,oe.registerVersion)(ws,"0.3.15","esm2017")}();const Ys="/firebase-messaging-sw.js",Ri="/firebase-cloud-messaging-push-scope",ea="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ga="google.c.a.c_id",Xh="google.c.a.c_l",yg="google.c.a.ts",mo="google.c.a.e";var Is=(()=>{return(C=Is||(Is={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Is;var C})();function ji(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ld(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),J=new Uint8Array(j.length);for(let le=0;le<j.length;++le)J[le]=j.charCodeAt(le);return J}const Ir="fcm_token_details_db",cd="fcm_token_object_Store";function dd(C){return Uu.apply(this,arguments)}function Uu(){return Uu=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Ir))return null;let D=null;return(yield(0,ee.X3)(Ir,5,{upgrade:(j=(0,N.Z)(function*(J,le,Ne,Ze){var yt;if(le<2||!J.objectStoreNames.contains(cd))return;const Tt=Ze.objectStore(cd),kt=yield Tt.index("fcmSenderId").get(C);if(yield Tt.clear(),kt)if(2===le){const mt=kt;if(!mt.auth||!mt.p256dh||!mt.endpoint)return;D={token:mt.fcmToken,createTime:null!==(yt=mt.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:mt.auth,p256dh:mt.p256dh,endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:"string"==typeof mt.vapidKey?mt.vapidKey:ji(mt.vapidKey)}}}else if(3===le){const mt=kt;D={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:ji(mt.auth),p256dh:ji(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:ji(mt.vapidKey)}}}else if(4===le){const mt=kt;D={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:ji(mt.auth),p256dh:ji(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:ji(mt.vapidKey)}}}}),function(le,Ne,Ze,yt){return j.apply(this,arguments)})})).close(),yield(0,ee.Lj)(Ir),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),Vu(D)?D:null;var j}),Uu.apply(this,arguments)}function Vu(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ts="firebase-messaging-store";let Hl=null;function Cn(){return Hl||(Hl=(0,ee.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Ts)}})),Hl}function qa(C){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,N.Z)(function*(C){const D=Tr(C),j=yield(yield Cn()).transaction(Ts).objectStore(Ts).get(D);if(j)return j;{const J=yield dd(C.appConfig.senderId);if(J)return yield _n(C,J),J}})).apply(this,arguments)}function _n(C,D){return ju.apply(this,arguments)}function ju(){return(ju=(0,N.Z)(function*(C,D){const M=Tr(C),J=(yield Cn()).transaction(Ts,"readwrite");return yield J.objectStore(Ts).put(D,M),yield J.done,D})).apply(this,arguments)}function Wa(C){return _o.apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(C){const D=Tr(C),j=(yield Cn()).transaction(Ts,"readwrite");yield j.objectStore(Ts).delete(D),yield j.done})).apply(this,arguments)}function Tr({appConfig:C}){return C.appId}const Wn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ds(C,D){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,N.Z)(function*(C,D){var M;const j=yield Xs(C),J=Za(D),le={method:"POST",headers:j,body:JSON.stringify(J)};let Ne;try{Ne=yield(yield fetch(Js(C.appConfig),le)).json()}catch(Ze){throw Wn.create("token-subscribe-failed",{errorInfo:null===(M=Ze)||void 0===M?void 0:M.toString()})}if(Ne.error)throw Wn.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Wn.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function ta(C,D){return ss.apply(this,arguments)}function ss(){return(ss=(0,N.Z)(function*(C,D){var M;const j=yield Xs(C),J=Za(D.subscriptionOptions),le={method:"PATCH",headers:j,body:JSON.stringify(J)};let Ne;try{Ne=yield(yield fetch(`${Js(C.appConfig)}/${D.token}`,le)).json()}catch(Ze){throw Wn.create("token-update-failed",{errorInfo:null===(M=Ze)||void 0===M?void 0:M.toString()})}if(Ne.error)throw Wn.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Wn.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function $l(C,D){return li.apply(this,arguments)}function li(){return(li=(0,N.Z)(function*(C,D){var M;const J={method:"DELETE",headers:yield Xs(C)};try{const Ne=yield(yield fetch(`${Js(C.appConfig)}/${D}`,J)).json();if(Ne.error)throw Wn.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(le){throw Wn.create("token-unsubscribe-failed",{errorInfo:null===(M=le)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Js({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Xs(C){return bt.apply(this,arguments)}function bt(){return(bt=(0,N.Z)(function*({appConfig:C,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Za({p256dh:C,auth:D,endpoint:M,vapidKey:j}){const J={web:{endpoint:M,auth:D,p256dh:C}};return j!==ea&&(J.web.applicationPubKey=j),J}const za=6048e5;function hd(C){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,N.Z)(function*(C){const D=yield Zn(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:ji(D.getKey("auth")),p256dh:ji(D.getKey("p256dh"))},j=yield qa(C.firebaseDependencies);if(j){if(Ja(j.subscriptionOptions,M))return Date.now()>=j.createTime+za?ef(C,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield $l(C.firebaseDependencies,j.token)}catch(J){console.warn(J)}return Gt(C.firebaseDependencies,M)}return Gt(C.firebaseDependencies,M)})).apply(this,arguments)}function Gl(C){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,N.Z)(function*(C){const D=yield qa(C.firebaseDependencies);D&&(yield $l(C.firebaseDependencies,D.token),yield Wa(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function ef(C,D){return Me.apply(this,arguments)}function Me(){return(Me=(0,N.Z)(function*(C,D){try{const M=yield ta(C.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield _n(C.firebaseDependencies,j),M}catch(M){throw yield Gl(C),M}})).apply(this,arguments)}function Gt(C,D){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,N.Z)(function*(C,D){const j={token:yield Ds(C,D),createTime:Date.now(),subscriptionOptions:D};return yield _n(C,j),j.token})).apply(this,arguments)}function Zn(C,D){return eo.apply(this,arguments)}function eo(){return(eo=(0,N.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ld(D)})})).apply(this,arguments)}function Ja(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ni(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ql(C,D){if(!D.notification)return;C.notification={};const M=D.notification.title;M&&(C.notification.title=M);const j=D.notification.body;j&&(C.notification.body=j);const J=D.notification.image;J&&(C.notification.image=J);const le=D.notification.icon;le&&(C.notification.icon=le)}(D,C),function Wl(C,D){!D.data||(C.data=D.data)}(D,C),function fd(C,D){var M,j,J,le,Ne;if(!D.fcmOptions&&!(null===(M=D.notification)||void 0===M?void 0:M.click_action))return;C.fcmOptions={};const Ze=null!==(J=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==J?J:null===(le=D.notification)||void 0===le?void 0:le.click_action;Ze&&(C.fcmOptions.link=Ze);const yt=null===(Ne=D.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;yt&&(C.fcmOptions.analyticsLabel=yt)}(D,C),D}function pd(C){return"object"==typeof C&&!!C&&Ga in C}function Xa(C,D){const M=[];for(let j=0;j<C.length;j++)M.push(C.charAt(j)),j<D.length&&M.push(D.charAt(j));return M.join("")}function _r(C){return Wn.create("missing-app-config-values",{valueName:C})}Xa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hi{constructor(D,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function na(C){if(!C||!C.options)throw _r("App Configuration Object");if(!C.name)throw _r("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const j of D)if(!M[j])throw _r(j);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Zl(C){return os.apply(this,arguments)}function os(){return(os=(0,N.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(Ys,{scope:Ri}),C.swRegistration.update().catch(()=>{})}catch(M){throw Wn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Ss(C,D){return eu.apply(this,arguments)}function eu(){return(eu=(0,N.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Zl(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Wn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function gd(C,D){return tu.apply(this,arguments)}function tu(){return(tu=(0,N.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=ea)})).apply(this,arguments)}function yo(){return(yo=(0,N.Z)(function*(C,D){if(!navigator)throw Wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Wn.create("permission-blocked");return yield gd(C,null==D?void 0:D.vapidKey),yield Ss(C,null==D?void 0:D.serviceWorkerRegistration),hd(C)})).apply(this,arguments)}function zl(C,D,M){return nu.apply(this,arguments)}function nu(){return(nu=(0,N.Z)(function*(C,D,M){const j=Kl(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[Ga],message_name:M[Xh],message_time:M[yg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Kl(C){switch(C){case Is.NOTIFICATION_CLICKED:return"notification_open";case Is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $u(){return($u=(0,N.Z)(function*(C,D){const M=D.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Is.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ni(M)):C.onMessageHandler.next(ni(M)));const j=M.data;pd(j)&&"1"===j[mo]&&(yield zl(C,M.messageType,j))})).apply(this,arguments)}const vo="@firebase/messaging",wo=C=>{const D=new Hi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function vg(C,D){return $u.apply(this,arguments)}(D,M)),D},_d=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:j=>function md(C,D){return yo.apply(this,arguments)}(D,j)}};function ra(){return as.apply(this,arguments)}function as(){return(as=(0,N.Z)(function*(){try{yield(0,ce.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tf(){(0,oe._registerComponent)(new ae.wA("messaging",wo,"PUBLIC")),(0,oe._registerComponent)(new ae.wA("messaging-internal",_d,"PRIVATE")),(0,oe.registerVersion)(vo,"0.11.0"),(0,oe.registerVersion)(vo,"0.11.0","esm2017")}();const yd="analytics",Eg="firebase_id",iu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gu="https://www.googletagmanager.com/gtag/js",Ar=new X.Yd("@firebase/analytics");function sf(C){return Promise.all(C.map(D=>D.catch(M=>M)))}function Eo(C,D){const M=document.createElement("script");M.src=`${Gu}?l=${C}&id=${D}`,M.async=!0,document.head.appendChild(M)}function vd(C,D,M,j,J,le){return wd.apply(this,arguments)}function wd(){return(wd=(0,N.Z)(function*(C,D,M,j,J,le){const Ne=j[J];try{if(Ne)yield D[Ne];else{const yt=(yield sf(M)).find(Tt=>Tt.measurementId===J);yt&&(yield D[yt.appId])}}catch(Ze){Ar.error(Ze)}C("config",J,le)})).apply(this,arguments)}function bo(C,D,M,j,J){return su.apply(this,arguments)}function su(){return(su=(0,N.Z)(function*(C,D,M,j,J){try{let le=[];if(J&&J.send_to){let Ne=J.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ze=yield sf(M);for(const yt of Ne){const Tt=Ze.find(mt=>mt.measurementId===yt),kt=Tt&&D[Tt.appId];if(!kt){le=[];break}le.push(kt)}}0===le.length&&(le=Object.values(D)),yield Promise.all(le),C("event",j,J||{})}catch(le){Ar.error(le)}})).apply(this,arguments)}function An(C){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(Gu)&&M.src.includes(C))return M;return null}const rt=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ql=new class yr{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function sa(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function oa(C){return zn.apply(this,arguments)}function zn(){return(zn=(0,N.Z)(function*(C){var D;const{appId:M,apiKey:j}=C,J={method:"GET",headers:sa(j)},le=iu.replace("{app-id}",M),Ne=yield fetch(le,J);if(200!==Ne.status&&304!==Ne.status){let Ze="";try{const yt=yield Ne.json();(null===(D=yt.error)||void 0===D?void 0:D.message)&&(Ze=yt.error.message)}catch(yt){}throw rt.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ze})}return Ne.json()})).apply(this,arguments)}function Co(C){return Io.apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(C,D=Ql,M){const{appId:j,apiKey:J,measurementId:le}=C.options;if(!j)throw rt.create("no-app-id");if(!J){if(le)return{measurementId:le,appId:j};throw rt.create("no-api-key")}const Ne=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new qu;return setTimeout((0,N.Z)(function*(){Ze.abort()}),void 0!==M?M:6e4),us({appId:j,apiKey:J,measurementId:le},Ne,Ze,D)})).apply(this,arguments)}function us(C,D,M){return gt.apply(this,arguments)}function gt(){return(gt=(0,N.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:M},j,J=Ql){var le,Ne;const{appId:Ze,measurementId:yt}=C;try{yield Ed(j,D)}catch(Tt){if(yt)return Ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null===(le=Tt)||void 0===le?void 0:le.message}]`),{appId:Ze,measurementId:yt};throw Tt}try{const Tt=yield oa(C);return J.deleteThrottleMetadata(Ze),Tt}catch(Tt){const kt=Tt;if(!bd(kt)){if(J.deleteThrottleMetadata(Ze),yt)return Ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null==kt?void 0:kt.message}]`),{appId:Ze,measurementId:yt};throw Tt}const mt=503===Number(null===(Ne=null==kt?void 0:kt.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,ce.$s)(M,J.intervalMillis,30):(0,ce.$s)(M,J.intervalMillis),tr={throttleEndTimeMillis:Date.now()+mt,backoffCount:M+1};return J.setThrottleMetadata(Ze,tr),Ar.debug(`Calling attemptFetch again in ${mt} millis`),us(C,tr,j,J)}})).apply(this,arguments)}function Ed(C,D){return new Promise((M,j)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(M,J);C.addEventListener(()=>{clearTimeout(le),j(rt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function bd(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class qu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Wu,Zu;function aa(){return(aa=(0,N.Z)(function*(C,D,M,j,J){if(J&&J.global)C("event",M,j);else{const le=yield D;C("event",M,Object.assign(Object.assign({},j),{send_to:le}))}})).apply(this,arguments)}function la(C){Zu=C}function Gi(C){Wu=C}function So(){return ls.apply(this,arguments)}function ls(){return(ls=(0,N.Z)(function*(){var C;if(!(0,ce.hl)())return Ar.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(D){return Ar.warn(rt.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Un(){return(Un=(0,N.Z)(function*(C,D,M,j,J,le,Ne){var Ze;const yt=Co(C);yt.then(Fr=>{M[Fr.measurementId]=Fr.appId,C.options.measurementId&&Fr.measurementId!==C.options.measurementId&&Ar.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Fr=>Ar.error(Fr)),D.push(yt);const Tt=So().then(Fr=>{if(Fr)return j.getId()}),[kt,mt]=yield Promise.all([yt,Tt]);An(le)||Eo(le,kt.measurementId),Zu&&(J("consent","default",Zu),la(void 0)),J("js",new Date);const tr=null!==(Ze=null==Ne?void 0:Ne.config)&&void 0!==Ze?Ze:{};return tr.origin="firebase",tr.update=!0,null!=mt&&(tr[Eg]=mt),J("config",kt.measurementId,tr),Wu&&(J("set",Wu),Gi(void 0)),kt.measurementId})).apply(this,arguments)}class Ao{constructor(D){this.app=D}_delete(){return delete ci[this.app.options.appId],Promise.resolve()}}let ci={},xn=[];const Zr={};let hi,En,di="dataLayer",Mi=!1;function lu(C,D,M){!function zu(){const C=[];if((0,ce.ru)()&&C.push("This is a browser extension environment."),(0,ce.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((j,J)=>`(${J+1}) ${j}`).join(" "),M=rt.create("invalid-analytics-context",{errorInfo:D});Ar.warn(M.message)}}();const j=C.options.appId;if(!j)throw rt.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw rt.create("no-api-key");Ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ci[j])throw rt.create("already-exists",{id:j});if(!Mi){!function ia(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(di);const{wrappedGtag:le,gtagCore:Ne}=function bg(C,D,M,j,J){let le=function(...Ne){window[j].push(arguments)};return window[J]&&"function"==typeof window[J]&&(le=window[J]),window[J]=function af(C,D,M,j){function le(){return(le=(0,N.Z)(function*(Ne,Ze,yt){try{"event"===Ne?yield bo(C,D,M,Ze,yt):"config"===Ne?yield vd(C,D,M,j,Ze,yt):"consent"===Ne?C("consent","update",yt):C("set",Ze)}catch(Tt){Ar.error(Tt)}})).apply(this,arguments)}return function J(Ne,Ze,yt){return le.apply(this,arguments)}}(le,C,D,M),{gtagCore:le,wrappedGtag:window[J]}}(ci,xn,Zr,di,"gtag");En=le,hi=Ne,Mi=!0}return ci[j]=function Jl(C,D,M,j,J,le,Ne){return Un.apply(this,arguments)}(C,xn,Zr,D,hi,di,M),new Ao(C)}function lf(){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,N.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(C){return!1}})).apply(this,arguments)}const ha="@firebase/analytics";!function Id(){(0,oe._registerComponent)(new ae.wA(yd,(D,{options:M})=>lu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new ae.wA("analytics-internal",function C(D){try{const M=D.getProvider(yd).getImmediate();return{logEvent:(j,J,le)=>function da(C,D,M,j){C=(0,ce.m9)(C),function wn(C,D,M,j,J){return aa.apply(this,arguments)}(En,ci[C.app.options.appId],D,M,j).catch(J=>Ar.error(J))}(M,j,J,le)}}catch(M){throw rt.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(ha,"0.8.4"),(0,oe.registerVersion)(ha,"0.8.4","esm2017")}();var cf=O(4408),pi=O(7565);const hu=new class du extends pi.v{}(class ri extends cf.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,M,j):(D.flush(this),0)}});var Td=O(4986),Mo=O(8505),Ku=O(5363),df=O(9468);const qt=new d.GfV("7.4.1"),Yu="__angularfire_symbol__analyticsIsSupportedValue",Bn="__angularfire_symbol__analyticsIsSupported",ko="__angularfire_symbol__remoteConfigIsSupportedValue",cs="__angularfire_symbol__remoteConfigIsSupported",Dd="__angularfire_symbol__messagingIsSupportedValue",ga="__angularfire_symbol__messagingIsSupported";function Qu(C,D,M){if(D){if(1===D.length)return D[0];const le=D.filter(Ne=>Ne.app===M);if(1===le.length)return le[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[Bn]||(globalThis[Bn]=lf().then(C=>globalThis[Yu]=C).catch(()=>globalThis[Yu]=!1)),globalThis[ga]||(globalThis[ga]=ra().then(C=>globalThis[Dd]=C).catch(()=>globalThis[Dd]=!1)),globalThis[cs]||(globalThis[cs]=J_().then(C=>globalThis[ko]=C).catch(()=>globalThis[ko]=!1));const ff=(C,D)=>{const M=D?[D]:(0,$.C6)(),j=[];return M.forEach(J=>{J.container.getProvider(C).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function yn(){}class ii{constructor(D,M=hu){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,j){const J=this.zone;return this.delegate.schedule(function(Ne){J.runGuarded(()=>{D.apply(this,[Ne])})},M,j)}}class Cg{constructor(D){this.zone=D,this.task=null}call(D,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yn,{},yn,yn)),M.pipe((0,Mo.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let No=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ii(Zone.current)),this.insideAngular=M.run(()=>new ii(Zone.current,Td.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ki(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function tc(C){return C.pipe((0,Ku.Q)(ki().outsideAngular))}function fu(C){return ki(),function Sd(C){return function(M){return(M=M.lift(new Cg(C.ngZone))).pipe((0,df.R)(C.outsideAngular),(0,Ku.Q)(C.insideAngular))}}(ki())(C)}},8247:(Ke,Ee,O)=>{"use strict";O.d(Ee,{$:()=>Js,A:()=>q,B:()=>Ae,G:()=>vn,H:()=>fn,J:()=>bs,L:()=>Z,M:()=>Ha,N:()=>$a,P:()=>Td,Q:()=>Ga,R:()=>Ro,T:()=>Xh,U:()=>ea,V:()=>Is,W:()=>ji,X:()=>dd,Y:()=>Hu,Z:()=>Ds,_:()=>ta,a:()=>Wr,a0:()=>hd,a1:()=>Gl,a2:()=>ef,a3:()=>Gt,a4:()=>Zn,a5:()=>Ja,a6:()=>ql,a7:()=>Wl,a8:()=>pd,a9:()=>Xa,aA:()=>G,aB:()=>yt,aC:()=>tc,aD:()=>Oo,aE:()=>je,aI:()=>sa,aL:()=>mo,aa:()=>Zl,ab:()=>Ss,ac:()=>gd,af:()=>zl,ag:()=>Kl,ah:()=>vg,ak:()=>Ts,al:()=>Sr,an:()=>Gu,ao:()=>wd,ap:()=>be,aq:()=>st,ar:()=>tt,as:()=>Ge,at:()=>no,au:()=>nc,av:()=>ln,aw:()=>Pe,ax:()=>se,ay:()=>Fr,az:()=>re,b:()=>rt,c:()=>Dd,d:()=>hf,e:()=>Xl,f:()=>Sd,g:()=>j,h:()=>C,i:()=>ls,j:()=>Ne,k:()=>Sg,l:()=>fa,m:()=>xg,o:()=>ee,r:()=>cf,s:()=>dr,u:()=>hu});var d=O(5861),$=O(2090),N=O(9681),oe=O(1877),ce=O(655),ae=O(4859);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$e=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new oe.Yd("@firebase/auth");function We(w,...g){De.logLevel<=oe.in.ERROR&&De.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function Ge(w,...g){throw qe(w,...g)}function Pe(w,...g){return qe(w,...g)}function Re(w,g,_){const b=Object.assign(Object.assign({},Le()),{[g]:_});return new $.LL("auth","Firebase",b).create(g,{appName:w.name})}function Te(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ge(w,"argument-error"),Re(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(w,...g){if("string"!=typeof w){const _=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(_,...b)}return $e.create(w,...g)}function se(w,g,..._){if(!w)throw qe(g,..._)}function ye(w){const g="INTERNAL ASSERTION FAILED: "+w;throw We(g),new Error(g)}function be(w,g){w||ye(g)}const Q=new Map;function re(w){be(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(be(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function fe(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===ft()||"https:"===ft()}function ft(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Je{constructor(g,_){this.shortDelay=g,this.longDelay=_,be(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function nn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(w,g){be(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Dn{static initialize(g,_,b){this.fetchImpl=g,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Je(3e4,6e4);function Ht(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Yt(w,g,_,b){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(w,g,_,b,x={}){return ei(w,x,(0,d.Z)(function*(){let F={},te={};b&&("GET"===g?te=b:F={body:JSON.stringify(b)});const xe=(0,$.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),Dn.fetch()(Ti(w,w.config.apiHost,_,xe),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function ei(w,g,_){return oi.apply(this,arguments)}function oi(){return(oi=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},dn),g);try{const x=new Di(w),F=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const te=yield F.json();if("needConfirmation"in te)throw $n(w,"account-exists-with-different-credential",te);if(F.ok&&!("errorMessage"in te))return te;{const xe=F.ok?te.errorMessage:te.error.message,[nt,vt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw $n(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===nt)throw $n(w,"email-already-in-use",te);if("USER_DISABLED"===nt)throw $n(w,"user-disabled",te);const Wt=b[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw Re(w,Wt,vt);Ge(w,Wt)}}catch(x){if(x instanceof $.ZR)throw x;Ge(w,"network-request-failed")}})).apply(this,arguments)}function Fn(w,g,_,b){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(w,g,_,b,x={}){const F=yield Yt(w,g,_,b,x);return"mfaPendingCredential"in F&&Ge(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Ti(w,g,_,b){const x=`${g}${_}?${b}`;return w.config.emulator?cn(w.config,x):`${w.config.apiScheme}://${x}`}class Di{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Pe(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(w,g,_){const b={appName:w.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const x=Pe(w,g,b);return x.customData._tokenResponse=_,x}function Et(){return(Et=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Nr(w,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function hn(w,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function jr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function gr(){return(gr=(0,d.Z)(function*(w,g=!1){const _=(0,$.m9)(w),b=yield _.getIdToken(g),x=zt(b);se(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const F="object"==typeof x.firebase?x.firebase:void 0,te=null==F?void 0:F.sign_in_provider;return{claims:x,token:b,authTime:jr(vs(x.auth_time)),issuedAtTime:jr(vs(x.iat)),expirationTime:jr(vs(x.exp)),signInProvider:te||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function vs(w){return 1e3*Number(w)}function zt(w){var g;const[_,b,x]=w.split(".");if(void 0===_||void 0===b||void 0===x)return We("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,$.tV)(b);return F?JSON.parse(F):(We("Failed to decode base64 JWT payload"),null)}catch(F){return We("Caught error parsing JWT payload as JSON",null===(g=F)||void 0===g?void 0:g.toString()),null}}function it(w,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(b){throw b instanceof $.ZR&&$r(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function $r({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Kt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),b)}iteration(){var g=this;return(0,d.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(_=b)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Vi{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=jr(this.lastLoginAt),this.creationTime=jr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gn(w){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(w){var g;const _=w.auth,b=yield w.getIdToken(),x=yield it(w,hn(_,{idToken:b}));se(null==x?void 0:x.users.length,_,"internal-error");const F=x.users[0];w._notifyReloadListener(F);const te=(null===(g=F.providerUserInfo)||void 0===g?void 0:g.length)?ar(F.providerUserInfo):[],xe=$t(w.providerData,te),Wt=!!w.isAnonymous&&!(w.email&&F.passwordHash||(null==xe?void 0:xe.length)),Rn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:xe,metadata:new Vi(F.createdAt,F.lastLoginAt),isAnonymous:Wt};Object.assign(w,Rn)})).apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(w){const g=(0,$.m9)(w);yield Gn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function $t(w,g){return[...w.filter(b=>!g.some(x=>x.providerId===b.providerId)),...g]}function ar(w){return w.map(g=>{var{providerId:_}=g,b=(0,ce._T)(g,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Se(){return(Se=(0,d.Z)(function*(w,g){const _=yield ei(w,{},(0,d.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:F}=w.config,te=Ti(w,x,"/v1/token",`key=${F}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",Dn.fetch()(te,{method:"POST",headers:xe,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){se(g.idToken,"internal-error"),se(void 0!==g.idToken,"internal-error"),se(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function pt(w){const g=zt(w);return se(g,"internal-error"),se(void 0!==g.exp,"internal-error"),se(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var b=this;return(0,d.Z)(function*(){return se(!b.accessToken||b.refreshToken,g,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var b=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:F,expiresIn:te}=yield function Xe(w,g){return Se.apply(this,arguments)}(g,_);b.updateTokensAndExpiration(x,F,Number(te))})()}updateTokensAndExpiration(g,_,b){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,_){const{refreshToken:b,accessToken:x,expirationTime:F}=_,te=new ze;return b&&(se("string"==typeof b,"internal-error",{appName:g}),te.refreshToken=b),x&&(se("string"==typeof x,"internal-error",{appName:g}),te.accessToken=x),F&&(se("number"==typeof F,"internal-error",{appName:g}),te.expirationTime=F),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ze,this.toJSON())}_performRefresh(){return ye("not implemented")}}function It(w,g){se("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Ct{constructor(g){var{uid:_,auth:b,stsTokenManager:x}=g,F=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Vi(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const b=yield it(_,_.stsTokenManager.getToken(_.auth,g));return se(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(g){return function Sn(w){return gr.apply(this,arguments)}(this,g)}reload(){return function _t(w){return ai.apply(this,arguments)}(this)}_assign(g){this!==g&&(se(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ct(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var b=this;return(0,d.Z)(function*(){let x=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Gn(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield it(g,function rs(w,g){return Et.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var b,x,F,te,xe,nt,vt,Wt;const Rn=null!==(b=_.displayName)&&void 0!==b?b:void 0,gi=null!==(x=_.email)&&void 0!==x?x:void 0,_a=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,ya=null!==(te=_.photoURL)&&void 0!==te?te:void 0,Nd=null!==(xe=_.tenantId)&&void 0!==xe?xe:void 0,Ef=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,Pd=null!==(vt=_.createdAt)&&void 0!==vt?vt:void 0,rl=null!==(Wt=_.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:bf,emailVerified:Od,isAnonymous:Fd,providerData:an,stsTokenManager:Cf}=_;se(bf&&Cf,g,"internal-error");const kg=ze.fromJSON(this.name,Cf);se("string"==typeof bf,g,"internal-error"),It(Rn,g.name),It(gi,g.name),se("boolean"==typeof Od,g,"internal-error"),se("boolean"==typeof Fd,g,"internal-error"),It(_a,g.name),It(ya,g.name),It(Nd,g.name),It(Ef,g.name),It(Pd,g.name),It(rl,g.name);const va=new Ct({uid:bf,auth:g,email:gi,emailVerified:Od,displayName:Rn,isAnonymous:Fd,photoURL:ya,phoneNumber:_a,tenantId:Nd,stsTokenManager:kg,createdAt:Pd,lastLoginAt:rl});return an&&Array.isArray(an)&&(va.providerData=an.map(sc=>Object.assign({},sc))),Ef&&(va._redirectEventId=Ef),va}static _fromIdTokenResponse(g,_,b=!1){return(0,d.Z)(function*(){const x=new ze;x.updateFromServerResponse(_);const F=new Ct({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:b});return yield Gn(F),F})()}}const Z=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,b){var x=this;return(0,d.Z)(function*(){x.storage[_]=b})()}_get(_){var b=this;return(0,d.Z)(function*(){const x=b.storage[_];return void 0===x?null:x})()}_remove(_){var b=this;return(0,d.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return w.type="NONE",w})();function G(w,g,_){return`firebase:${w}:${g}:${_}`}class Y{constructor(g,_,b){this.persistence=g,this.auth=_,this.userKey=b;const{config:x,name:F}=this.auth;this.fullUserKey=G(this.userKey,x.apiKey,F),this.fullPersistenceKey=G("persistence",x.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Ct._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,b="authUser"){return(0,d.Z)(function*(){if(!_.length)return new Y(re(Z),g,b);const x=(yield Promise.all(_.map(function(){var vt=(0,d.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return vt.apply(this,arguments)}}()))).filter(vt=>vt);let F=x[0]||re(Z);const te=G(b,g.config.apiKey,g.name);let xe=null;for(const vt of _)try{const Wt=yield vt._get(te);if(Wt){const Rn=Ct._fromJSON(g,Wt);vt!==F&&(xe=Rn),F=vt;break}}catch(Wt){}const nt=x.filter(vt=>vt._shouldAllowMigration);return F._shouldAllowMigration&&nt.length?(F=nt[0],xe&&(yield F._set(te,xe.toJSON())),yield Promise.all(_.map(function(){var vt=(0,d.Z)(function*(Wt){if(Wt!==F)try{yield Wt._remove(te)}catch(Rn){}});return function(Wt){return vt.apply(this,arguments)}}())),new Y(F,g,b)):new Y(F,g,b)})()}}function H(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Fe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(P(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ut(g))return"Blackberry";if(Mt(g))return"Webos";if(B(g))return"Safari";if((g.includes("chrome/")||de(g))&&!g.includes("edge/"))return"Chrome";if(tt(g))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function P(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function de(w=(0,$.z$)()){return/crios\//i.test(w)}function Fe(w=(0,$.z$)()){return/iemobile/i.test(w)}function tt(w=(0,$.z$)()){return/android/i.test(w)}function ut(w=(0,$.z$)()){return/blackberry/i.test(w)}function Mt(w=(0,$.z$)()){return/webos/i.test(w)}function st(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function ln(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Gr(w=(0,$.z$)()){return st(w)||tt(w)||Mt(w)||ut(w)||/windows phone/i.test(w)||Fe(w)}function Cr(w,g=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const b=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${b}`}class Ba{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const b=F=>new Promise((te,xe)=>{try{te(g(F))}catch(nt){xe(nt)}});b.onAbort=_,this.queue.push(b);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){var b;if(_.auth.currentUser===g)return;const x=[];try{for(const F of _.queue)yield F(g),F.onAbort&&x.push(F.onAbort)}catch(F){x.reverse();for(const te of x)try{te()}catch(xe){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=F)||void 0===b?void 0:b.message})}})()}}class ui{constructor(g,_,b){this.app=g,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jt(this),this.idTokenSubscription=new jt(this),this.beforeStateQueue=new Ba(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,_){var b=this;return _&&(this._popupRedirectResolver=re(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,F;if(!b._deleted&&(b.persistenceManager=yield Y.create(b,g),!b._deleted)){if(null===(x=b._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(te){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(F=b.currentUser)||void 0===F?void 0:F.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var b;const x=yield _.assertedPersistence.getCurrentUser();let F=x,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xe=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,nt=null==F?void 0:F._redirectEventId,vt=yield _.tryRedirectSignIn(g);(!xe||xe===nt)&&(null==vt?void 0:vt.user)&&(F=vt.user,te=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(F)}catch(xe){F=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xe))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(x){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){var b;try{yield Gn(g)}catch(x){if("auth/network-request-failed"!==(null===(b=x)||void 0===b?void 0:b.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Lt(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const b=g?(0,$.m9)(g):null;return b&&se(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(g,_=!1){var b=this;return(0,d.Z)(function*(){if(!b._deleted)return g&&se(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,d.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,b){return this.registerStateListener(this.authStateSubscription,g,_,b)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,b){return this.registerStateListener(this.idTokenSubscription,g,_,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var b=this;return(0,d.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const b=g&&re(g)||_._popupRedirectResolver;se(b,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[re(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var b,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,b,x){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return se(te,this,"internal-error"),te.then(()=>F(this.currentUser)),"function"==typeof _?g.addObserver(_,b,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Cr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(b["X-Firebase-Client"]=x),b})()}}function je(w){return(0,$.m9)(w)}class jt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vn(w,g,_){const b=je(w);se(b._canInitEmulator,b,"emulator-config-failed"),se(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),F=ti(g),{host:te,port:xe}=function ws(w){const g=ti(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const F=x[1];return{host:F,port:er(b.substr(F.length+1))}}{const[F,te]=b.split(":");return{host:F,port:er(te)}}}(g);b.config.emulator={url:`${F}//${te}${null===xe?"":`:${xe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:te,port:xe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Es(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ti(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function er(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class fn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ye("not implemented")}_getIdTokenResponse(g){return ye("not implemented")}_linkToIdToken(g,_){return ye("not implemented")}_getReauthenticationResolver(g){return ye("not implemented")}}function fo(w,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:resetPassword",Ht(w,g))})).apply(this,arguments)}function Pt(w,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ko(w,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",Ht(w,g))})).apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithPassword",Ht(w,g))})).apply(this,arguments)}function zs(w,g){return po.apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:sendOobCode",Ht(w,g))})).apply(this,arguments)}function lr(w,g){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(w,g){return zs(w,g)})).apply(this,arguments)}function Xc(w,g){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(w,g){return zs(w,g)})).apply(this,arguments)}function Bi(w,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(w,g){return zs(w,g)})).apply(this,arguments)}function ed(w,g){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,d.Z)(function*(w,g){return zs(w,g)})).apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,g))})).apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,g))})).apply(this,arguments)}class Lu extends fn{constructor(g,_,b,x=null){super("password",b),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Lu(g,_,"password")}static _fromEmailAndCode(g,_,b=null){return new Lu(g,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Qo(w,g){return ur.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ks(w,g){return xi.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ge(g,"internal-error")}})()}_linkToIdToken(g,_){var b=this;return(0,d.Z)(function*(){switch(b.signInMethod){case"password":return Pt(g,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function td(w,g){return nd.apply(this,arguments)}(g,{idToken:_,email:b._email,oobCode:b._password});default:Ge(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function cr(w,g){return rd.apply(this,arguments)}function rd(){return(rd=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithIdp",Ht(w,g))})).apply(this,arguments)}class bs extends fn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new bs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ge("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:x}=_,F=(0,ce._T)(_,["providerId","signInMethod"]);if(!b||!x)return null;const te=new bs(b,x);return te.idToken=F.idToken||void 0,te.accessToken=F.accessToken||void 0,te.secret=F.secret,te.nonce=F.nonce,te.pendingToken=F.pendingToken||null,te}_getIdTokenResponse(g){return cr(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,cr(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,cr(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function pg(w,g){return id.apply(this,arguments)}function id(){return(id=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:sendVerificationCode",Ht(w,g))})).apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,g))})).apply(this,arguments)}function sd(){return(sd=(0,d.Z)(function*(w,g){const _=yield Fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,g));if(_.temporaryProof)throw $n(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const mg={USER_NOT_FOUND:"user-not-found"};function ad(){return(ad=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),mg)})).apply(this,arguments)}class Xo extends fn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Xo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Xo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function gg(w,g){return ja.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Jo(w,g){return sd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function od(w,g){return ad.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:b,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:b,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:F}=g;return b||_||x||F?new Xo({verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:F}):null}}class Cs{constructor(g){var _,b,x,F,te,xe;const nt=(0,$.zd)((0,$.pd)(g)),vt=null!==(_=nt.apiKey)&&void 0!==_?_:null,Wt=null!==(b=nt.oobCode)&&void 0!==b?b:null,Rn=function _g(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);se(vt&&Wt&&Rn,"argument-error"),this.apiKey=vt,this.operation=Rn,this.code=Wt,this.continueUrl=null!==(F=nt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(te=nt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(xe=nt.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const _=function Jh(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||_||g||w}(g);try{return new Cs(_)}catch(b){return null}}}let Ha=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,b){return Lu._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const x=Cs.parseLink(b);return se(x,"argument-error"),Lu._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ys{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ri extends Ys{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ea extends Ri{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return se("providerId"in _&&"signInMethod"in _,"argument-error"),bs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return se(g.idToken||g.accessToken,"argument-error"),bs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ea.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ea.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:F,nonce:te,providerId:xe}=g;if(!b&&!x&&!_&&!F||!xe)return null;try{return new ea(xe)._credential({idToken:_,accessToken:b,nonce:te,pendingToken:F})}catch(nt){return null}}}let $a=(()=>{class w extends Ri{constructor(){super("facebook.com")}static credential(_){return bs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(b){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ga=(()=>{class w extends Ri{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return bs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:x}=_;if(!b&&!x)return null;try{return w.credential(b,x)}catch(F){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Xh=(()=>{class w extends Ri{constructor(){super("github.com")}static credential(_){return bs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(b){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class mo extends fn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return cr(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,cr(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,cr(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:x,pendingToken:F}=_;return b&&x&&F&&b===x?new mo(b,F):null}static _create(g,_){return new mo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Is extends Ys{constructor(g){se(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Is.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Is.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=mo.fromJSON(g);return se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:b}=g;if(!_||!b)return null;try{return mo._create(b,_)}catch(x){return null}}}let ji=(()=>{class w extends Ri{constructor(){super("twitter.com")}static credential(_,b){return bs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=_;if(!b||!x)return null;try{return w.credential(b,x)}catch(F){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ld(w,g){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signUp",Ht(w,g))})).apply(this,arguments)}class qr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,b,x=!1){return(0,d.Z)(function*(){const F=yield Ct._fromIdTokenResponse(g,b,x),te=cd(b);return new qr({user:F,providerId:te,_tokenResponse:b,operationType:_})})()}static _forOperation(g,_,b){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const x=cd(b);return new qr({user:g,providerId:x,_tokenResponse:b,operationType:_})})()}}function cd(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function dd(w){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(w){var g;const _=je(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new qr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield ld(_,{returnSecureToken:!0}),x=yield qr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Vu extends $.ZR{constructor(g,_,b,x){var F;super(_.code,_.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,Vu.prototype),this.customData={appName:g.name,tenantId:null!==(F=g.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,_,b,x){return new Vu(g,_,b,x)}}function Bu(w,g,_,b){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Vu._fromErrorAndOperation(w,F,g,b):F})}function jl(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ts(w,g){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);yield Qs(!0,_,g);const{providerUserInfo:b}=yield Nr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=jl(b||[]);return _.providerData=_.providerData.filter(F=>x.has(F.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Cn(w,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(w,g,_=!1){const b=yield it(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return qr._forOperation(w,"link",b)})).apply(this,arguments)}function Qs(w,g,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(w,g,_){yield Gn(g);const x=!1===w?"provider-already-linked":"no-such-provider";se(jl(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function ju(w,g){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(w,g,_=!1){var b;const{auth:x}=w,F="reauthenticate";try{const te=yield it(w,Bu(x,F,g,w),_);se(te.idToken,x,"internal-error");const xe=zt(te.idToken);se(xe,x,"internal-error");const{sub:nt}=xe;return se(w.uid===nt,x,"user-mismatch"),qr._forOperation(w,F,te)}catch(te){throw"auth/user-not-found"===(null===(b=te)||void 0===b?void 0:b.code)&&Ge(x,"user-mismatch"),te}})).apply(this,arguments)}function _o(w,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(w,g,_=!1){const b="signIn",x=yield Bu(w,b,g),F=yield qr._fromIdTokenResponse(w,b,x);return _||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Hu(w,g){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(w,g){return _o(je(w),g)})).apply(this,arguments)}function Ds(w,g){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);return yield Qs(!1,_,g.providerId),Cn(_,g)})).apply(this,arguments)}function ta(w,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,d.Z)(function*(w,g){return ju((0,$.m9)(w),g)})).apply(this,arguments)}function $l(w,g){return li.apply(this,arguments)}function li(){return(li=(0,d.Z)(function*(w,g){return Fn(w,"POST","/v1/accounts:signInWithCustomToken",Ht(w,g))})).apply(this,arguments)}function Js(w,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(w,g){const _=je(w),b=yield $l(_,{token:g,returnSecureToken:!0}),x=yield qr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class bt{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Za._fromServerResponse(g,_):Ge(g,"internal-error")}}class Za extends bt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Za(_)}}function za(w,g,_){var b;se((null===(b=_.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),se(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(se(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(se(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function hd(w,g,_){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&za(b,x,_),yield Xc(b,x)})).apply(this,arguments)}function Gl(w,g,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(w,g,_){yield fo((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function ef(w,g){return Me.apply(this,arguments)}function Me(){return(Me=(0,d.Z)(function*(w,g){yield Ko((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function Gt(w,g){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),b=yield fo(_,{oobCode:g}),x=b.requestType;switch(se(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(b.mfaInfo,_,"internal-error");default:se(b.email,_,"internal-error")}let F=null;return b.mfaInfo&&(F=bt._fromServerResponse(je(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:F},operation:x}})).apply(this,arguments)}function Zn(w,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(w,g){const{data:_}=yield Gt((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function Ja(w,g,_){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(w,g,_){const b=je(w),x=yield ld(b,{returnSecureToken:!0,email:g,password:_}),F=yield qr._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(F.user),F})).apply(this,arguments)}function ql(w,g,_){return Hu((0,$.m9)(w),Ha.credential(g,_))}function Wl(w,g,_){return fd.apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};se(_.handleCodeInApp,b,"argument-error"),_&&za(b,x,_),yield Bi(b,x)})).apply(this,arguments)}function pd(w,g){const _=Cs.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Xa(w,g,_){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w),x=Ha.credentialWithLink(g,_||fe());return se(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Hu(b,x)})).apply(this,arguments)}function _r(w,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:createAuthUri",Ht(w,g))})).apply(this,arguments)}function Zl(w,g){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(w,g){const b={identifier:g,continueUri:Ue()?fe():"http://localhost"},{signinMethods:x}=yield _r((0,$.m9)(w),b);return x||[]})).apply(this,arguments)}function Ss(w,g){return eu.apply(this,arguments)}function eu(){return(eu=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&za(_.auth,x,g);const{email:F}=yield lr(_.auth,x);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function gd(w,g,_){return tu.apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&za(b.auth,F,_);const{email:te}=yield ed(b.auth,F);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function md(w,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(w,g){return Yt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function zl(w,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const b=(0,$.m9)(w),F={idToken:yield b.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield it(b,md(b.auth,F));b.displayName=te.displayName||null,b.photoURL=te.photoUrl||null;const xe=b.providerData.find(({providerId:nt})=>"password"===nt);xe&&(xe.displayName=b.displayName,xe.photoURL=b.photoURL),yield b._updateTokensIfNecessary(te)})).apply(this,arguments)}function Kl(w,g){return $u((0,$.m9)(w),g,null)}function vg(w,g){return $u((0,$.m9)(w),null,g)}function $u(w,g,_){return vo.apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(w,g,_){const{auth:b}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(F.email=g),_&&(F.password=_);const te=yield it(w,Pt(b,F));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class wo{constructor(g,_,b={}){this.isNewUser=g,this.providerId=_,this.profile=b}}class _d extends wo{constructor(g,_,b,x){super(g,_,b),this.username=x}}class tf extends wo{constructor(g,_){super(g,"facebook.com",_)}}class ra extends _d{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class as extends wo{constructor(g,_){super(g,"google.com",_)}}class nf extends _d{constructor(g,_,b){super(g,"twitter.com",_,b)}}function Sr(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Yl(w){var g,_;if(!w)return null;const{providerId:b}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&(null==w?void 0:w.idToken)){const te=null===(_=null===(g=zt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new wo(F,"anonymous"!==te&&"custom"!==te?te:null)}if(!b)return null;switch(b){case"facebook.com":return new tf(F,x);case"github.com":return new ra(F,x);case"google.com":return new as(F,x);case"twitter.com":return new nf(F,x,w.screenName||null);case"custom":case"anonymous":return new wo(F,null);default:return new wo(F,b,x)}}(_)}class xs{constructor(g,_,b){this.type=g,this.credential=_,this.auth=b}static _fromIdtoken(g,_){return new xs("enroll",g,_)}static _fromMfaPendingCredential(g){return new xs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,b;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return xs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return xs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class iu{constructor(g,_,b){this.session=g,this.hints=_,this.signInResolver=b}static _fromError(g,_){const b=je(g),x=_.customData._serverResponse,F=(x.mfaInfo||[]).map(xe=>bt._fromServerResponse(b,xe));se(x.mfaPendingCredential,b,"internal-error");const te=xs._fromMfaPendingCredential(x.mfaPendingCredential);return new iu(te,F,function(){var xe=(0,d.Z)(function*(nt){const vt=yield nt._process(b,te);delete x.mfaInfo,delete x.mfaPendingCredential;const Wt=Object.assign(Object.assign({},x),{idToken:vt.idToken,refreshToken:vt.refreshToken});switch(_.operationType){case"signIn":const Rn=yield qr._fromIdTokenResponse(b,_.operationType,Wt);return yield b._updateCurrentUser(Rn.user),Rn;case"reauthenticate":return se(_.user,b,"internal-error"),qr._forOperation(_.user,_.operationType,Wt);default:Ge(b,"internal-error")}});return function(nt){return xe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function Gu(w,g){var _;const b=(0,$.m9)(w),x=g;return se(g.customData.operationType,b,"argument-error"),se(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),iu._fromError(b,x)}function Ar(w,g){return Yt(w,"POST","/v2/accounts/mfaEnrollment:start",Ht(w,g))}class ia{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>bt._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new ia(g)}getSession(){var g=this;return(0,d.Z)(function*(){return xs._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var b=this;return(0,d.Z)(function*(){const x=g,F=yield b.getSession(),te=yield it(b.user,x._process(b.user.auth,F,_));return yield b.user._updateTokensIfNecessary(te),b.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){var b;const x="string"==typeof g?g:g.uid,F=yield _.user.getIdToken(),te=yield it(_.user,function Eo(w,g){return Yt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(w,g))}(_.user.auth,{idToken:F,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:xe})=>xe!==x),yield _.user._updateTokensIfNecessary(te);try{yield _.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(b=xe)||void 0===b?void 0:b.code))throw xe}})()}}const vd=new WeakMap;function wd(w){const g=(0,$.m9)(w);return vd.has(g)||vd.set(g,ia._fromUser(g)),vd.get(g)}const bo="__sak";class su{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(bo,"1"),this.storage.removeItem(bo),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const rt=(()=>{class w extends su{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function af(){const w=(0,$.z$)();return B(w)||st(w)}()&&function is(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Gr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),F=this.localCache[b];x!==F&&_(b,F,x)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((xe,nt,vt)=>{this.notifyListeners(xe,vt)});const x=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(_.newValue!==xe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!b)return}const F=()=>{const xe=this.storage.getItem(x);!b&&this.localCache[x]===xe||this.notifyListeners(x,xe)},te=this.storage.getItem(x);!function Ut(){return(0,$.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const F of Array.from(x))F(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var x=()=>super._set,F=this;return(0,d.Z)(function*(){yield x().call(F,_,b),F.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,x=this;return(0,d.Z)(function*(){const F=yield b().call(x,_);return x.localCache[_]=JSON.stringify(F),F})()}_remove(_){var b=()=>super._remove,x=this;return(0,d.Z)(function*(){yield b().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Wr=(()=>{class w extends su{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return w.type="SESSION",w})();let Ql=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(F=>F.isListeningto(_));if(b)return b;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,d.Z)(function*(){const x=_,{eventId:F,eventType:te,data:xe}=x.data,nt=b.handlersMap[te];if(!(null==nt?void 0:nt.size))return;x.ports[0].postMessage({status:"ack",eventId:F,eventType:te});const vt=Array.from(nt).map(function(){var Rn=(0,d.Z)(function*(gi){return gi(x.origin,xe)});return function(gi){return Rn.apply(this,arguments)}}()),Wt=yield function yr(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return g.apply(this,arguments)}}()))}(vt);x.ports[0].postMessage({status:"done",eventId:F,eventType:te,response:Wt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function sa(w="",g=10){let _="";for(let b=0;b<g;b++)_+=Math.floor(10*Math.random());return w+_}class oa{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,b=50){var x=this;return(0,d.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let te,xe;return new Promise((nt,vt)=>{const Wt=sa("",20);F.port1.start();const Rn=setTimeout(()=>{vt(new Error("unsupported_event"))},b);xe={messageChannel:F,onMessage(gi){const _a=gi;if(_a.data.eventId===Wt)switch(_a.data.status){case"ack":clearTimeout(Rn),te=setTimeout(()=>{vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),nt(_a.data.response);break;default:clearTimeout(Rn),clearTimeout(te),vt(new Error("invalid_response"))}}},x.handlers.add(xe),F.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:g,eventId:Wt,data:_},[F.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function zn(){return window}function Io(){return void 0!==zn().WorkerGlobalScope&&"function"==typeof zn().importScripts}function gt(){return(gt=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const qu="firebaseLocalStorageDb",wn="firebaseLocalStorage",aa="fbase_key";class To{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Rs(w,g){return w.transaction([wn],g?"readwrite":"readonly").objectStore(wn)}function Or(){const w=indexedDB.open(qu,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(wn,{keyPath:aa})}catch(x){_(x)}}),w.addEventListener("success",(0,d.Z)(function*(){const b=w.result;b.objectStoreNames.contains(wn)?g(b):(b.close(),yield function au(){const w=indexedDB.deleteDatabase(qu);return new To(w).toPromise()}(),g(yield Or()))}))})}function Do(w,g,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,d.Z)(function*(w,g,_){const b=Rs(w,!0).put({[aa]:g,value:_});return new To(b).toPromise()})).apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(w,g){const _=Rs(w,!1).get(g),b=yield new To(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Zu(w,g){const _=Rs(w,!0).delete(g);return new To(_).toPromise()}const ls=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Or()),_.db})()}_withRetries(_){var b=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const F=yield b._openDb();return yield _(F)}catch(F){if(x++>3)throw F;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Io()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Ql._getInstance(function bd(){return Io()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,d.Z)(function*(x,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(x,F){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,d.Z)(function*(x,F){return["keyChanged"]});return function(x,F){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var b,x;if(_.activeServiceWorker=yield function us(){return gt.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new oa(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(b=F[0])||void 0===b?void 0:b.fulfilled)&&(null===(x=F[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,d.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Ed(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Or();return yield Do(_,bo,"1"),yield Zu(_,bo),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,d.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(F=>Do(F,_,b)),x.localCache[_]=b,x.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,d.Z)(function*(){const x=yield b._withRetries(F=>function uu(w,g){return Ms.apply(this,arguments)}(F,_));return b.localCache[_]=x,x})()}_remove(_){var b=this;return(0,d.Z)(function*(){return b._withPendingWrite((0,d.Z)(function*(){return yield b._withRetries(x=>Zu(x,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const b=yield _._withRetries(te=>{const xe=Rs(te,!1).getAll();return new To(xe).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const x=[],F=new Set;for(const{fbase_key:te,value:xe}of b)F.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(xe)&&(_.notifyListeners(te,xe),x.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!F.has(te)&&(_.notifyListeners(te,null),x.push(te));return x})()}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const F of Array.from(x))F(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Jl(w,g){return Yt(w,"POST","/v2/accounts/mfaSignIn:start",Ht(w,g))}function ci(){return(ci=(0,d.Z)(function*(w){return(yield Yt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zr(w){return new Promise((g,_)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=g,b.onerror=x=>{const F=Pe("internal-error");F.customData=x,_(F)},b.type="text/javascript",b.charset="UTF-8",function xn(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(b)})}function di(w){return`__${w}${Math.floor(1e6*Math.random())}`}const En=1e12;class Mi{constructor(g){this.auth=g,this.counter=En,this._widgets=new Map}render(g,_){const b=this.counter;return this._widgets.set(b,new Vn(g,this.auth.name,_||{})),this.counter++,b}reset(g){var _;const b=g||En;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(g){var _;return(null===(_=this._widgets.get(g||En))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var b;return null===(b=_._widgets.get(g||En))||void 0===b||b.execute(),""})()}}class Vn{constructor(g,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;se(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zu(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lu=di("rcb"),Kn=new Je(3e4,6e4);class lf{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=zn().grecaptcha)||void 0===g?void 0:g.render)}load(g,_=""){return se(function Cd(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(zn().grecaptcha):new Promise((b,x)=>{const F=zn().setTimeout(()=>{x(Pe(g,"network-request-failed"))},Kn.get());zn()[lu]=()=>{zn().clearTimeout(F),delete zn()[lu];const xe=zn().grecaptcha;if(!xe)return void x(Pe(g,"internal-error"));const nt=xe.render;xe.render=(vt,Wt)=>{const Rn=nt(vt,Wt);return this.counter++,Rn},this.hostLanguage=_,b(xe)},Zr(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:lu,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),x(Pe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!!(null===(_=zn().grecaptcha)||void 0===_?void 0:_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cu{load(g){return(0,d.Z)(function*(){return new Mi(g)})()}clearedOneInstance(){}}const fi="recaptcha",ty={theme:"light",type:"image"};class Ro{constructor(g,_=Object.assign({},ty),b){this.parameters=_,this.type=fi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(b),this.isInvisible="invisible"===this.parameters.size,se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;se(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cu:new lf,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(_)||new Promise(F=>{const te=xe=>{!xe||(g.tokenChangeListeners.delete(te),F(xe))};g.tokenChangeListeners.add(te),g.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof g)g(_);else if("string"==typeof g){const b=zn()[g];"function"==typeof b&&b(_)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){se(Ue()&&!Io(),g.auth,"internal-error"),yield function ca(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Ao(w){return ci.apply(this,arguments)}(g.auth);se(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class da{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Xo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function dr(w,g,_){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(w,g,_){const b=je(w),x=yield pi(b,g,(0,$.m9)(_));return new da(x,F=>Hu(b,F))})).apply(this,arguments)}function fa(w,g,_){return Id.apply(this,arguments)}function Id(){return(Id=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w);yield Qs(!1,b,"phone");const x=yield pi(b.auth,g,(0,$.m9)(_));return new da(x,F=>Ds(b,F))})).apply(this,arguments)}function cf(w,g,_){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w),x=yield pi(b.auth,g,(0,$.m9)(_));return new da(x,F=>ta(b,F))})).apply(this,arguments)}function pi(w,g,_){return du.apply(this,arguments)}function du(){return(du=(0,d.Z)(function*(w,g,_){var b;const x=yield _.verify();try{let F;if(se("string"==typeof x,w,"argument-error"),se(_.type===fi,w,"argument-error"),F="string"==typeof g?{phoneNumber:g}:g,"session"in F){const te=F.session;if("phoneNumber"in F)return se("enroll"===te.type,w,"internal-error"),(yield Ar(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{se("signin"===te.type,w,"internal-error");const xe=(null===(b=F.multiFactorHint)||void 0===b?void 0:b.uid)||F.multiFactorUid;return se(xe,w,"missing-multi-factor-info"),(yield Jl(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield pg(w,{phoneNumber:F.phoneNumber,recaptchaToken:x});return te}}finally{_._reset()}})).apply(this,arguments)}function hu(w,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(w,g){yield Cn((0,$.m9)(w),g)})).apply(this,arguments)}let Td=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=je(_)}verifyPhoneNumber(_,b){return pi(this.auth,_,(0,$.m9)(b))}static credential(_,b){return Xo._fromVerification(_,b)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:x}=_;return b&&x?Xo._fromTokenResponse(b,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Mo(w,g){return g?re(g):(se(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Ku extends fn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return cr(g,this._buildIdpRequest())}_linkToIdToken(g,_){return cr(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return cr(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function df(w){return _o(w.auth,new Ku(w),w.bypassAuthState)}function qt(w){const{auth:g,user:_}=w;return se(_,g,"internal-error"),ju(_,new Ku(w),w.bypassAuthState)}function Yu(w){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return se(_,g,"internal-error"),Cn(_,new Ku(w),w.bypassAuthState)})).apply(this,arguments)}class ko{constructor(g,_,b,x,F=!1){this.auth=g,this.resolver=b,this.user=x,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(b,x){g.pendingPromise={resolve:b,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(F){g.reject(F)}});return function(b,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:F,tenantId:te,error:xe,type:nt}=g;if(xe)return void _.reject(xe);const vt={auth:_.auth,requestUri:b,sessionId:x,tenantId:te||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(vt))}catch(Wt){_.reject(Wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return df;case"linkViaPopup":case"linkViaRedirect":return Yu;case"reauthViaPopup":case"reauthViaRedirect":return qt;default:Ge(this.auth,"internal-error")}}resolve(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cs=new Je(2e3,1e4);function Dd(w,g,_){return ga.apply(this,arguments)}function ga(){return(ga=(0,d.Z)(function*(w,g,_){const b=je(w);Te(w,g,Ys);const x=Mo(b,_);return new Qu(b,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Xl(w,g,_){return qi.apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w);Te(b.auth,g,Ys);const x=Mo(b.auth,_);return new Qu(b.auth,"reauthViaPopup",g,x,b).executeNotNull()})).apply(this,arguments)}function hf(w,g,_){return ec.apply(this,arguments)}function ec(){return(ec=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w);Te(b.auth,g,Ys);const x=Mo(b.auth,_);return new Qu(b.auth,"linkViaPopup",g,x,b).executeNotNull()})).apply(this,arguments)}let Qu=(()=>{class w extends ko{constructor(_,b,x,F,te){super(_,b,F,te),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const b=yield _.execute();return se(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,d.Z)(function*(){be(1===_.filter.length,"Popup operations only handle one event");const b=sa();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Pe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,x;this.pollId=(null===(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,cs.get())};_()}}return w.currentPopupAction=null,w})();const yn=new Map;class ii extends ko{constructor(g,_,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let b=yn.get(_.auth._key());if(!b){try{const F=(yield function Cg(w,g){return No.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;b=()=>Promise.resolve(F)}catch(x){b=()=>Promise.reject(x)}yn.set(_.auth._key(),b)}return _.bypassAuthState||yn.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,b=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(b,g);if("unknown"!==g.type){if(g.eventId){const x=yield b.auth._redirectUserForId(g.eventId);if(x)return b.user=x,_().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function No(){return(No=(0,d.Z)(function*(w,g){const _=fu(g),b=pf(w);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(_));return yield b._remove(_),x})).apply(this,arguments)}function ki(w,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(w,g){return pf(w)._set(fu(g),"true")})).apply(this,arguments)}function Oo(){yn.clear()}function tc(w,g){yn.set(w._key(),g)}function pf(w){return re(w._redirectPersistence)}function fu(w){return G("pendingRedirect",w.config.apiKey,w.name)}function Sd(w,g,_){return function to(w,g,_){return ks.apply(this,arguments)}(w,g,_)}function ks(){return(ks=(0,d.Z)(function*(w,g,_){const b=je(w);Te(w,g,Ys);const x=Mo(b,_);return yield ki(x,b),x._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function C(w,g,_){return function D(w,g,_){return M.apply(this,arguments)}(w,g,_)}function M(){return(M=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w);Te(b.auth,g,Ys);const x=Mo(b.auth,_);yield ki(x,b.auth);const F=yield kt(b);return x._openRedirect(b.auth,g,"reauthViaRedirect",F)})).apply(this,arguments)}function j(w,g,_){return function J(w,g,_){return le.apply(this,arguments)}(w,g,_)}function le(){return(le=(0,d.Z)(function*(w,g,_){const b=(0,$.m9)(w);Te(b.auth,g,Ys);const x=Mo(b.auth,_);yield Qs(!1,b,g.providerId),yield ki(x,b.auth);const F=yield kt(b);return x._openRedirect(b.auth,g,"linkViaRedirect",F)})).apply(this,arguments)}function Ne(w,g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,d.Z)(function*(w,g){return yield je(w)._initializationPromise,yt(w,g,!1)})).apply(this,arguments)}function yt(w,g){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(w,g,_=!1){const b=je(w),x=Mo(b,g),te=yield new ii(b,x,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield b._persistUserIfCurrent(te.user),yield b._setRedirectUser(null,g)),te})).apply(this,arguments)}function kt(w){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(w){const g=sa(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Fr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(_=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ds(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ps(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var b;if(g.error&&!Ps(g)){const x=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Pe(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const b=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ns(g))}saveEventToCache(g){this.cachedEventUids.add(Ns(g)),this.lastProcessedEventTime=Date.now()}}function Ns(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Ps({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function nc(w){return pu.apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(w,g={}){return Yt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const gu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zr=/^https?/;function Ju(){return(Ju=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield nc(w);for(const _ of g)try{if(uE(_))return}catch(b){}Ge(w,"unauthorized-domain")})).apply(this,arguments)}function uE(w){const g=fe(),{protocol:_,hostname:b}=new URL(g);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===b?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===b}if(!zr.test(_))return!1;if(gu.test(w))return b===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const Ig=new Je(3e4,6e4);function Tg(){const w=zn().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Xu=null;function gf(w){return Xu=Xu||function ny(w){return new Promise((g,_)=>{var b,x,F;function te(){Tg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Tg(),_(Pe(w,"network-request-failed"))},timeout:Ig.get()})}if(null===(x=null===(b=zn().gapi)||void 0===b?void 0:b.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(F=zn().gapi)||void 0===F?void 0:F.load)){const xe=di("iframefcb");return zn()[xe]=()=>{gapi.load?te():_(Pe(w,"network-request-failed"))},Zr(`https://apis.google.com/js/api.js?onload=${xe}`).catch(nt=>_(nt))}te()}}).catch(g=>{throw Xu=null,g})}(w),Xu}const Fo=new Je(5e3,15e3),mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ry=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function el(w){const g=w.config;se(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?cn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},x=ry.get(w.config.apiHost);x&&(b.eid=x);const F=w._getFrameworks();return F.length&&(b.fw=F.join(",")),`${_}?${(0,$.xO)(b).slice(1)}`}function tl(){return tl=(0,d.Z)(function*(w){const g=yield gf(w),_=zn().gapi;return se(_,w,"internal-error"),g.open({where:document.body,url:el(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mu,dontclear:!0},b=>new Promise(function(){var x=(0,d.Z)(function*(F,te){yield b.restyle({setHideOnLeave:!1});const xe=Pe(w,"network-request-failed"),nt=zn().setTimeout(()=>{te(xe)},Fo.get());function vt(){zn().clearTimeout(nt),F(b)}b.ping(vt).then(vt,()=>{te(xe)})});return function(F,te){return x.apply(this,arguments)}}()))}),tl.apply(this,arguments)}const nl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Md{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function no(w,g,_,b,x,F){se(w.config.authDomain,w,"auth-domain-config-required"),se(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:b,v:N.SDK_VERSION,eventId:x};if(g instanceof Ys){g.setDefaultLanguage(w.languageCode),te.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,vt]of Object.entries(F||{}))te[nt]=vt}if(g instanceof Ri){const nt=g.getScopes().filter(vt=>""!==vt);nt.length>0&&(te.scopes=nt.join(","))}w.tenantId&&(te.tid=w.tenantId);const xe=te;for(const nt of Object.keys(xe))void 0===xe[nt]&&delete xe[nt];return`${function ma({config:w}){return w.emulator?cn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(xe).slice(1)}`}const _u="webStorageSupport",Sg=class Dg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wr,this._completeRedirectFn=yt,this._overrideRedirectResult=tc}_openPopup(g,_,b,x){var F=this;return(0,d.Z)(function*(){var te;be(null===(te=F.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const xe=no(g,_,b,fe(),x);return function sy(w,g,_,b=500,x=600){const F=Math.max((window.screen.availHeight-x)/2,0).toString(),te=Math.max((window.screen.availWidth-b)/2,0).toString();let xe="";const nt=Object.assign(Object.assign({},nl),{width:b.toString(),height:x.toString(),top:F,left:te}),vt=(0,$.z$)().toLowerCase();_&&(xe=de(vt)?"_blank":_),P(vt)&&(g=g||"http://localhost",nt.scrollbars="yes");const Wt=Object.entries(nt).reduce((gi,[_a,ya])=>`${gi}${_a}=${ya},`,"");if(function mr(w=(0,$.z$)()){var g;return st(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(vt)&&"_self"!==xe)return function rc(w,g){const _=document.createElement("a");_.href=w,_.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(g||"",xe),new Md(null);const Rn=window.open(g||"",xe,Wt);se(Rn,w,"popup-blocked");try{Rn.focus()}catch(gi){}return new Md(Rn)}(g,xe,sa())})()}_openRedirect(g,_,b,x){var F=this;return(0,d.Z)(function*(){return yield F._originValidation(g),function Co(w){zn().location.href=w}(no(g,_,b,fe(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:F}=this.eventManagers[_];return x?Promise.resolve(x):(be(F,"If manager is not set, promise should be"),F)}const b=this.initAndGetManager(g);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const b=yield function iy(w){return tl.apply(this,arguments)}(g),x=new Fr(g);return b.register("authEvent",F=>(se(null==F?void 0:F.authEvent,g,"invalid-auth-event"),{status:x.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=b,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(_u,{type:_u},x=>{var F;const te=null===(F=null==x?void 0:x[0])||void 0===F?void 0:F[_u];void 0!==te&&_(!!te),Ge(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function hs(w){return Ju.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Gr()||B()||st()}};class Ag extends class uy{constructor(g){this.factorId=g}_process(g,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,b);case"signin":return this._finalizeSignIn(g,_.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ag(g)}_finalizeEnroll(g,_,b){return function sf(w,g){return Yt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(w,g))}(g,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Un(w,g){return Yt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ht(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xg=(()=>{class w{constructor(){}static assertion(_){return Ag._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var yf="@firebase/auth",Rg="0.20.11";class ly{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(b=>{var x;g((null===(x=b)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function kd(w){(0,N._registerComponent)(new ae.wA("auth",(g,{options:_})=>{const b=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:F,authDomain:te}=b.options;return((xe,nt)=>{se(F&&!F.includes(":"),"invalid-api-key",{appName:xe.name}),se(!(null==te?void 0:te.includes(":")),"argument-error",{appName:xe.name});const vt={apiKey:F,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cr(w)},Wt=new ui(xe,nt,vt);return function we(w,g){const _=(null==g?void 0:g.persistence)||[],b=(Array.isArray(_)?_:[_]).map(re);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(Wt,_),Wt})(b,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,b)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ae.wA("auth-internal",g=>{const _=je(g.getProvider("auth").getImmediate());return new ly(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(yf,Rg,function Mg(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(yf,Rg,"esm2017")}("Browser")},2090:(Ke,Ee,O)=>{"use strict";O.d(Ee,{BH:()=>Lt,LL:()=>dn,ZR:()=>Dn,gQ:()=>Sn,zI:()=>ye,hu:()=>$,g5:()=>N,US:()=>ae,tV:()=>pe,h$:()=>X,L:()=>ee,$s:()=>ze,r3:()=>Di,Sg:()=>Je,ne:()=>gr,p$:()=>W,vZ:()=>Nr,ZB:()=>q,gK:()=>$r,pd:()=>Hr,aH:()=>ft,Pz:()=>nn,m9:()=>sn,z$:()=>Be,GJ:()=>Ti,jU:()=>$e,ru:()=>ve,xb:()=>rs,w1:()=>Ge,hl:()=>qe,uI:()=>Ae,UG:()=>Le,Yr:()=>Re,b$:()=>De,G6:()=>Te,w9:()=>ns,cI:()=>Yt,UI:()=>Et,xO:()=>Pr,zd:()=>jr,DV:()=>$n,ug:()=>_t,dS:()=>gn,Wl:()=>kn,Dv:()=>Si,Wj:()=>Vi,lb:()=>Gn,eu:()=>se});const $=function(Z,G){if(!Z)throw N(G)},N=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},oe=function(Z){const G=[];let Y=0;for(let H=0;H<Z.length;H++){let P=Z.charCodeAt(H);P<128?G[Y++]=P:P<2048?(G[Y++]=P>>6|192,G[Y++]=63&P|128):55296==(64512&P)&&H+1<Z.length&&56320==(64512&Z.charCodeAt(H+1))?(P=65536+((1023&P)<<10)+(1023&Z.charCodeAt(++H)),G[Y++]=P>>18|240,G[Y++]=P>>12&63|128,G[Y++]=P>>6&63|128,G[Y++]=63&P|128):(G[Y++]=P>>12|224,G[Y++]=P>>6&63|128,G[Y++]=63&P|128)}return G},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,G){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let P=0;P<Z.length;P+=3){const B=Z[P],de=P+1<Z.length,Fe=de?Z[P+1]:0,tt=P+2<Z.length,ut=tt?Z[P+2]:0;let ln=(15&Fe)<<2|ut>>6,mr=63&ut;tt||(mr=64,de||(ln=64)),H.push(Y[B>>2],Y[(3&B)<<4|Fe>>4],Y[ln],Y[mr])}return H.join("")},encodeString(Z,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(Z):this.encodeByteArray(oe(Z),G)},decodeString(Z,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(Z):function(Z){const G=[];let Y=0,H=0;for(;Y<Z.length;){const P=Z[Y++];if(P<128)G[H++]=String.fromCharCode(P);else if(P>191&&P<224){const B=Z[Y++];G[H++]=String.fromCharCode((31&P)<<6|63&B)}else if(P>239&&P<365){const tt=((7&P)<<18|(63&Z[Y++])<<12|(63&Z[Y++])<<6|63&Z[Y++])-65536;G[H++]=String.fromCharCode(55296+(tt>>10)),G[H++]=String.fromCharCode(56320+(1023&tt))}else{const B=Z[Y++],de=Z[Y++];G[H++]=String.fromCharCode((15&P)<<12|(63&B)<<6|63&de)}}return G.join("")}(this.decodeStringToByteArray(Z,G))},decodeStringToByteArray(Z,G){this.init_();const Y=G?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let P=0;P<Z.length;){const B=Y[Z.charAt(P++)],Fe=P<Z.length?Y[Z.charAt(P)]:0;++P;const ut=P<Z.length?Y[Z.charAt(P)]:64;++P;const st=P<Z.length?Y[Z.charAt(P)]:64;if(++P,null==B||null==Fe||null==ut||null==st)throw Error();H.push(B<<2|Fe>>4),64!==ut&&(H.push(Fe<<4&240|ut>>2),64!==st&&H.push(ut<<6&192|st))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},X=function(Z){const G=oe(Z);return ae.encodeByteArray(G,!0)},ee=function(Z){return X(Z).replace(/\./g,"")},pe=function(Z){try{return ae.decodeString(Z,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function W(Z){return q(void 0,Z)}function q(Z,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return G}for(const Y in G)!G.hasOwnProperty(Y)||!ie(Y)||(Z[Y]=q(Z[Y],G[Y]));return Z}function ie(Z){return"__proto__"!==Z}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Le(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function $e(){return"object"==typeof self&&self.self===self}function ve(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ge(){const Z=Be();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Re(){return!1}function Te(){return!Le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function se(){return new Promise((Z,G)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(H);P.onsuccess=()=>{P.result.close(),Y||self.indexedDB.deleteDatabase(H),Z(!0)},P.onupgradeneeded=()=>{Y=!1},P.onerror=()=>{var B;G((null===(B=P.error)||void 0===B?void 0:B.message)||"")}}catch(Y){G(Y)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const we=()=>{try{return function be(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Z=process.env.__FIREBASE_DEFAULTS__;return Z?JSON.parse(Z):void 0})()||(()=>{if("undefined"==typeof document)return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Y){return}const G=Z&&pe(Z[1]);return G&&JSON.parse(G)})()}catch(Z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`)}},ft=()=>{var Z;return null===(Z=we())||void 0===Z?void 0:Z.config},nn=Z=>{var G;return null===(G=we())||void 0===G?void 0:G[`_${Z}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Y)=>{this.resolve=G,this.reject=Y})}wrapCallback(G){return(Y,H)=>{Y?this.reject(Y):this.resolve(H),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Y):G(Y,H))}}}function Je(Z,G){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=G||"demo-project",P=Z.iat||0,B=Z.sub||Z.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:P,exp:P+3600,auth_time:P,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[ee(JSON.stringify({alg:"none",type:"JWT"})),ee(JSON.stringify(de)),""].join(".")}class Dn extends Error{constructor(G,Y,H){super(Y),this.code=G,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(G,Y,H){this.service=G,this.serviceName=Y,this.errors=H}create(G,...Y){const H=Y[0]||{},P=`${this.service}/${G}`,B=this.errors[G],de=B?function rn(Z,G){return Z.replace(Ht,(Y,H)=>{const P=G[H];return null!=P?String(P):`<${H}?>`})}(B,H):"Error";return new Dn(P,`${this.serviceName}: ${de} (${P}).`,H)}}const Ht=/\{\$([^}]+)}/g;function Yt(Z){return JSON.parse(Z)}function kn(Z){return JSON.stringify(Z)}const ei=function(Z){let G={},Y={},H={},P="";try{const B=Z.split(".");G=Yt(pe(B[0])||""),Y=Yt(pe(B[1])||""),P=B[2],H=Y.d||{},delete Y.d}catch(B){}return{header:G,claims:Y,data:H,signature:P}},ns=function(Z){const Y=ei(Z).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Ti=function(Z){const G=ei(Z).claims;return"object"==typeof G&&!0===G.admin};function Di(Z,G){return Object.prototype.hasOwnProperty.call(Z,G)}function $n(Z,G){if(Object.prototype.hasOwnProperty.call(Z,G))return Z[G]}function rs(Z){for(const G in Z)if(Object.prototype.hasOwnProperty.call(Z,G))return!1;return!0}function Et(Z,G,Y){const H={};for(const P in Z)Object.prototype.hasOwnProperty.call(Z,P)&&(H[P]=G.call(Y,Z[P],P,Z));return H}function Nr(Z,G){if(Z===G)return!0;const Y=Object.keys(Z),H=Object.keys(G);for(const P of Y){if(!H.includes(P))return!1;const B=Z[P],de=G[P];if(bn(B)&&bn(de)){if(!Nr(B,de))return!1}else if(B!==de)return!1}for(const P of H)if(!Y.includes(P))return!1;return!0}function bn(Z){return null!==Z&&"object"==typeof Z}function Pr(Z){const G=[];for(const[Y,H]of Object.entries(Z))Array.isArray(H)?H.forEach(P=>{G.push(encodeURIComponent(Y)+"="+encodeURIComponent(P))}):G.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return G.length?"&"+G.join("&"):""}function jr(Z){const G={};return Z.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[P,B]=H.split("=");G[decodeURIComponent(P)]=decodeURIComponent(B)}}),G}function Hr(Z){const G=Z.indexOf("?");if(!G)return"";const Y=Z.indexOf("#",G);return Z.substring(G,Y>0?Y:void 0)}class Sn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,Y){Y||(Y=0);const H=this.W_;if("string"==typeof G)for(let st=0;st<16;st++)H[st]=G.charCodeAt(Y)<<24|G.charCodeAt(Y+1)<<16|G.charCodeAt(Y+2)<<8|G.charCodeAt(Y+3),Y+=4;else for(let st=0;st<16;st++)H[st]=G[Y]<<24|G[Y+1]<<16|G[Y+2]<<8|G[Y+3],Y+=4;for(let st=16;st<80;st++){const ln=H[st-3]^H[st-8]^H[st-14]^H[st-16];H[st]=4294967295&(ln<<1|ln>>>31)}let ut,Mt,P=this.chain_[0],B=this.chain_[1],de=this.chain_[2],Fe=this.chain_[3],tt=this.chain_[4];for(let st=0;st<80;st++){st<40?st<20?(ut=Fe^B&(de^Fe),Mt=1518500249):(ut=B^de^Fe,Mt=1859775393):st<60?(ut=B&de|Fe&(B|de),Mt=2400959708):(ut=B^de^Fe,Mt=3395469782);const ln=(P<<5|P>>>27)+ut+tt+Mt+H[st]&4294967295;tt=Fe,Fe=de,de=4294967295&(B<<30|B>>>2),B=P,P=ln}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+de&4294967295,this.chain_[3]=this.chain_[3]+Fe&4294967295,this.chain_[4]=this.chain_[4]+tt&4294967295}update(G,Y){if(null==G)return;void 0===Y&&(Y=G.length);const H=Y-this.blockSize;let P=0;const B=this.buf_;let de=this.inbuf_;for(;P<Y;){if(0===de)for(;P<=H;)this.compress_(G,P),P+=this.blockSize;if("string"==typeof G){for(;P<Y;)if(B[de]=G.charCodeAt(P),++de,++P,de===this.blockSize){this.compress_(B),de=0;break}}else for(;P<Y;)if(B[de]=G[P],++de,++P,de===this.blockSize){this.compress_(B),de=0;break}}this.inbuf_=de,this.total_+=Y}digest(){const G=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&Y,Y/=256;this.compress_(this.buf_);let H=0;for(let P=0;P<5;P++)for(let B=24;B>=0;B-=8)G[H]=this.chain_[P]>>B&255,++H;return G}}function gr(Z,G){const Y=new vs(Z,G);return Y.subscribe.bind(Y)}class vs{constructor(G,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{G(this)}).catch(H=>{this.error(H)})}next(G){this.forEachObserver(Y=>{Y.next(G)})}error(G){this.forEachObserver(Y=>{Y.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Y,H){let P;if(void 0===G&&void 0===Y&&void 0===H)throw new Error("Missing Observer.");P=function pt(Z,G){if("object"!=typeof Z||null===Z)return!1;for(const Y of G)if(Y in Z&&"function"==typeof Z[Y])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:Y,complete:H},void 0===P.next&&(P.next=it),void 0===P.error&&(P.error=it),void 0===P.complete&&(P.complete=it);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch(de){}}),this.observers.push(P),B}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,G)}sendOne(G,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Y(this.observers[G])}catch(H){"undefined"!=typeof console&&console.error&&console.error(H)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function it(){}const Si=function(Z,G,Y,H){let P;if(H<G?P="at least "+G:H>Y&&(P=0===Y?"none":"no more than "+Y),P)throw new Error(Z+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+P+".")};function $r(Z,G){return`${Z} failed: ${G} argument `}function Vi(Z,G,Y,H){if((!H||Y)&&"function"!=typeof Y)throw new Error($r(Z,G)+"must be a valid function.")}function Gn(Z,G,Y,H){if((!H||Y)&&("object"!=typeof Y||null===Y))throw new Error($r(Z,G)+"must be a valid context object.")}const gn=function(Z){const G=[];let Y=0;for(let H=0;H<Z.length;H++){let P=Z.charCodeAt(H);if(P>=55296&&P<=56319){const B=P-55296;H++,$(H<Z.length,"Surrogate pair missing trail surrogate."),P=65536+(B<<10)+(Z.charCodeAt(H)-56320)}P<128?G[Y++]=P:P<2048?(G[Y++]=P>>6|192,G[Y++]=63&P|128):P<65536?(G[Y++]=P>>12|224,G[Y++]=P>>6&63|128,G[Y++]=63&P|128):(G[Y++]=P>>18|240,G[Y++]=P>>12&63|128,G[Y++]=P>>6&63|128,G[Y++]=63&P|128)}return G},_t=function(Z){let G=0;for(let Y=0;Y<Z.length;Y++){const H=Z.charCodeAt(Y);H<128?G++:H<2048?G+=2:H>=55296&&H<=56319?(G+=4,Y++):G+=3}return G};function ze(Z,G=1e3,Y=2){const H=G*Math.pow(Y,Z),P=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+P)}function sn(Z){return Z&&Z._delegate?Z._delegate:Z}},6465:(Ke,Ee,O)=>{"use strict";var d=O(5e3);let $=null;function N(){return $}const X=new d.OlP("DocumentToken");let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function pe(){return(0,d.LFG)(q)}()},providedIn:"platform"}),n})();const W=new d.OlP("Location Initialized");let q=(()=>{class n extends ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Be(){return new q((0,d.LFG)(X))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function De(n){const e=(0,d.LFG)(X).location;return new Ge((0,d.LFG)(ee),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new d.OlP("appBaseHref");let Ge=(()=>{class n extends ve{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+$e(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+$e(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee),d.LFG(We,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+$e(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+$e(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee),d.LFG(We,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(se(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Ae,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(d.LFG(ve),d.LFG(ee))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Re((0,d.LFG)(ve),(0,d.LFG)(ee))}()},providedIn:"root"}),n})();function se(n){return n.replace(/\/index.html$/,"")}var re=(()=>((re=re||{})[re.Format=0]="Format",re[re.Standalone=1]="Standalone",re))(),ue=(()=>((ue=ue||{})[ue.Narrow=0]="Narrow",ue[ue.Abbreviated=1]="Abbreviated",ue[ue.Wide=2]="Wide",ue[ue.Short=3]="Short",ue))(),we=(()=>((we=we||{})[we.Short=0]="Short",we[we.Medium=1]="Medium",we[we.Long=2]="Long",we[we.Full=3]="Full",we))(),fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Group=1]="Group",fe[fe.List=2]="List",fe[fe.PercentSign=3]="PercentSign",fe[fe.PlusSign=4]="PlusSign",fe[fe.MinusSign=5]="MinusSign",fe[fe.Exponential=6]="Exponential",fe[fe.SuperscriptingExponent=7]="SuperscriptingExponent",fe[fe.PerMille=8]="PerMille",fe[fe.Infinity=9]="Infinity",fe[fe.NaN=10]="NaN",fe[fe.TimeSeparator=11]="TimeSeparator",fe[fe.CurrencyDecimal=12]="CurrencyDecimal",fe[fe.CurrencyGroup=13]="CurrencyGroup",fe))();function rn(n,e){return bn((0,d.cg1)(n)[d.wAp.DateFormat],e)}function Ht(n,e){return bn((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function Yt(n,e){return bn((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function kn(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(void 0===r){if(e===fe.CurrencyDecimal)return t[d.wAp.NumberSymbols][fe.Decimal];if(e===fe.CurrencyGroup)return t[d.wAp.NumberSymbols][fe.Group]}return r}function $n(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function hn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Sn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gr={},vs=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var zt=(()=>((zt=zt||{})[zt.Short=0]="Short",zt[zt.ShortGMT=1]="ShortGMT",zt[zt.Long=2]="Long",zt[zt.Extended=3]="Extended",zt))(),pt=(()=>((pt=pt||{})[pt.FullYear=0]="FullYear",pt[pt.Month=1]="Month",pt[pt.Date=2]="Date",pt[pt.Hours=3]="Hours",pt[pt.Minutes=4]="Minutes",pt[pt.Seconds=5]="Seconds",pt[pt.FractionalSeconds=6]="FractionalSeconds",pt[pt.Day=7]="Day",pt))(),it=(()=>((it=it||{})[it.DayPeriods=0]="DayPeriods",it[it.Days=1]="Days",it[it.Months=2]="Months",it[it.Eras=3]="Eras",it))();function Si(n,e,t,r){let i=function de(n){if(tt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,l=1]=n.split("-").map(f=>+f);return $r(i,a-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Sn))return function Fe(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,f=Number(n[5]||0)-r,m=Number(n[6]||0),v=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,l,f,m,v),e}(r)}const e=new Date(n);if(!tt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Kt(t,e)||e;let f,l=[];for(;e;){if(f=vs.exec(e),!f){l.push(e);break}{l=l.concat(f.slice(1));const T=l.pop();if(!T)break;e=T}}let m=i.getTimezoneOffset();r&&(m=H(r,m),i=function B(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function P(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(H(e,i)-i))}(i,r,!0));let v="";return l.forEach(T=>{const S=function Y(n){if(G[n])return G[n];let e;switch(n){case"G":case"GG":case"GGG":e=$t(it.Eras,ue.Abbreviated);break;case"GGGG":e=$t(it.Eras,ue.Wide);break;case"GGGGG":e=$t(it.Eras,ue.Narrow);break;case"y":e=_t(pt.FullYear,1,0,!1,!0);break;case"yy":e=_t(pt.FullYear,2,0,!0,!0);break;case"yyy":e=_t(pt.FullYear,3,0,!1,!0);break;case"yyyy":e=_t(pt.FullYear,4,0,!1,!0);break;case"Y":e=Z(1);break;case"YY":e=Z(2,!0);break;case"YYY":e=Z(3);break;case"YYYY":e=Z(4);break;case"M":case"L":e=_t(pt.Month,1,1);break;case"MM":case"LL":e=_t(pt.Month,2,1);break;case"MMM":e=$t(it.Months,ue.Abbreviated);break;case"MMMM":e=$t(it.Months,ue.Wide);break;case"MMMMM":e=$t(it.Months,ue.Narrow);break;case"LLL":e=$t(it.Months,ue.Abbreviated,re.Standalone);break;case"LLLL":e=$t(it.Months,ue.Wide,re.Standalone);break;case"LLLLL":e=$t(it.Months,ue.Narrow,re.Standalone);break;case"w":e=sn(1);break;case"ww":e=sn(2);break;case"W":e=sn(1,!0);break;case"d":e=_t(pt.Date,1);break;case"dd":e=_t(pt.Date,2);break;case"c":case"cc":e=_t(pt.Day,1);break;case"ccc":e=$t(it.Days,ue.Abbreviated,re.Standalone);break;case"cccc":e=$t(it.Days,ue.Wide,re.Standalone);break;case"ccccc":e=$t(it.Days,ue.Narrow,re.Standalone);break;case"cccccc":e=$t(it.Days,ue.Short,re.Standalone);break;case"E":case"EE":case"EEE":e=$t(it.Days,ue.Abbreviated);break;case"EEEE":e=$t(it.Days,ue.Wide);break;case"EEEEE":e=$t(it.Days,ue.Narrow);break;case"EEEEEE":e=$t(it.Days,ue.Short);break;case"a":case"aa":case"aaa":e=$t(it.DayPeriods,ue.Abbreviated);break;case"aaaa":e=$t(it.DayPeriods,ue.Wide);break;case"aaaaa":e=$t(it.DayPeriods,ue.Narrow);break;case"b":case"bb":case"bbb":e=$t(it.DayPeriods,ue.Abbreviated,re.Standalone,!0);break;case"bbbb":e=$t(it.DayPeriods,ue.Wide,re.Standalone,!0);break;case"bbbbb":e=$t(it.DayPeriods,ue.Narrow,re.Standalone,!0);break;case"B":case"BB":case"BBB":e=$t(it.DayPeriods,ue.Abbreviated,re.Format,!0);break;case"BBBB":e=$t(it.DayPeriods,ue.Wide,re.Format,!0);break;case"BBBBB":e=$t(it.DayPeriods,ue.Narrow,re.Format,!0);break;case"h":e=_t(pt.Hours,1,-12);break;case"hh":e=_t(pt.Hours,2,-12);break;case"H":e=_t(pt.Hours,1);break;case"HH":e=_t(pt.Hours,2);break;case"m":e=_t(pt.Minutes,1);break;case"mm":e=_t(pt.Minutes,2);break;case"s":e=_t(pt.Seconds,1);break;case"ss":e=_t(pt.Seconds,2);break;case"S":e=_t(pt.FractionalSeconds,1);break;case"SS":e=_t(pt.FractionalSeconds,2);break;case"SSS":e=_t(pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Xe(zt.Short);break;case"ZZZZZ":e=Xe(zt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Xe(zt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Xe(zt.Long);break;default:return null}return G[n]=e,e}(T);v+=S?S(i,t,m):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function $r(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Kt(n,e){const t=function ft(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(gr[t]=gr[t]||{},gr[t][e])return gr[t][e];let r="";switch(e){case"shortDate":r=rn(n,we.Short);break;case"mediumDate":r=rn(n,we.Medium);break;case"longDate":r=rn(n,we.Long);break;case"fullDate":r=rn(n,we.Full);break;case"shortTime":r=Ht(n,we.Short);break;case"mediumTime":r=Ht(n,we.Medium);break;case"longTime":r=Ht(n,we.Long);break;case"fullTime":r=Ht(n,we.Full);break;case"short":const i=Kt(n,"shortTime"),a=Kt(n,"shortDate");r=Vi(Yt(n,we.Short),[i,a]);break;case"medium":const l=Kt(n,"mediumTime"),f=Kt(n,"mediumDate");r=Vi(Yt(n,we.Medium),[l,f]);break;case"long":const m=Kt(n,"longTime"),v=Kt(n,"longDate");r=Vi(Yt(n,we.Long),[m,v]);break;case"full":const T=Kt(n,"fullTime"),S=Kt(n,"fullDate");r=Vi(Yt(n,we.Full),[T,S])}return r&&(gr[t][e]=r),r}function Vi(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Gn(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.substr(l.length-e)),a+l}function _t(n,e,t=0,r=!1,i=!1){return function(a,l){let f=function ai(n,e){switch(n){case pt.FullYear:return e.getFullYear();case pt.Month:return e.getMonth();case pt.Date:return e.getDate();case pt.Hours:return e.getHours();case pt.Minutes:return e.getMinutes();case pt.Seconds:return e.getSeconds();case pt.FractionalSeconds:return e.getMilliseconds();case pt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||f>-t)&&(f+=t),n===pt.Hours)0===f&&-12===t&&(f=12);else if(n===pt.FractionalSeconds)return function gn(n,e){return Gn(n,3).substr(0,e)}(f,e);const m=kn(l,fe.MinusSign);return Gn(f,e,m,r,i)}}function $t(n,e,t=re.Format,r=!1){return function(i,a){return function ar(n,e,t,r,i,a){switch(t){case it.Months:return function Je(n,e,t){const r=(0,d.cg1)(n),a=bn([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return bn(a,t)}(e,i,r)[n.getMonth()];case it.Days:return function Lt(n,e,t){const r=(0,d.cg1)(n),a=bn([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return bn(a,t)}(e,i,r)[n.getDay()];case it.DayPeriods:const l=n.getHours(),f=n.getMinutes();if(a){const v=function rs(n){const e=(0,d.cg1)(n);return $n(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?hn(r):[hn(r[0]),hn(r[1])])}(e),T=function Et(n,e,t){const r=(0,d.cg1)(n);$n(r);const a=bn([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return bn(a,t)||[]}(e,i,r),S=v.findIndex(k=>{if(Array.isArray(k)){const[U,z]=k,ge=l>=U.hours&&f>=U.minutes,Ie=l<z.hours||l===z.hours&&f<z.minutes;if(U.hours<z.hours){if(ge&&Ie)return!0}else if(ge||Ie)return!0}else if(k.hours===l&&k.minutes===f)return!0;return!1});if(-1!==S)return T[S]}return function nn(n,e,t){const r=(0,d.cg1)(n),a=bn([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return bn(a,t)}(e,i,r)[l<12?0:1];case it.Eras:return function cn(n,e){return bn((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function Xe(n){return function(e,t,r){const i=-1*r,a=kn(t,fe.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case zt.Short:return(i>=0?"+":"")+Gn(l,2,a)+Gn(Math.abs(i%60),2,a);case zt.ShortGMT:return"GMT"+(i>=0?"+":"")+Gn(l,1,a);case zt.Long:return"GMT"+(i>=0?"+":"")+Gn(l,2,a)+":"+Gn(Math.abs(i%60),2,a);case zt.Extended:return 0===r?"Z":(i>=0?"+":"")+Gn(l,2,a)+":"+Gn(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ct(n){return $r(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function sn(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+a)/7)}else{const a=Ct(t),l=function It(n){const e=$r(n,0,1).getDay();return $r(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),f=a.getTime()-l.getTime();i=1+Math.round(f/6048e5)}return Gn(i,n,kn(r,fe.MinusSign))}}function Z(n,e=!1){return function(t,r){return Gn(Ct(t).getFullYear(),n,kn(r,fe.MinusSign),e)}}const G={};function H(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function tt(n){return n instanceof Date&&!isNaN(n.valueOf())}class Qo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ur=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Qo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),zs(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{zs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function zs(n,e){n.context.$implicit=e.item}let lr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function Xc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let td=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split(".");null!=(r=null!=r&&a?`${r}${a}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();const mg=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let od=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var l;if(null==t||""===t||t!=t)return null;try{return Si(t,r,a||this.locale,null!==(l=null!=i?i:this.defaultTimezone)&&void 0!==l?l:void 0)}catch(f){throw function cr(n,e){return new d.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(mg,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0}),n})(),mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const ud="browser";function Ir(n){return n===ud}function qr(n){return"server"===n}let Vu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Bu((0,d.LFG)(X),window)}),n})();class Bu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ts(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=jl(this.window.history)||jl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function jl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs extends class qa extends class ae{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){$||($=n)}(new Qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ju(){return _n=_n||document.querySelector("base"),_n?_n.getAttribute("href"):null}();return null==t?null:function _o(n){Wa=Wa||document.createElement("a"),Wa.setAttribute("href",n);const e=Wa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_n=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function zo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Wa,_n=null;const Tr=new d.OlP("TRANSITION_ID"),Wn=[{provide:d.ip1,useFactory:function Hu(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Tr,X,d.zs3],multi:!0}];class Ds{static init(){(0,d.VLi)(new Ds)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ta=new d.OlP("EventManagerPlugins");let ss=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ta),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class $l{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let li=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Js=(()=>{class n extends li{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Xs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Xs))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Xs(n){N().remove(n)}const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Za=/%COMP%/g;function Me(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Me(n,i,t):(i=i.replace(Za,n),t.push(i))}return t}function Gt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new eo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ql(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Wl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Me(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ss),d.LFG(Js),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class eo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=bt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=bt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Gt(r)):this.eventManager.addEventListener(e,t,Gt(r))}}class ql extends eo{constructor(e,t,r,i){super(e),this.component=r;const a=Me(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ya(n){return"_ngcontent-%COMP%".replace(Za,n)}(i+"-"+r.id),this.hostAttr=function ef(n){return"_nghost-%COMP%".replace(Za,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wl extends eo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Me(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fd=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const pd=["alt","control","meta","shift"],na={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_r={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zl=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(pd.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static getEventFullKey(t){let r="",i=function os(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_r.hasOwnProperty(e)&&(e=_r[e]))}return na[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),pd.forEach(a=>{a!=i&&Hi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const md=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:ud},{provide:d.g9A,useValue:function Ss(){Qs.makeCurrent(),Ds.init()},multi:!0},{provide:X,useFactory:function gd(){return(0,d.RDi)(document),document},deps:[]}]),yo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function eu(){return new d.qLn},deps:[]},{provide:ta,useClass:fd,multi:!0,deps:[X,d.R0b,d.Lbi]},{provide:ta,useClass:Zl,multi:!0,deps:[X]},{provide:Zn,useClass:Zn,deps:[ss,Js,d.AFp]},{provide:d.FYo,useExisting:Zn},{provide:li,useExisting:Js},{provide:Js,useClass:Js,deps:[X]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:ss,useClass:ss,deps:[ta,d.R0b]},{provide:class Cn{},useClass:Dr,deps:[]}];let zl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Tr,useExisting:d.AFp},Wn]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:yo,imports:[mo,d.hGG]}),n})();"undefined"!=typeof window&&window;var An=O(8996),ou=O(3269);function rt(...n){const e=(0,ou.yG)(n);return(0,An.D)(n,e)}var $i=O(7579);class Wr extends $i.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var yr=O(8306);const{isArray:Ql}=Array,{getPrototypeOf:sa,prototype:oa,keys:zn}=Object;function Co(n){if(1===n.length){const e=n[0];if(Ql(e))return{args:e,keys:null};if(function Io(n){return n&&"object"==typeof n&&sa(n)===oa}(e)){const t=zn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var us=O(4671),gt=O(4004);const{isArray:Ed}=Array;function qu(n){return(0,gt.U)(e=>function bd(n,e){return Ed(e)?n(...e):n(e)}(n,e))}function Wu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var wn=O(5403),aa=O(9672);function au(n,e,t){n?(0,aa.f)(t,n,e):e()}var Or=O(576);function Do(n,e){const t=(0,Or.m)(n)?n:()=>n,r=i=>i.error(t());return new yr.y(e?i=>e.schedule(r,0,i):r)}const uu=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ms=O(8189);function la(...n){return function Zu(){return(0,Ms.J)(1)}()((0,An.D)(n,(0,ou.yG)(n)))}var Gi=O(8421);function So(n){return new yr.y(e=>{(0,Gi.Xf)(n()).subscribe(e)})}var ls=O(515),Jl=O(727),Un=O(4482);function Ao(){return(0,Un.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ci extends yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jl.w0.EMPTY)}return e}refCount(){return Ao()(this)}}function xn(n,e){return(0,Un.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,wn.x)(r,m=>{null==i||i.unsubscribe();let v=0;const T=a++;(0,Gi.Xf)(n(m,T)).subscribe(i=(0,wn.x)(r,S=>r.next(e?e(m,S,T,v++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Zr(n){return n<=0?()=>ls.E:(0,Un.e)((e,t)=>{let r=0;e.subscribe((0,wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function di(...n){const e=(0,ou.yG)(n);return(0,Un.e)((t,r)=>{(e?la(n,t,e):la(n,t)).subscribe(r)})}function xo(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,wn.x)(l,T=>{const S=v++;m=f?n(m,T,S):(f=!0,T),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function hi(n,e){return(0,Un.e)(xo(n,e,arguments.length>=2,!0))}function En(n,e){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,wn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Mi(n){return(0,Un.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,wn.x)(t,void 0,void 0,l=>{a=(0,Gi.Xf)(n(l,Mi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Vn=O(5577);function zu(n,e){return(0,Or.m)(e)?(0,Vn.z)(n,e,1):(0,Vn.z)(n,1)}function lu(n){return n<=0?()=>ls.E:(0,Un.e)((e,t)=>{let r=[];e.subscribe((0,wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Kn(n=uf){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uf(){return new uu}function lf(n){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function cu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?En((i,a)=>n(i,a,r)):us.y,Zr(1),t?lf(e):Kn(()=>new uu))}var fi=O(8505);class Ro{constructor(e,t){this.id=e,this.url=t}}class ca extends Ro{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class da extends Ro{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dr extends Ro{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ha extends Ro{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fa extends Ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Id extends Ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cf extends Ro{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ri extends Ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends Ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class du{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pa{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Td{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ku{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class df{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class Yu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bn(n){return new Yu(n)}const ko="ngNavigationCancelingError";function cs(n){const e=Error("NavigationCancelingError: "+n);return e[ko]=!0,e}function ga(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function qi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!hf(n[i],e[i]))return!1;return!0}function hf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function ec(n){return Array.prototype.concat.apply([],n)}function Qu(n){return n.length>0?n[n.length-1]:null}function yn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ii(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,An.D)(Promise.resolve(n)):rt(n)}const No={exact:function tc(n,e,t){if(!j(n.segments,e.segments)||!to(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!tc(n.children[r],e.children[r],t))return!1;return!0},subset:fu},ki={exact:function Oo(n,e){return qi(n,e)},subset:function pf(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hf(n[t],e[t]))},ignored:()=>!0};function Po(n,e,t){return No[t.paths](n.root,e.root,t.matrixParams)&&ki[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fu(n,e,t){return Sd(n,e,e.segments,t)}function Sd(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!j(i,t)||e.hasChildren()||!to(i,t,r))}if(n.segments.length===t.length){if(!j(n.segments,t)||!to(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fu(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(j(n.segments,i)&&to(n.segments,i,r)&&n.children[qt])&&Sd(n.children[qt],e,a,r)}}function to(n,e,t){return e.every((r,i)=>ki[t](n[i].parameters,r.parameters))}class ks{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bn(this.queryParams)),this._queryParamMap}toString(){return Ze.serialize(this)}}class C{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yt(this)}}class D{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bn(this.parameters)),this._parameterMap}toString(){return ds(this)}}function j(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class le{}class Ne{parse(e){const t=new Tg(e);return new ks(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Tt(e.root,!0)}`,r=function pu(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${mt(t)}=${mt(i)}`).join("&"):`${mt(t)}=${mt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function tr(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ze=new Ne;function yt(n){return n.segments.map(e=>ds(e)).join("/")}function Tt(n,e){if(!n.hasChildren())return yt(n);if(e){const t=n.children[qt]?Tt(n.children[qt],!1):"",r=[];return yn(n.children,(i,a)=>{a!==qt&&r.push(`${a}:${Tt(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function J(n,e){let t=[];return yn(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),yn(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[Tt(n.children[qt],!1)]:[`${i}:${Tt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${yt(n)}/${t[0]}`:`${yt(n)}/(${t.join("//")})`}}function kt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mt(n){return kt(n).replace(/%3B/gi,";")}function Fr(n){return kt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ns(n){return decodeURIComponent(n)}function Ps(n){return Ns(n.replace(/\+/g,"%20"))}function ds(n){return`${Fr(n.path)}${function nc(n){return Object.keys(n).map(e=>`;${Fr(e)}=${Fr(n[e])}`).join("")}(n.parameters)}`}const gu=/^[^\/()?;=#]+/;function zr(n){const e=n.match(gu);return e?e[0]:""}const hs=/^[^=?&#]+/,uE=/^[^&#]+/;class Tg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new C([],{}):new C([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new C(e,t)),r}parseSegment(){const e=zr(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new D(Ns(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zr(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zr(this.remaining);i&&(r=i,this.capture(r))}e[Ns(t)]=Ns(r)}parseQueryParam(e){const t=function Ju(n){const e=n.match(hs);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Ig(n){const e=n.match(uE);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ps(t),a=Ps(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zr(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=qt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[qt]:new C([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ny{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xu(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gf(e,this._root).map(t=>t.value)}}function Xu(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xu(n,t);if(r)return r}return null}function gf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gf(n,t);if(r.length)return r.unshift(e),r}return[]}class Fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Lo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ad extends ny{constructor(e,t){super(e),this.snapshot=t,xd(this,e)}toString(){return this.snapshot.toString()}}function mu(n,e){const t=function ry(n,e){const l=new nl([],{},{},"",{},qt,e,null,n.root,-1,{});return new mf("",new Fo(l,[]))}(n,e),r=new Wr([new D("",{})]),i=new Wr({}),a=new Wr({}),l=new Wr({}),f=new Wr(""),m=new el(r,i,l,f,a,qt,e,t.root);return m.snapshot=t.root,new Ad(new Fo(m,[]),t)}class el{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Bn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Bn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function tl(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class nl{constructor(e,t,r,i,a,l,f,m,v,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mf extends ny{constructor(e,t){super(t),this.url=e,xd(this,t)}toString(){return _f(this._root)}}function xd(n,e){e.value._routerState=n,e.children.forEach(t=>xd(n,t))}function _f(n){const e=n.children.length>0?` { ${n.children.map(_f).join(", ")} } `:"";return`${n.value}${e}`}function Rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qi(e.params,t.params)||n.params.next(t.params),function Xl(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Md(n,e){const t=qi(n.params,e.params)&&function M(n,e){return j(n,e)&&n.every((t,r)=>qi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Md(n.parent,e.parent))}function rc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function oy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rc(n,r,i);return rc(n,r)})}(n,e,t);return new Fo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>rc(n,f)),l}}const r=function ay(n){return new el(new Wr(n.url),new Wr(n.params),new Wr(n.queryParams),new Wr(n.fragment),new Wr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>rc(n,a));return new Fo(r,i)}}function ma(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _u(n){return"object"==typeof n&&null!=n&&n.outlets}function Dg(n,e,t,r,i){let a={};if(r&&yn(r,(f,m)=>{a[m]=Array.isArray(f)?f.map(v=>`${v}`):`${f}`}),n===e)return new ks(t,a,i);const l=Sg(n,e,t);return new ks(l,a,i)}function Sg(n,e,t){const r={};return yn(n.children,(i,a)=>{r[a]=i===e?t:Sg(i,e,t)}),new C(n.segments,r)}class uy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ma(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(_u);if(i&&i!==Qu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Mg(n,e,t){if(n||(n=new C([],{})),0===n.segments.length&&n.hasChildren())return kd(n,e,t);const r=function lE(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(_u(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!ro(m,v,l))return a;r+=2}else{if(!ro(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new C(n.segments.slice(0,r.pathIndex),{});return a.children[qt]=new C(n.segments.slice(r.pathIndex),n.children),kd(a,0,i)}return r.match&&0===i.length?new C(n.segments,{}):r.match&&!n.hasChildren()?vf(n,e,t):r.match?kd(n,0,i):vf(n,e,t)}function kd(n,e,t){if(0===t.length)return new C(n.segments,{});{const r=function ly(n){return _u(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return yn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Mg(n.children[l],e,a))}),yn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new C(n.segments,i)}}function vf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(_u(a)){const m=ic(a.outlets);return new C(r,m)}if(0===i&&ma(t[0])){r.push(new D(n.segments[e].path,wf(t[0]))),i++;continue}const l=_u(a)?a.outlets[qt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&ma(f)?(r.push(new D(l,wf(f))),i+=2):(r.push(new D(l,{})),i++)}return new C(r,{})}function ic(n){const e={};return yn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=vf(new C([],{}),0,t))}),e}function wf(n){const e={};return yn(n,(t,r)=>e[r]=`${t}`),e}function ro(n,e,t){return n==t.path&&qi(e,t.parameters)}class g{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Lo(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),yn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Lo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Lo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Lo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ku(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Td(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Rd(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),Rd(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=function _(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class b{constructor(e,t){this.routes=e,this.module=t}}function x(n){return"function"==typeof n}function te(n){return n instanceof ks}const Rn=Symbol("INITIAL_VALUE");function gi(){return xn(n=>function To(...n){const e=(0,ou.yG)(n),t=(0,ou.jO)(n),{args:r,keys:i}=Co(n);if(0===r.length)return(0,An.D)([],e);const a=new yr.y(function Rs(n,e,t=us.y){return r=>{au(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)au(e,()=>{const v=(0,An.D)(n[m],e);let T=!1;v.subscribe((0,wn.x)(r,S=>{a[m]=S,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Wu(i,l):us.y));return t?a.pipe(qu(t)):a}(n.map(e=>e.pipe(Zr(1),di(Rn)))).pipe(hi((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==Rn?i:(a===Rn&&(r=!0),r||!1!==a&&l!==t.length-1&&!te(a)?i:a),e)},Rn),En(e=>e!==Rn),(0,gt.U)(e=>te(e)?e:!0===e),Zr(1)))}class _a{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ya,this.attachRef=null}}class ya{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new _a,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Nd=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=a||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new Ef(t,f,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ya),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ef{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===el?this.route:e===ya?this.childContexts:this.parent.get(e,t)}}let Pd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Nd],encapsulation:2}),n})();function rl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];bf(r,Od(e,r))}}function bf(n,e){n.children&&rl(n.children,e)}function Od(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Fd(n){const e=n.children&&n.children.map(Fd),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=Pd),t}function an(n){return n.outlet||qt}function Cf(n,e){const t=n.filter(r=>an(r)===e);return t.push(...n.filter(r=>an(r)!==e)),t}const kg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function va(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},kg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||ga)(t,n,e);if(!a)return Object.assign({},kg);const l={};yn(a.posParams,(m,v)=>{l[v]=m.path});const f=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function sc(n,e,t,r,i="corrected"){if(t.length>0&&function iD(n,e,t){return t.some(r=>Ng(n,e,r)&&an(r)!==qt)}(n,t,r)){const l=new C(e,function rD(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&an(a)!==qt){const l=new C([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[an(a)]=l}return i}(n,e,r,new C(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function sD(n,e,t){return t.some(r=>Ng(n,e,r))}(n,t,r)){const l=new C(n.segments,function nD(n,e,t,r,i,a){const l={};for(const f of r)if(Ng(n,t,f)&&!i[an(f)]){const m=new C([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[an(f)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new C(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ng(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function oD(n,e,t,r){return!!(an(n)===r||r!==qt&&Ng(e,t,n))&&("**"===n.path||va(e,n,t).matched)}function aD(n,e,t){return 0===e.length&&!n.children[t]}class il{constructor(e){this.segmentGroup=e||null}}class Ni{constructor(e){this.urlTree=e}}function oc(n){return Do(new il(n))}function cy(n){return Do(new Ni(n))}class dy{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=sc(this.urlTree.root,[],[],this.config).segmentGroup,t=new C(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,qt).pipe((0,gt.U)(a=>this.createUrlTree(hy(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Mi(a=>{if(a instanceof Ni)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof il?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qt).pipe((0,gt.U)(i=>this.createUrlTree(hy(i),e.queryParams,e.fragment))).pipe(Mi(i=>{throw i instanceof il?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new C([],{[qt]:e}):e;return new ks(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(a=>new C([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,An.D)(i).pipe(zu(a=>{const l=r.children[a],f=Cf(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,gt.U)(m=>({segment:m,outlet:a})))}),hi((a,l)=>(a[l.outlet]=l.segment,a),{}),function Cd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?En((i,a)=>n(i,a,r)):us.y,lu(1),t?lf(e):Kn(()=>new uu))}())}expandSegment(e,t,r,i,a,l){return(0,An.D)(r).pipe(zu(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Mi(v=>{if(v instanceof il)return rt(null);throw v}))),cu(f=>!!f),Mi((f,m)=>{if(f instanceof uu||"EmptyError"===f.name)return aD(t,i,a)?rt(new C([],{})):oc(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return oD(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):oc(t):oc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cy(a):this.lineralizeSegments(r,a).pipe((0,Vn.z)(l=>{const f=new C(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:T}=va(t,i,a);if(!f)return oc(t);const S=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?cy(S):this.lineralizeSegments(i,S).pipe((0,Vn.z)(k=>this.expandSegment(e,t,r,k.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?rt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,gt.U)(S=>(r._loadedConfig=S,new C(i,{})))):rt(new C(i,{}));const{matched:l,consumedSegments:f,remainingSegments:m}=va(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,Vn.z)(T=>{const S=T.module,k=T.routes,{segmentGroup:U,slicedSegments:z}=sc(t,f,m,k),ge=new C(U.segments,U.children);if(0===z.length&&ge.hasChildren())return this.expandChildren(S,k,ge).pipe((0,gt.U)(ct=>new C(f,ct)));if(0===k.length&&0===z.length)return rt(new C(f,{}));const Ie=an(r)===a;return this.expandSegment(S,ge,k,z,Ie?qt:a,!0).pipe((0,gt.U)(ht=>new C(f.concat(ht.segments),ht.children)))})):oc(t)}getChildConfig(e,t,r){return t.children?rt(new b(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?rt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Vn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,gt.U)(a=>(t._loadedConfig=a,a))):function Pi(n){return Do(cs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):rt(new b([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?rt(i.map(l=>{const f=e.get(l);let m;if(function xe(n){return n&&x(n.canLoad)}(f))m=f.canLoad(t,r);else{if(!x(f))throw new Error("Invalid CanLoad guard");m=f(t,r)}return ii(m)})).pipe(gi(),(0,fi.b)(l=>{if(!te(l))return;const f=cs(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw f.url=l,f}),(0,gt.U)(l=>!0===l)):rt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[qt])return Do(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ks(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return yn(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new C(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function hy(n){const e={};for(const r of Object.keys(n.children)){const a=hy(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function uD(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new C(n.segments.concat(e.segments),e.children)}return n}(new C(n.segments,e))}class hE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Tf{constructor(e,t){this.component=e,this.route=t}}function lD(n,e,t){const r=n._root;return ac(r,e?e._root:null,t,[r.value])}function Pg(n,e,t){const r=function cD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ac(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Lo(e);return n.children.forEach(l=>{(function dD(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function hD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!j(n.url,e.url);case"pathParamsOrQueryParamsChange":return!j(n.url,e.url)||!qi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Md(n,e)||!qi(n.queryParams,e.queryParams);default:return!Md(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new hE(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ac(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Tf(f.outlet.component,l))}else l&&uc(e,f,i),i.canActivateChecks.push(new hE(r)),ac(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),yn(a,(l,f)=>uc(l,t.getContext(f),i)),i}function uc(n,e,t){const r=Lo(n),i=n.value;yn(r,(a,l)=>{uc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Tf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class pE{}function gE(n){return new yr.y(e=>e.error(n))}class ED{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=sc(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,qt);if(null===t)return null;const r=new nl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Fo(r,t),a=new mf(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=iy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],f=Cf(e,a),m=this.processSegmentGroup(f,l,a);if(null===m)return null;r.push(...m)}const i=mE(r);return function bD(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return aD(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!oD(e,t,r,i))return null;let a,l=[],f=[];if("**"===e.path){const U=r.length>0?Qu(r).parameters:{};a=new nl(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TD(e),an(e),e.component,e,lc(t),Uo(t)+r.length,DD(e))}else{const U=va(t,e,r);if(!U.matched)return null;l=U.consumedSegments,f=U.remainingSegments,a=new nl(l,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TD(e),an(e),e.component,e,lc(t),Uo(t)+l.length,DD(e))}const m=function CD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:T}=sc(t,l,f,m.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===T.length&&v.hasChildren()){const U=this.processChildren(m,v);return null===U?null:[new Fo(a,U)]}if(0===m.length&&0===T.length)return[new Fo(a,[])];const S=an(e)===i,k=this.processSegment(m,v,T,S?qt:i);return null===k?null:[new Fo(a,k)]}}function ID(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function mE(n){const e=[],t=new Set;for(const r of n){if(!ID(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=mE(r.children);e.push(new Fo(r.value,i))}return e.filter(r=>!t.has(r))}function lc(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Uo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function TD(n){return n.data||{}}function DD(n){return n.resolve||{}}function Fg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Lg(n){return xn(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,gt.U)(()=>e)):rt(e)})}class vE extends class yE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Sf=new d.OlP("ROUTES");class Ug{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,gt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new b(ec(l.injector.get(Sf,void 0,d.XFs.Self|d.XFs.Optional)).map(Fd),l)}),Mi(a=>{throw t._loader$=void 0,a}));return t._loader$=new ci(i,()=>new $i.x).pipe(Ao()),t._loader$}loadModuleFactory(e){return ii(e()).pipe((0,Vn.z)(t=>t instanceof d.YKP?rt(t):(0,An.D)(this.compiler.compileModuleAsync(t))))}}class hR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ld(n){throw n}function py(n,e,t){return e.parse("/")}function gy(n,e){return rt(null)}const AD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},my={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mi=(()=>{class n{constructor(t,r,i,a,l,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $i.x,this.errorHandler=Ld,this.malformedUriErrorHandler=py,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gy,afterPreactivation:gy},this.urlHandlingStrategy=new hR,this.routeReuseStrategy=new vE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const S=l.get(d.R0b);this.isNgZoneEnabled=S instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Cg(){return new ks(new C([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ug(l,f,k=>this.triggerEvent(new du(k)),k=>this.triggerEvent(new hu(k))),this.routerState=mu(this.currentUrlTree,this.rootComponentType),this.transitions=new Wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(En(i=>0!==i.id),(0,gt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),xn(i=>{let a=!1,l=!1;return rt(i).pipe((0,fi.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xn(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return EE(f.source)&&(this.browserUrlTree=f.extractedUrl),rt(f).pipe(xn(S=>{const k=this.transitions.getValue();return r.next(new ca(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?ls.E:Promise.resolve(S)}),function dE(n,e,t,r){return xn(i=>function If(n,e,t,r,i){return new dy(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fi.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function _E(n,e,t,r,i){return(0,Vn.z)(a=>function wD(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new ED(n,e,t,r,i,a).recognize();return null===l?gE(new pE):rt(l)}catch(l){return gE(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,gt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fi.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new fa(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:U,source:z,restoredState:ge,extras:Ie}=f,lt=new ca(k,this.serializeUrl(U),z,ge);r.next(lt);const ht=mu(U,this.rootComponentType).snapshot;return rt(Object.assign(Object.assign({},f),{targetSnapshot:ht,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),ls.E}),Lg(f=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:U}}=f;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!U})}),(0,fi.b)(f=>{const m=new Id(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,gt.U)(f=>Object.assign(Object.assign({},f),{guards:lD(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function fD(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?rt(Object.assign(Object.assign({},t),{guardsResult:!0})):function pD(n,e,t,r){return(0,An.D)(n).pipe((0,Vn.z)(i=>function vD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?rt(a.map(f=>{const m=Pg(f,e,i);let v;if(function Wt(n){return n&&x(n.canDeactivate)}(m))v=ii(m.canDeactivate(n,e,t,r));else{if(!x(m))throw new Error("Invalid CanDeactivate guard");v=ii(m(n,e,t,r))}return v.pipe(cu())})).pipe(gi()):rt(!0)}(i.component,i.route,t,e,r)),cu(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Vn.z)(f=>f&&function F(n){return"boolean"==typeof n}(f)?function Og(n,e,t,r){return(0,An.D)(e).pipe(zu(i=>la(function mD(n,e){return null!==n&&e&&e(new pa(n)),rt(!0)}(i.route.parent,r),function gD(n,e){return null!==n&&e&&e(new Mo(n)),rt(!0)}(i.route,r),function yD(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function fE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>So(()=>rt(l.guards.map(m=>{const v=Pg(m,l.node,t);let T;if(function vt(n){return n&&x(n.canActivateChild)}(v))T=ii(v.canActivateChild(r,n));else{if(!x(v))throw new Error("Invalid CanActivateChild guard");T=ii(v(r,n))}return T.pipe(cu())})).pipe(gi())));return rt(a).pipe(gi())}(n,i.path,t),function _D(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(a=>So(()=>{const l=Pg(a,e,t);let f;if(function nt(n){return n&&x(n.canActivate)}(l))f=ii(l.canActivate(e,n));else{if(!x(l))throw new Error("Invalid CanActivate guard");f=ii(l(e,n))}return f.pipe(cu())}));return rt(i).pipe(gi())}(n,i.route,t))),cu(i=>!0!==i,!0))}(r,a,n,e):rt(f)),(0,gt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,fi.b)(f=>{if(te(f.guardsResult)){const v=cs(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw v.url=f.guardsResult,v}const m=new cf(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),En(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Lg(f=>{if(f.guards.canActivateChecks.length)return rt(f).pipe((0,fi.b)(m=>{const v=new ri(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),xn(m=>{let v=!1;return rt(m).pipe(function dR(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let a=0;return(0,An.D)(i).pipe(zu(l=>function wa(n,e,t,r){return function fy(n,e,t,r){const i=Fg(n);if(0===i.length)return rt({});const a={};return(0,An.D)(i).pipe((0,Vn.z)(l=>function SD(n,e,t,r){const i=Pg(n,e,r);return ii(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,fi.b)(f=>{a[l]=f}))),lu(1),(0,Vn.z)(()=>Fg(a).length===i.length?rt(a):ls.E))}(n._resolve,n,e,r).pipe((0,gt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),iy(n,t).resolve),null)))}(l.route,r,n,e)),(0,fi.b)(()=>a++),lu(1),(0,Vn.z)(l=>a===i.length?rt(t):ls.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fi.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,fi.b)(m=>{const v=new pi(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),Lg(f=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:U}}=f;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!U})}),(0,gt.U)(f=>{const m=function sy(n,e,t){const r=rc(n,e._root,t?t._root:void 0);return new Ad(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,fi.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new g(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,fi.b)({next(){a=!0},complete(){a=!0}}),function ty(n){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Mi(f=>{if(l=!0,function Dd(n){return n&&n[ko]}(f)){const m=te(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new dr(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(v),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||EE(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new ha(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return ls.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){rl(t),this.config=t.map(Fd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,T=m?this.currentUrlTree.fragment:l;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function no(n,e,t,r,i){if(0===t.length)return Dg(e.root,e.root,e.root,r,i);const a=function Ag(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return yn(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new uy(t,e,r)}(t);if(a.toRoot())return Dg(e.root,e.root,new C([],{}),r,i);const l=function yf(n,e,t){if(n.isAbsolute)return new xg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new xg(a,a===e.root,0)}const r=ma(n.commands[0])?0:1;return function Rg(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new xg(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=l.processChildren?kd(l.segmentGroup,l.index,a.commands):Mg(l.segmentGroup,l.index,a.commands);return Dg(e.root,l.segmentGroup,f,r,i)}(v,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=te(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function xD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},AD):!1===r?Object.assign({},my):r,te(t))return Po(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Po(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new da(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var f,m;if(this.disposed)return Promise.resolve(!1);let v,T,S;l?(v=l.resolve,T=l.reject,S=l.promise):S=new Promise((z,ge)=>{v=z,T=ge});const k=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):U=0,this.setTransition({id:k,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:T,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new dr(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function EE(n){return"imperative"!==n}let Af=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new $i.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ud(this.skipLocationChange),replaceUrl:Ud(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ud(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mi),d.Y36(el),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),xf=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new $i.x,this.subscription=t.events.subscribe(a=>{a instanceof da&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:Ud(this.skipLocationChange),replaceUrl:Ud(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ud(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mi),d.Y36(el),d.Y36(ve))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Ud(n){return""===n||!!n}class yy{}class CE{preload(e,t){return rt(null)}}let IE=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Ug(i,r,m=>t.triggerEvent(new du(m)),m=>t.triggerEvent(new hu(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(En(t=>t instanceof da),zu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,An.D)(i).pipe((0,Ms.J)(),(0,gt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?rt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Vn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mi),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(yy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Vg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ca?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof da&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof df&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new df(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Os=new d.OlP("ROUTER_CONFIGURATION"),wy=new d.OlP("ROUTER_FORROOT_GUARD"),TE=[Re,{provide:le,useClass:Ne},{provide:mi,useFactory:function by(n,e,t,r,i,a,l={},f,m){const v=new mi(null,n,e,t,r,i,ec(a));return f&&(v.urlHandlingStrategy=f),m&&(v.routeReuseStrategy=m),function AE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(T=>{var S,k;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(k=console.groupEnd)||void 0===k||k.call(console)}),v},deps:[le,ya,Re,d.zs3,d.Sil,Sf,Os,[class wE{},new d.FiY],[class Df{},new d.FiY]]},ya,{provide:el,useFactory:function Bg(n){return n.routerState.root},deps:[mi]},IE,CE,class vy{preload(e,t){return t().pipe(Mi(()=>rt(null)))}},{provide:Os,useValue:{enableTracing:!1}}];function MD(){return new d.PXZ("Router",mi)}let Rf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[TE,Ey(t),{provide:wy,useFactory:SE,deps:[[mi,new d.FiY,new d.tp0]]},{provide:Os,useValue:r||{}},{provide:ve,useFactory:DE,deps:[ee,[new d.tBr(We),new d.FiY],Os]},{provide:Vg,useFactory:kD,deps:[mi,Vu,Os]},{provide:yy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:CE},{provide:d.PXZ,multi:!0,useFactory:MD},[Vd,{provide:d.ip1,multi:!0,useFactory:xE,deps:[Vd]},{provide:Iy,useFactory:Cy,deps:[Vd]},{provide:d.tb,multi:!0,useExisting:Iy}]]}}static forChild(t){return{ngModule:n,providers:[Ey(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wy,8),d.LFG(mi,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function kD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Vg(n,e,t)}function DE(n,e,t={}){return t.useHash?new Pe(n,e):new Ge(n,e)}function SE(n){return"guarded"}function Ey(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:Sf,multi:!0,useValue:n}]}let Vd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $i.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(mi),l=this.injector.get(Os);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?rt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Os),i=this.injector.get(IE),a=this.injector.get(Vg),l=this.injector.get(mi),f=this.injector.get(d.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function xE(n){return n.appInitializer.bind(n)}function Cy(n){return n.bootstrapListener.bind(n)}const Iy=new d.OlP("Router Initializer");var ND=O(8247),L=O(2090),Wi=O(9681),Vo=O(1877),io=O(4859),cc=O(4986),pn=O(5813);function RE(){return(0,Un.e)((n,e)=>{let t,r=!1;n.subscribe((0,wn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Dy(n,e=us.y){return n=null!=n?n:PD,(0,Un.e)((t,r)=>{let i,a=!0;t.subscribe((0,wn.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function PD(n,e){return n===e}var wt,Lr=O(2011),Sy=(O(5881),O(3942)),_e=O(5861),OD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ea={},Ay=Ay||{},Ot=OD||self;function Hg(){}function Mf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var xy="closure_uid_"+(1e9*Math.random()>>>0),Vt=0;function ME(n,e,t){return n.call.apply(n.bind,arguments)}function kE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function _i(n,e,t){return(_i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ME:kE).apply(null,arguments)}function dc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function yu(){this.s=this.s,this.o=this.o}yu.prototype.s=!1,yu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function FD(n){Object.prototype.hasOwnProperty.call(n,xy)&&n[xy]||(n[xy]=++Vt)}(this)},yu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $g=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Bo(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Mf(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function yi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yi.prototype.h=function(){this.defaultPrevented=!0};var Ry=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",Hg,e),Ot.removeEventListener("test",Hg,e)}catch(t){}return n}();function My(n){return/^[\s\xa0]*$/.test(n)}var ky=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function NE(n,e){return n<e?-1:n>e?1:0}function hc(){var n=Ot.navigator;return n&&(n=n.userAgent)?n:""}function Fs(n){return-1!=hc().indexOf(n)}function Nf(n){return Nf[" "](n),n}Nf[" "]=Hg;var Ly,n,Py=Fs("Opera"),Pf=Fs("Trident")||Fs("MSIE"),PE=Fs("Edge"),Oy=PE||Pf,OE=Fs("Gecko")&&!(-1!=hc().toLowerCase().indexOf("webkit")&&!Fs("Edge"))&&!(Fs("Trident")||Fs("MSIE"))&&!Fs("Edge"),UD=-1!=hc().toLowerCase().indexOf("webkit")&&!Fs("Edge");function Fy(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Uy="",FE=(n=hc(),OE?/rv:([^\);]+)(\)|;)/.exec(n):PE?/Edge\/([\d\.]+)/.exec(n):Pf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UD?/WebKit\/(\S+)/.exec(n):Py?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(FE&&(Uy=FE?FE[1]:""),Pf){var qg=Fy();if(null!=qg&&qg>parseFloat(Uy)){Ly=String(qg);break e}}Ly=Uy}var LE={};var pR=Ot.document&&Pf&&(Fy()||parseInt(Ly,10))||void 0;function Wg(n,e){if(yi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(OE){e:{try{Nf(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wg.X.h.call(this)}}Pn(Wg,yi);var gR={2:"touch",3:"pen",4:"mouse"};Wg.prototype.h=function(){Wg.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zg="closure_listenable_"+(1e6*Math.random()|0),mR=0;function _R(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++mR,this.ba=this.ea=!1}function Vy(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function UE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function jD(n){const e={};for(const t in n)e[t]=n[t];return e}const vu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zg(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<vu.length;a++)t=vu[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Kg(n){this.src=n,this.g={},this.h=0}function Yg(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=$g(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Vy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ff(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Kg.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ff(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new _R(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Qg="closure_lm_"+(1e6*Math.random()|0),Lf={};function VE(n,e,t,r,i){if(r&&r.once)return jE(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)VE(n,e[a],t,r,i);return null}return t=sl(t),n&&n[Zg]?n.N(e,t,kf(r)?!!r.capture:!!r,i):wu(n,e,t,!1,r,i)}function wu(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=kf(i)?!!i.capture:!!i,f=Hy(n);if(f||(n[Qg]=f=new Kg(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function BE(){const e=HD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ry||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(jy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jE(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)jE(n,e[a],t,r,i);return null}return t=sl(t),n&&n[Zg]?n.O(e,t,kf(r)?!!r.capture:!!r,i):wu(n,e,t,!0,r,i)}function Jg(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Jg(n,e[a],t,r,i);else r=kf(r)?!!r.capture:!!r,t=sl(t),n&&n[Zg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ff(a=n.g[e],t,r,i))&&(Vy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Hy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ff(e,t,r,i)),(t=-1<n?e[n]:null)&&By(t))}function By(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Zg])Yg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hy(e))?(Yg(t,n),0==t.h&&(t.src=null,e[Qg]=null)):Vy(n)}}}function jy(n){return n in Lf?Lf[n]:Lf[n]="on"+n}function HD(n,e){if(n.ba)n=!0;else{e=new Wg(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&By(n),n=t.call(r,e)}return n}function Hy(n){return(n=n[Qg])instanceof Kg?n:null}var fc="__closure_events_fn_"+(1e9*Math.random()>>>0);function sl(n){return"function"==typeof n?n:(n[fc]||(n[fc]=function(e){return n.handleEvent(e)}),n[fc])}function Ur(){yu.call(this),this.i=new Kg(this),this.P=this,this.I=null}function vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new yi(e,n);else if(e instanceof yi)e.target=e.target||n;else{var i=e;zg(e=new yi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=ol(l,r,!0,e)&&i}if(i=ol(l=e.g=n,r,!0,e)&&i,i=ol(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ol(l=e.g=t[a],r,!1,e)&&i}function ol(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,m=l.ha||l.src;l.ea&&Yg(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Pn(Ur,yu),Ur.prototype[Zg]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){Jg(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Vy(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var al=Ot.JSON.stringify;function $D(){var n=qD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Bd,$y=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Gy,n=>n.reset());class Gy{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qy(n){Ot.setTimeout(()=>{throw n},0)}function Wy(n,e){Bd||function GD(){var n=Ot.Promise.resolve(void 0);Bd=function(){n.then($E)}}(),Xg||(Bd(),Xg=!0),qD.add(n,e)}var Xg=!1,qD=new class HE{constructor(){this.h=this.g=null}add(e,t){const r=$y.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function $E(){for(var n;n=$D();){try{n.h.call(n.g)}catch(t){qy(t)}var e=$y;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Xg=!1}function Uf(n,e){Ur.call(this),this.h=n||1,this.g=e||Ot,this.j=_i(this.lb,this),this.l=Date.now()}function Zy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function em(n,e,t){if("function"==typeof n)t&&(n=_i(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_i(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function GE(n){n.g=em(()=>{n.g=null,n.i&&(n.i=!1,GE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pn(Uf,Ur),(wt=Uf.prototype).ca=!1,wt.R=null,wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vr(this,"tick"),this.ca&&(Zy(this),this.start()))}},wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){Uf.X.M.call(this),Zy(this),delete this.g};class WD extends yu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:GE(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(n){yu.call(this),this.h=n,this.g={}}Pn(vi,yu);var qE=[];function WE(n,e,t,r){Array.isArray(t)||(t&&(qE[0]=t.toString()),t=qE);for(var i=0;i<t.length;i++){var a=VE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function ZD(n){UE(n.g,function(e,t){this.g.hasOwnProperty(t)&&By(e)},n),n.g={}}function zy(){this.g=!0}function jd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return al(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}vi.prototype.M=function(){vi.X.M.call(this),ZD(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zy.prototype.Aa=function(){this.g=!1},zy.prototype.info=function(){};var pc={},KE=null;function tm(){return KE=KE||new Ur}function Yy(n){yi.call(this,pc.Pa,n)}function Vf(n){const e=tm();vr(e,new Yy(e))}function Qy(n,e){yi.call(this,pc.STAT_EVENT,n),this.stat=e}function Zi(n){const e=tm();vr(e,new Qy(e,n))}function YE(n,e){yi.call(this,pc.Qa,n),this.size=e}function Hd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}pc.Pa="serverreachability",Pn(Yy,yi),pc.STAT_EVENT="statevent",Pn(Qy,yi),pc.Qa="timingevent",Pn(YE,yi);var Bf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},QE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function so(){}function JE(){}so.prototype.h=null;var Jy,jf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function XE(){yi.call(this,"d")}function rm(){yi.call(this,"c")}function im(){}function Hf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new vi(this),this.O=zD,this.T=new Uf(n=Oy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new sm}function sm(){this.i=null,this.g="",this.h=!1}Pn(XE,yi),Pn(rm,yi),Pn(im,so),im.prototype.g=function(){return new XMLHttpRequest},im.prototype.i=function(){return{}},Jy=new im;var zD=45e3,Xy={},gc={};function $f(n,e,t){n.K=1,n.v=Gd(bu(e)),n.s=t,n.P=!0,eb(n,null)}function eb(n,e){n.F=Date.now(),Gf(n),n.A=bu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),av(t.i,"t",r),n.C=0,t=n.l.H,n.h=new sm,n.g=cl(n.l,t?e:null,!n.s),0<n.N&&(n.L=new WD(_i(n.La,n,n.g),n.N)),WE(n.S,n.g,"readystatechange",n.ib),e=n.H?jD(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Vf(),function ZE(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var T=v[0];v=v[1];var S=T.split("_");l=2<=S.length&&"type"==S[1]?l+(T+"=")+v+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function om(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function am(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=tb(n,t),i==gc){4==e&&(n.o=4,Zi(14),r=!1),jd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Xy){n.o=4,Zi(15),jd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}jd(n.j,n.m,i,null),lm(n,i)}om(n)&&i!=gc&&i!=Xy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),gv(e),e.K=!0,Zi(11))):(jd(n.j,n.m,t,"[Invalid Chunked Response]"),mc(n),um(n))}function tb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gc:(t=Number(e.substring(t,r)),isNaN(t)?Xy:(r+=1)+t>e.length?gc:(e=e.substr(r,t),n.C=r+t,e))}function Gf(n){n.V=Date.now()+n.O,nb(n,n.O)}function nb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Hd(_i(n.gb,n),e)}function $d(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function um(n){0==n.l.G||n.I||vb(n.l,n)}function mc(n){$d(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Zy(n.T),ZD(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function lm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ls(t.h,n)))if(!n.J&&Ls(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Hd(_i(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;_m(t),zd(t)}ll(t),Zi(18)}if(1>=lb(t.h)&&t.ja){try{t.ja()}catch(v){}t.ja=void 0}}else Oi(t,11)}else if((n.J||t.g==n)&&_m(t),!My(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const T=v[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const k=v[5];null!=k&&"number"==typeof k&&0<k&&(t.J=r=1.5*k,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.h;a.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Zf(a,a.h),a.h=null))}if(r.D){const ge=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.za=ge,Yn(r.F,r.D,ge))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=wi(r,r.H?r.ka:null,r.V),l.J){uv(r.h,l);var f=l,m=r.J;m&&f.setTimeout(m),f.B&&($d(f),Gf(f)),r.g=l}else Xf(r);0<t.i.length&&mm(t)}else"stop"!=v[0]&&"close"!=v[0]||Oi(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Oi(t,7):pv(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Vf()}catch(v){}}function ev(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Mf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ib(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Mf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function rb(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Mf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(wt=Hf.prototype).setTimeout=function(n){this.O=n},wt.ib=function(n){n=n.target;const e=this.L;e&&3==Ca(n)?e.l():this.La(n)},wt.La=function(n){try{if(n==this.g)e:{const T=Ca(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||Oy||this.g&&(this.h.h||this.g.fa()||fv(this.g)))){this.I||4!=T||7==e||Vf(),$d(this);var t=this.g.aa();this.Y=t;t:if(om(this)){var r=fv(this.g);n="";var i=r.length,a=4==Ca(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){mc(this),um(this);var l="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function yR(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!My(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Zi(12),mc(this),um(this);break e}jd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lm(this,t)}this.P?(am(this,T,l),Oy&&this.i&&3==T&&(WE(this.S,this.T,"tick",this.hb),this.T.start())):(jd(this.j,this.m,l,null),lm(this,l)),4==T&&mc(this),this.i&&!this.I&&(4==T?vb(this.l,this):(this.i=!1,Gf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),mc(this),um(this)}}}catch(T){}},wt.hb=function(){if(this.g){var n=Ca(this.g),e=this.g.fa();this.C<e.length&&($d(this),am(this,n,e),this.i&&4!=n&&Gf(this))}},wt.cancel=function(){this.I=!0,mc(this)},wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Ky(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vf(),Zi(17)),mc(this),this.o=2,um(this)):nb(this,this.V-n)};var tv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ba){this.h=void 0!==e?e:n.h,cm(this,n.j),this.s=n.s,this.g=n.g,nv(this,n.m),this.l=n.l,e=n.i;var t=new Wf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),dm(this,t),this.o=n.o}else n&&(t=String(n).match(tv))?(this.h=!!e,cm(this,t[1]||"",!0),this.s=Cu(t[2]||""),this.g=Cu(t[3]||"",!0),nv(this,t[4]),this.l=Cu(t[5]||"",!0),dm(this,t[6]||"",!0),this.o=Cu(t[7]||"")):(this.h=!!e,this.i=new Wf(null,this.h))}function bu(n){return new ba(n)}function cm(n,e,t){n.j=t?Cu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dm(n,e,t){e instanceof Wf?(n.i=e,function YD(n,e){e&&!n.j&&(ul(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ov(this,r),av(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qf(e,KD)),n.i=new Wf(e,n.h))}function Yn(n,e,t){n.i.set(e,t)}function Gd(n){return Yn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ba.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qf(e,iv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qf(e,iv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qf(t,"/"==t.charAt(0)?ob:sb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qf(t,sv)),n.join("")};var iv=/[#\/\?@]/g,sb=/[#\?:]/g,ob=/[#\?]/g,KD=/[#\?@]/g,sv=/#/g;function Wf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ul(n){n.g||(n.g=new Map,n.h=0,n.i&&function Eu(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ov(n,e){ul(n),e=qd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _c(n,e){return ul(n),e=qd(n,e),n.g.has(e)}function av(n,e,t){ov(n,e),0<t.length&&(n.i=null,n.g.set(qd(n,e),Bo(t)),n.h+=t.length)}function qd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ab(n){this.l=n||QD,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ga&&Ot.g.Ga()&&Ot.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=Wf.prototype).add=function(n,e){ul(this),this.i=null,n=qd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){ul(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.oa=function(){ul(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},wt.W=function(n){ul(this);let e=[];if("string"==typeof n)_c(this,n)&&(e=e.concat(this.g.get(qd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return ul(this),this.i=null,_c(this,n=qd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var QD=10;function ub(n){return!!n.h||!!n.g&&n.g.size>=n.j}function lb(n){return n.h?1:n.g?n.g.size:0}function Ls(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Zf(n,e){n.g?n.g.add(e):n.h=e}function uv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Bo(n.i)}function hm(){}function cb(){this.g=new hm}function JD(n,e,t){const r=t||"";try{ev(n,function(i,a){let l=i;kf(i)&&(l=al(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function zf(n){this.l=n.ac||null,this.j=n.jb||!1}function Kf(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=db,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ab.prototype.cancel=function(){if(this.i=lv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},hm.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},hm.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},Pn(zf,so),zf.prototype.g=function(){return new Kf(this.l,this.j)},zf.prototype.i=function(n){return function(){return n}}({}),Pn(Kf,Ur);var db=0;function cv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Yf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qf(n)}function Qf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=Kf.prototype).open=function(n,e){if(this.readyState!=db)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qf(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yf(this)),this.readyState=db},wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qf(this)),this.g&&(this.readyState=3,Qf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yf(this):Qf(this),3==this.readyState&&cv(this)}},wt.Va=function(n){this.g&&(this.response=this.responseText=n,Yf(this))},wt.Ua=function(n){this.g&&(this.response=n,Yf(this))},wt.ga=function(){this.g&&Yf(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vR=Ot.JSON.parse;function xr(n){Ur.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pm,this.K=this.L=!1}Pn(xr,Ur);var pm="",eS=/^https?$/i,hb=["POST","PUT"];function tS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,oo(n),dv(n)}function oo(n){n.D||(n.D=!0,vr(n,"complete"),vr(n,"error"))}function nS(n){if(n.h&&void 0!==Ay&&(!n.C[1]||4!=Ca(n)||2!=n.aa()))if(n.v&&4==Ca(n))em(n.Ha,0,n);else if(vr(n,"readystatechange"),4==Ca(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(tv)[1]||null;if(!i&&Ot.self&&Ot.self.location){var a=Ot.self.location.protocol;i=a.substr(0,a.length-1)}r=!eS.test(i?i.toLowerCase():"")}t=r}if(t)vr(n,"complete"),vr(n,"success");else{n.m=6;try{var l=2<Ca(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.aa()+"]",oo(n)}}finally{dv(n)}}}function dv(n,e){if(n.g){hv(n);const t=n.g,r=n.C[0]?Hg:null;n.g=null,n.C=null,e||vr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function hv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Ca(n){return n.g?n.g.readyState:0}function fv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case pm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function pb(n){let e="";return UE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function gb(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=pb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Yn(n,e,t))}function Zd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function gm(n){this.Ca=0,this.i=[],this.j=new zy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zd("baseRetryDelayMs",5e3,n),this.bb=Zd("retryDelaySeedMs",1e4,n),this.$a=Zd("forwardChannelMaxRetries",2,n),this.ta=Zd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ab(n&&n.concurrentRequestLimit),this.Fa=new cb,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function pv(n){if(mb(n),3==n.G){var e=n.U++,t=bu(n.F);Yn(t,"SID",n.I),Yn(t,"RID",e),Yn(t,"TYPE","terminate"),Jf(n,t),(e=new Hf(n,n.j,e,void 0)).K=2,e.v=Gd(bu(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=cl(e.l,null),e.g.da(e.v)),e.F=Date.now(),Gf(e)}Yd(n)}function zd(n){n.g&&(gv(n),n.g.cancel(),n.g=null)}function mb(n){zd(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),_m(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function mm(n){ub(n.h)||n.m||(n.m=!0,Wy(n.Ja,n),n.C=0)}function _b(n,e){var t;t=e?e.m:n.U++;const r=bu(n.F);Yn(r,"SID",n.I),Yn(r,"RID",t),Yn(r,"AID",n.T),Jf(n,r),n.o&&n.s&&gb(r,n.o,n.s),t=new Hf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=yb(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Zf(n.h,t),$f(t,r,e)}function Jf(n,e){n.ia&&UE(n.ia,function(t,r){Yn(e,r,t)}),n.l&&ev({},function(t,r){Yn(e,r,t)})}function yb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?_i(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const T=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{JD(T,l,"req"+v+"_")}catch(S){r&&r(T)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Xf(n){n.g||n.u||(n.Z=1,Wy(n.Ia,n),n.A=0)}function ll(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Hd(_i(n.Ia,n),ym(n,n.A)),n.A++,0))}function gv(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Kd(n){n.g=new Hf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=bu(n.sa);Yn(e,"RID","rpc"),Yn(e,"SID",n.I),Yn(e,"CI",n.L?"0":"1"),Yn(e,"AID",n.T),Yn(e,"TYPE","xmlhttp"),Jf(n,e),n.o&&n.s&&gb(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Gd(bu(e)),t.s=null,t.P=!0,eb(t,n)}function _m(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function vb(n,e){var t=null;if(n.g==e){_m(n),gv(n),n.g=null;var r=2}else{if(!Ls(n.h,e))return;t=e.D,uv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vr(r=tm(),new YE(r,t)),mm(n)}else Xf(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function rS(n,e){return!(lb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Hd(_i(n.Ja,n,e),ym(n,n.C)),n.C++,0)))}(n,e)||2==r&&ll(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Oi(n,5);break;case 4:Oi(n,10);break;case 3:Oi(n,6);break;default:Oi(n,2)}}function ym(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Oi(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=_i(n.kb,n);t||(t=new ba("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||cm(t,"https"),Gd(t)),function XD(n,e){const t=new zy;if(Ot.Image){const r=new Image;r.onload=dc(fm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=dc(fm,t,r,"TestLoadImage: error",!1,e),r.onabort=dc(fm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=dc(fm,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zi(2);n.G=0,n.l&&n.l.va(e),Yd(n),mb(n)}function Yd(n){if(n.G=0,n.la=[],n.l){const e=lv(n.h);(0!=e.length||0!=n.i.length)&&(Gg(n.la,e),Gg(n.la,n.i),n.h.i.length=0,Bo(n.i),n.i.length=0),n.l.ua()}}function wi(n,e,t){var r=t instanceof ba?bu(t):new ba(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),nv(r,r.m);else{var i=Ot.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ba(null,void 0);r&&cm(a,r),e&&(a.g=e),i&&nv(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Yn(r,t,e),Yn(r,"VER",n.ma),Jf(n,r),r}function cl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&n.Da&&!n.ra?new zf({jb:!0}):n.ra)).Ka(n.H),e}function ep(){}function zi(){if(Pf&&!(10<=Number(pR)))throw Error("Environmental error: no available transport.")}function Ki(n,e){Ur.call(this),this.g=new gm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!My(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!My(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jo(this)}function yc(n){XE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function vc(){rm.call(this),this.status=1}function jo(n){this.g=n}(wt=xr.prototype).Ka=function(n){this.L=n},wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jy.g(),this.C=function nm(n){return n.h||(n.h=n.i())}(this.u?this.u:Jy),this.g.onreadystatechange=_i(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void tS(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Ot.FormData&&n instanceof Ot.FormData,!(0<=$g(hb,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hv(this),0<this.B&&((this.K=function fb(n){return Pf&&function VD(){return function Ny(n){var e=LE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ky(String(Ly)).split("."),t=ky("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=NE(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||NE(0==i[2].length,0==a[2].length)||NE(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_i(this.qa,this)):this.A=em(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){tS(this,a)}},wt.qa=function(){void 0!==Ay&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vr(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vr(this,"complete"),vr(this,"abort"),dv(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dv(this,!0)),xr.X.M.call(this)},wt.Ha=function(){this.s||(this.F||this.v||this.l?nS(this):this.fb())},wt.fb=function(){nS(this)},wt.aa=function(){try{return 2<Ca(this)?this.g.status:-1}catch(n){return-1}},wt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vR(e)}},wt.Ea=function(){return this.m},wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=gm.prototype).ma=8,wt.G=1,wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Hf(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=jD(a),zg(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yb(this,i,e),Yn(t=bu(this.F),"RID",n),Yn(t,"CVER",22),this.D&&Yn(t,"X-HTTP-Session-Id",this.D),Jf(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(pb(a)))+"&"+e:this.o&&gb(t,this.o,a)),Zf(this.h,i),this.Ya&&Yn(t,"TYPE","init"),this.O?(Yn(t,"$req",e),Yn(t,"SID","null"),i.Z=!0,$f(i,t,null)):$f(i,t,e),this.G=2}}else 3==this.G&&(n?_b(this,n):0==this.i.length||ub(this.h)||_b(this))},wt.Ia=function(){if(this.u=null,Kd(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Hd(_i(this.eb,this),n)}},wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zi(10),zd(this),Kd(this))},wt.cb=function(){null!=this.v&&(this.v=null,zd(this),ll(this),Zi(19))},wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Zi(2)):(this.j.info("Failed to ping google.com"),Zi(1))},(wt=ep.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Ra=function(){},zi.prototype.g=function(n,e){return new Ki(n,e)},Pn(Ki,Ur),Ki.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Zi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=wi(n,null,n.V),mm(n)},Ki.prototype.close=function(){pv(this.g)},Ki.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=al(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&mm(e)},Ki.prototype.M=function(){this.g.l=null,delete this.j,pv(this.g),delete this.g,Ki.X.M.call(this)},Pn(yc,XE),Pn(vc,rm),Pn(jo,ep),jo.prototype.xa=function(){vr(this.g,"a")},jo.prototype.wa=function(n){vr(this.g,new yc(n))},jo.prototype.va=function(n){vr(this.g,new vc)},jo.prototype.ua=function(){vr(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,Bf.NO_ERROR=0,Bf.TIMEOUT=8,Bf.HTTP_ERROR=6,QE.COMPLETE="complete",JE.EventType=jf,jf.OPEN="a",jf.CLOSE="b",jf.ERROR="c",jf.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.Oa,xr.prototype.getLastErrorCode=xr.prototype.Ea,xr.prototype.getStatus=xr.prototype.aa,xr.prototype.getResponseJson=xr.prototype.Sa,xr.prototype.getResponseText=xr.prototype.fa,xr.prototype.send=xr.prototype.da,xr.prototype.setWithCredentials=xr.prototype.Ka;var Qd=Ea.createWebChannelTransport=function(){return new zi},Jd=Ea.getStatEventTarget=function(){return tm()},dl=Ea.ErrorCode=Bf,Xd=Ea.EventType=QE,eh=Ea.Event=pc,wc=Ea.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},wb=Ea.FetchXmlHttpFactory=zf,tp=Ea.WebChannel=JE,Eb=Ea.XhrIo=xr;const mv="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let Ec="9.14.0";const Iu=new Vo.Yd("@firebase/firestore");function vm(){return Iu.logLevel}function Ve(n,...e){if(Iu.logLevel<=Vo.in.DEBUG){const t=e.map(wm);Iu.debug(`Firestore (${Ec}): ${n}`,...t)}}function wr(n,...e){if(Iu.logLevel<=Vo.in.ERROR){const t=e.map(wm);Iu.error(`Firestore (${Ec}): ${n}`,...t)}}function bc(n,...e){if(Iu.logLevel<=Vo.in.WARN){const t=e.map(wm);Iu.warn(`Firestore (${Ec}): ${n}`,...t)}}function wm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function Rt(n,e){n||at()}function et(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class sS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _v{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,_e.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new Cb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Kr(e)}}class yv{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class oS{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new yv(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ER{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.A=t.token,new aS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=uS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function th(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Cc(n){return n+"\0"}class nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new nr(0,0))}static max(){return new At(new nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class np{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===np.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof np?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends np{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const Em=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends np{construct(e,t,r){return new Er(e,t,r)}static isValidIdentifier(e){return Em.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Oe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Oe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Oe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Oe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(t)}static emptyPath(){return new Er([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(un.fromString(e))}static fromName(e){return new Ye(un.fromString(e).popFirst(5))}static empty(){return new Ye(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new un(e.slice()))}}class bm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function wv(n){return n.fields.find(e=>2===e.kind)}function Ic(n){return n.fields.filter(e=>2!==e.kind)}bm.UNKNOWN_ID=-1;class Cm{constructor(e,t){this.fieldPath=e,this.kind=t}}class rp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rp(0,Yi.min())}}function Ev(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new nr(t+1,0):new nr(t,r));return new Yi(i,Ye.empty(),e)}function bv(n){return new Yi(n.readTime,n.key,-1)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(At.min(),Ye.empty(),-1)}static max(){return new Yi(At.max(),Ye.empty(),-1)}}function Tb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const Im="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tc(n){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,_e.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==Im)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Dc.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(T=>{l[v]=T,++f,f===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class nh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Yr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hl(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=ip(r.target.error);this.P.reject(new hl(e,i))}}static open(e,t,r,i){try{return new nh(t,e.transaction(i,r))}catch(a){throw new hl(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cv(t)}}class Us{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Us.D((0,L.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),rh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(Us.N())return!0;const e=(0,L.z$)(),t=Us.D(e),r=0<t&&t<10,i=Us.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new hl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Oe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Oe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new hl(e,f))},a.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=nh.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(T=>(m.V(),T)).catch(T=>(m.abort(T),he.reject(T))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,T="FirebaseError"!==v.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",v.message,"Retrying:",T),a.close(),!T)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class cS{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return rh(this.U.delete())}}class hl extends Oe{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ho(n){return"IndexedDbTransactionError"===n.name}class Cv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rh(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),rh(this.store.add(e))}get(e){return rh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),rh(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),rh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const l=ip(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new he((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new cS(f),v=t(f.primaryKey,f.value,m);if(v instanceof he){const T=v.catch(S=>(m.done(),he.reject(S)));r.push(T)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rh(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ip(r.target.error);t(i)}})}let Sb=!1;function ip(n){const e=Us.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sb||(Sb=!0,setTimeout(()=>{throw r},0)),r}}return n}class Iv{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ho(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Tc(r)}yield t.nt(6e4)}))}}class Ab{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Ve("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=bv(a);Tb(l,r)>0&&(r=l)}),new Yi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Tm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Qi.at=-1;class rr{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sp(this.root,e,this.comparator,!1)}getReverseIterator(){return new sp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sp(this.root,e,this.comparator,!0)}}class sp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ei.RED,this.left=null!=i?i:Ei.EMPTY,this.right=null!=a?a:Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pl(n){return n.hasNext()?n.getNext():void 0}class fs{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new fs([])}unionWith(e){let t=new Mn(Er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new fs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return th(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const xb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ia(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=xb.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gl(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function Dm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Sv(n){const e=n.mapValue.fields.__previous_value__;return Dm(e)?Sv(e):e}function ih(n){const e=Ia(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(e.seconds,e.nanos)}class Rb{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class Tu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}function sh(n){return null==n}function oh(n){return 0===n&&1/n==-1/0}function hS(n){return"number"==typeof n&&Number.isInteger(n)&&!oh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sm={nullValue:"NULL_VALUE"};function _l(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dm(n)?4:Nb(n)?9007199254740991:10:at()}function Ta(n,e){if(n===e)return!0;const t=_l(n);if(t!==_l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ih(n).isEqual(ih(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ia(r.timestampValue),l=Ia(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,gl(n.bytesValue).isEqual(gl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Qn(r.geoPointValue.latitude)===Qn(i.geoPointValue.latitude)&&Qn(r.geoPointValue.longitude)===Qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qn(r.integerValue)===Qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Qn(r.doubleValue),l=Qn(i.doubleValue);return a===l?oh(a)===oh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return th(n.arrayValue.values||[],e.arrayValue.values||[],Ta);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Tm(a)!==Tm(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!Ta(a[f],l[f])))return!1;return!0}(n,e);default:return at()}var i}function hr(n,e){return void 0!==(n.values||[]).find(t=>Ta(t,e))}function Du(n,e){if(n===e)return 0;const t=_l(n),r=_l(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Qn(i.integerValue||i.doubleValue),f=Qn(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return Mb(n.timestampValue,e.timestampValue);case 4:return Mb(ih(n),ih(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=gl(i),f=gl(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=Bt(l[m],f[m]);if(0!==v)return v}return Bt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Bt(Qn(i.latitude),Qn(a.latitude));return 0!==l?l:Bt(Qn(i.longitude),Qn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=Du(l[m],f[m]);if(v)return v}return Bt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===ml.mapValue&&a===ml.mapValue)return 0;if(i===ml.mapValue)return 1;if(a===ml.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let T=0;T<f.length&&T<v.length;++T){const S=Bt(f[T],v[T]);if(0!==S)return S;const k=Du(l[f[T]],m[v[T]]);if(0!==k)return k}return Bt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw at()}}function Mb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Ia(n),r=Ia(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function ah(n){return Am(n)}function Am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ia(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gl(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Am(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Am(r.fields[f])}`;return a+"}"}(n.mapValue):at();var e}function Sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xm(n){return!!n&&"integerValue"in n}function uh(n){return!!n&&"arrayValue"in n}function Ac(n){return!!n&&"nullValue"in n}function kb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rm(n){return!!n&&"mapValue"in n}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Nb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pb(n){return"nullValue"in n?Sm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sc(Tu.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function bR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sc(Tu.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ml:at()}function Av(n,e){const t=Du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Mm(n,e){const t=Du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=Er.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=lh(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Rm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new jn(lh(this.value))}}function Ob(n){const e=[];return fl(n.fields,(t,r)=>{const i=new Er([t]);if(Rm(r)){const a=Ob(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new fs(e)}class Hn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Hn(e,0,At.min(),At.min(),jn.empty(),0)}static newFoundDocument(e,t,r){return new Hn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Hn(e,2,t,At.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,At.min(),jn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Da{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ht=null}}function ao(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Da(n,e,t,r,i,a,l)}function bi(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ah(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ah(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ah(r)).join(",")),e.ht=t}return e.ht}function ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xv(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ta(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Om(n.startAt,e.startAt)&&Om(n.endAt,e.endAt)}function km(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Nm(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function Lb(n,e,t){let r=Sm,i=!0;for(const a of Nm(n,e)){let l=Sm,f=!0;switch(a.op){case"<":case"<=":l=Pb(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=Sm}Av({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Av({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Ub(n,e,t){let r=ml,i=!0;for(const a of Nm(n,e)){let l=ml,f=!0;switch(a.op){case">=":case">":l=bR(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=ml}Mm({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Mm({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new op(e,t,r):"array-contains"===t?new jb(e,r):"in"===t?new Hb(e,r):"not-in"===t?new Pm(e,r):"array-contains-any"===t?new pS(e,r):new Qr(e,t,r)}static lt(e,t,r){return"in"===t?new fS(e,r):new Vb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Du(t,this.value)):null!==t&&_l(this.value)===_l(t)&&this.ft(Du(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class op extends Qr{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.ft(t)}}class fS extends Qr{constructor(e,t){super(e,"in",t),this.keys=Bb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vb extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=Bb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class jb extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uh(t)&&hr(t.arrayValue,this.value)}}class Hb extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hr(this.value.arrayValue,t)}}class Pm extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(hr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hr(this.value.arrayValue,t)}}class pS extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hr(this.value.arrayValue,r))}}class Su{constructor(e,t){this.position=e,this.inclusive=t}}class xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function xv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ap(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ye.comparator(Ye.fromName(l.referenceValue),t.key):Du(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Om(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ta(n.position[t],e.position[t]))return!1;return!0}class Sa{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this._t=null,this.wt=null}}function Rv(n,e,t,r,i,a,l,f){return new Sa(n,e,t,r,i,a,l,f)}function Rc(n){return new Sa(n)}function Mv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Fm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Lm(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Um(n){return null!==n.collectionGroup}function dh(n){const e=et(n);if(null===e._t){e._t=[];const t=Lm(e),r=Fm(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new xc(t)),e._t.push(new xc(Er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new xc(Er.keyField(),a))}}}return e._t}function Ji(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=ao(e.path,e.collectionGroup,dh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of dh(e))t.push(new xc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Su(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Su(e.startAt.position,e.startAt.inclusive):null;e.wt=ao(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Vm(n,e,t){return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function up(n,e){return ch(Ji(n),Ji(e))&&n.limitType===e.limitType}function $b(n){return`${bi(Ji(n))}|lt:${n.limitType}`}function kv(n){return`Query(target=${function Fb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ah(r.value)}`;var r}).join(", ")}]`),sh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ah(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ah(t)).join(",")),`Target(${e})`}(Ji(n))}; limitType=${n.limitType})`}function Nv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=ap(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,dh(t),r)||t.endAt&&!function(i,a,l){const f=ap(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,dh(t),r)));var t,r}function Gb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qb(n){return(e,t)=>{let r=!1;for(const i of dh(n)){const a=gS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function gS(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?Du(f,m):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function Wb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function Zb(n){return{integerValue:""+n}}function zb(n,e){return hS(e)?Zb(e):Wb(n,e)}class Bm{constructor(){this._=void 0}}function mS(n,e,t){return n instanceof hh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof yl?Pv(n,e):n instanceof vl?Ov(n,e):function(r,i){const a=Kb(r,i),l=Fv(a)+Fv(r.yt);return xm(a)&&xm(r.yt)?Zb(l):Wb(r.It,l)}(n,e)}function _S(n,e,t){return n instanceof yl?Pv(n,e):n instanceof vl?Ov(n,e):t}function Kb(n,e){return n instanceof Mc?xm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class hh extends Bm{}class yl extends Bm{constructor(e){super(),this.elements=e}}function Pv(n,e){const t=Lv(e);for(const r of n.elements)t.some(i=>Ta(i,r))||t.push(r);return{arrayValue:{values:t}}}class vl extends Bm{constructor(e){super(),this.elements=e}}function Ov(n,e){let t=Lv(e);for(const r of n.elements)t=t.filter(i=>!Ta(i,r));return{arrayValue:{values:t}}}class Mc extends Bm{constructor(e,t){super(),this.It=e,this.yt=t}}function Fv(n){return Qn(n.integerValue||n.doubleValue)}function Lv(n){return uh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fh{constructor(e,t){this.field=e,this.transform=t}}class Qb{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Aa(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class jm{}function Jb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gh(n.key,Jn.none()):new kc(n.key,n.data,Jn.none());{const t=n.data,r=jn.empty();let i=new Mn(Er.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new xa(n.key,r,new fs(i.toArray()),Jn.none())}}function ph(n,e,t){n instanceof kc?function(r,i,a){const l=r.value.clone(),f=St(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof xa?function(r,i,a){if(!Aa(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=St(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(vS(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hm(n,e,t,r){return n instanceof kc?function(i,a,l,f){if(!Aa(i.precondition,a))return l;const m=i.value.clone(),v=Xb(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof xa?function(i,a,l,f){if(!Aa(i.precondition,a))return l;const m=Xb(i.fieldTransforms,f,a),v=a.data;return v.setAll(vS(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,Aa(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Uv(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Kb(r.transform,i||null);null!=a&&(null===t&&(t=jn.empty()),t.set(r.field,a))}return t||null}function yS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&th(t,r,(i,a)=>function Yb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof yl&&r instanceof yl||t instanceof vl&&r instanceof vl?th(t.elements,r.elements,Ta):t instanceof Mc&&r instanceof Mc?Ta(t.yt,r.yt):t instanceof hh&&r instanceof hh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class kc extends jm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xa extends jm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function St(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,_S(l,f,t[i]))}return r}function Xb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,mS(a,l,e))}return r}class gh extends jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vv extends jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $m{constructor(e){this.count=e}}var Br,Qt;function lp(n){switch(n){default:return at();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function fr(n){if(void 0===n)return wr("GRPC error has no .code"),me.UNKNOWN;switch(n){case Br.OK:return me.OK;case Br.CANCELLED:return me.CANCELLED;case Br.UNKNOWN:return me.UNKNOWN;case Br.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Br.INTERNAL:return me.INTERNAL;case Br.UNAVAILABLE:return me.UNAVAILABLE;case Br.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Br.NOT_FOUND:return me.NOT_FOUND;case Br.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Br.ABORTED:return me.ABORTED;case Br.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Br.DATA_LOSS:return me.DATA_LOSS;default:return at()}}(Qt=Br||(Br={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class Nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Tv(this.inner)}size(){return this.innerSize}}const eC=new rr(Ye.comparator);function ps(){return eC}const tC=new rr(Ye.comparator);function mh(...n){let e=tC;for(const t of n)e=e.insert(t.key,t);return e}function Bv(n){let e=tC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $o(){return cp()}function jv(){return cp()}function cp(){return new Nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const wS=new rr(Ye.comparator),ES=new Mn(Ye.comparator);function Nt(...n){let e=ES;for(const t of n)e=e.add(t);return e}const bS=new Mn(Bt);function Gm(){return bS}class dp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dp(At.min(),i,Gm(),ps(),Nt())}}class wl{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wl(r,t,Nt(),Nt(),Nt())}}class hp{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Hv{constructor(e,t){this.targetId=e,this.At=t}}class $v{constructor(e,t,r=Vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nC{constructor(){this.Rt=0,this.bt=rC(),this.Pt=Vr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Nt(),t=Nt(),r=Nt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new wl(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=rC()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class fp{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ps(),this.qt=_h(),this.Kt=new Mn(Bt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(km(a))if(0===r){const l=new Ye(a.path);this.jt(t,l,Hn.newNoDocument(l,At.min()))}else Rt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const f=this.Xt(l);if(f){if(a.current&&km(f.target)){const m=new Ye(f.target.path);null!==this.Ut.get(m)||this.ee(l,m)||this.jt(l,m,Hn.newNoDocument(m,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Nt();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new dp(e,t,this.Kt,this.Ut,r);return this.Ut=ps(),this.qt=_h(),this.Kt=new Mn(Bt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new nC,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Mn(Bt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nC),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function _h(){return new rr(Ye.comparator)}function rC(){return new rr(Ye.comparator)}const CS={asc:"ASCENDING",desc:"DESCENDING"},IS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class iC{constructor(e,t){this.databaseId=e,this.gt=t}}function yh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gv(n,e){return n.gt?e.toBase64():e.toUint8Array()}function TS(n,e){return yh(n,e.toTimestamp())}function Jr(n){return Rt(!!n),At.fromTimestamp(function(e){const t=Ia(e);return new nr(t.seconds,t.nanos)}(n))}function qv(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sC(n){const e=un.fromString(n);return Rt(pC(e)),e}function qm(n,e){return qv(n.databaseId,e.path)}function Au(n,e){const t=sC(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(pp(t))}function oC(n,e){return qv(n.databaseId,e)}function DS(n){const e=sC(n);return 4===e.length?un.emptyPath():pp(e)}function vh(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pp(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function aC(n,e,t){return{name:qm(n,e),fields:t.value.mapValue.fields}}function uC(n,e,t){const r=Au(n,e.name),i=Jr(e.updateTime),a=new jn({mapValue:{fields:e.fields}}),l=Hn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function mp(n,e){let t;if(e instanceof kc)t={update:aC(n,e.key,e.value)};else if(e instanceof gh)t={delete:qm(n,e.key)};else if(e instanceof xa)t={update:aC(n,e.key,e.data),updateMask:fC(e.fieldMask)};else{if(!(e instanceof Vv))return at();t={verify:qm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof hh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mc)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:TS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function Wv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Jn.updateTime(Jr(i.updateTime)):void 0!==i.exists?Jn.exists(i.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),f=new hh):"appendMissingElements"in l?f=new yl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new vl(l.removeAllFromArray.values||[]):"increment"in l?f=new Mc(a,l.increment):at();const m=Er.fromServerFormat(l.fieldPath);return new fh(m,f)}(n,i)):[];var i;if(e.update){const i=Au(n,e.update.name),a=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new fs((e.updateMask.fieldPaths||[]).map(v=>Er.fromServerFormat(v)));return new xa(i,a,l,t,r)}return new kc(i,a,t,r)}if(e.delete){const i=Au(n,e.delete);return new gh(i,t)}if(e.verify){const i=Au(n,e.verify);return new Vv(i,t)}return at()}function cC(n,e){return{documents:[oC(n,e.path)]}}function Zv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(T=>function(S){if("=="===S.op){if(kb(S.value))return{unaryFilter:{field:Pc(S.field),op:"IS_NAN"}};if(Ac(S.value))return{unaryFilter:{field:Pc(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(kb(S.value))return{unaryFilter:{field:Pc(S.field),op:"IS_NOT_NAN"}};if(Ac(S.value))return{unaryFilter:{field:Pc(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pc(S.field),op:xS(S.op),value:S.value}}}(T));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Pc((T=v).field),direction:wh(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||sh(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function zv(n){let e=DS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=dC(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new xc(Eh((S=T).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(T){let S;return S="object"==typeof T?T.value:T,sh(S)?null:S}(t.limit));let m=null;var T;t.startAt&&(m=new Su((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new Su(T.values||[],!T.before)}(t.endAt)),Rv(e,i,l,a,f,"F",m,v)}function dC(n){return n?void 0!==n.unaryFilter?[RS(n)]:void 0!==n.fieldFilter?[hC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dC(e)).reduce((e,t)=>e.concat(t)):at():[]}function wh(n){return CS[n]}function xS(n){return IS[n]}function Pc(n){return{fieldPath:n.canonicalString()}}function Eh(n){return Er.fromServerFormat(n.fieldPath)}function hC(n){return Qr.create(Eh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function RS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Eh(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Eh(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Eh(n.unaryFilter.field);return Qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Eh(n.unaryFilter.field);return Qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function fC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kv(e)),e=MS(n.get(t),e);return Kv(e)}function MS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Kv(n){return n+"\x01\x01"}function Go(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:at()}a=l+2}return new un(r)}const gC=["userId","batchId"];function Wm(n,e){return[n,Ci(e)]}function mC(n,e,t){return[n,Ci(e),t]}const Yv={},kS=["prefixPath","collectionGroup","readTime","documentId"],_C=["prefixPath","collectionGroup","documentId"],NS=["collectionGroup","readTime","prefixPath","documentId"],PS=["canonicalId","targetId"],OS=["targetId","path"],FS=["path","targetId"],LS=["collectionId","parent"],US=["indexId","uid"],VS=["uid","sequenceNumber"],BS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yC=["indexId","uid","orderedDocumentKey"],vC=["userId","collectionPath","documentId"],jS=["userId","collectionPath","largestBatchId"],HS=["userId","collectionGroup","largestBatchId"],Qv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$S=[...Qv,"documentOverlays"],wC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EC=wC,Jv=[...EC,"indexConfiguration","indexState","indexEntries"];class _p extends Db{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Xr(n,e){const t=et(n);return Us.M(t.ie,e)}class yp{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ph(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jv();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=Jb(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&th(this.mutations,e.mutations,(t,r)=>yS(t,r))&&th(this.baseMutations,e.baseMutations,(t,r)=>yS(t,r))}}class Xv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=wS;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Xv(e,t,r,i)}}class e0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ra{constructor(e,t,r,i,a=At.min(),l=At.min(),f=Vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new Ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class bC{constructor(e){this.re=e}}function IC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qm(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:yh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Oc(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Oc(e.version)}}var i,a;return r}function vp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function El(n){const e=new nr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function bh(n,e){const t=(e.baseMutations||[]).map(a=>Wv(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Wv(n.re,a)),i=nr.fromMillis(e.localWriteTimeMs);return new yp(e.batchId,i,t,r)}function wp(n){const e=El(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?El(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Ji(Rc(DS(i.documents[0])))):r=Ji(zv(n.query)),new Ra(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function Ep(n,e){const t=Oc(e.snapshotVersion),r=Oc(e.lastLimboFreeSnapshotVersion);let i;i=km(e.target)?cC(n.re,e.target):Zv(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bi(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function t0(n){const e=zv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vm(e,e.limit,"L"):e}function bl(n,e){return new e0(e.largestBatchId,Wv(n.re,e.overlayMutation))}function Ch(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}function TC(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Oc(r.readTime),documentKey:Ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class CR{getBundleMetadata(e,t){return n0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:El(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return n0(e).put({bundleId:(r=t).id,createTime:Oc(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return DC(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:t0(i.bundledQuery),readTime:El(i.readTime)};var i})}saveNamedQuery(e,t){return DC(e).put({name:(r=t).name,readTime:Oc(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function n0(n){return Xr(n,"bundles")}function DC(n){return Xr(n,"namedQueries")}class Zm{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Zm(e,t.uid||"")}getOverlay(e,t){return bp(e).get(Ch(this.userId,t)).next(r=>r?bl(this.It,r):null)}getOverlays(e,t){const r=$o();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new e0(t,l);i.push(this.ue(e,f))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ci(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(bp(e).Y("collectionPathOverlayIndex",f))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=$o(),a=Ci(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bp(e).W("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=bl(this.It,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=$o();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bp(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,T)=>{const S=bl(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):T.done()}).next(()=>a)}ue(e,t){return bp(e).put(function(r,i,a){const[l,f,m]=Ch(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:mp(r.re,a.mutation)}}(this.It,this.userId,t))}}function bp(n){return Xr(n,"documentOverlays")}class Fc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Qn(e.integerValue));else if("doubleValue"in e){const r=Qn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),oh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(gl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Nb(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):at()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ye.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function SC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function r0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=SC(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Fc.Te=new Fc;class s0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=r0(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=r0(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zm{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Cp{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ip{constructor(){this.Be=new s0,this.Le=new zm(this.Be),this.Ue=new Cp(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Cl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cl(this.indexId,this.documentKey,this.arrayValue,r)}}function Il(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AC(n.arrayValue,e.arrayValue),0!==t?t:(t=AC(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function AC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class GS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=wv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Ic(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class o0{constructor(){this.Ye=new a0}addToCollectionParentIndex(e,t){return this.Ye.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Yi.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class a0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(un.comparator)).toArray()}}const u0=new Uint8Array(0);class qS{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new a0,this.Ze=new Nc(r=>bi(r),(r,i)=>ch(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Ci(i)};return xC(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Cc(t),""],!1,!0);return xC(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Go(l.parent))}return r})}addFieldIndex(e,t){const r=Tp(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=ka(e);return a.next(f=>{l.put(TC(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Tp(e),i=ka(e),a=Ma(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ma(e);let i=!0;const a=new Map;return he.forEach(this.tn(t),l=>this.en(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Nt();const f=[];return he.forEach(a,(m,v)=>{var T;Ve("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${bi(t)}`);const S=function(ct,dt){const xt=wv(dt);if(void 0===xt)return null;for(const Ft of Nm(ct,xt.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(v,m),k=function(ct,dt){const xt=new Map;for(const Ft of Ic(dt))for(const kr of Nm(ct,Ft.fieldPath))switch(kr.op){case"==":case"in":xt.set(Ft.fieldPath.canonicalString(),kr.value);break;case"not-in":case"!=":return xt.set(Ft.fieldPath.canonicalString(),kr.value),Array.from(xt.values())}return null}(v,m),U=function(ct,dt){const xt=[];let Ft=!0;for(const kr of Ic(dt)){const Ou=0===kr.kind?Lb(ct,kr.fieldPath,ct.startAt):Ub(ct,kr.fieldPath,ct.startAt);xt.push(Ou.value),Ft&&(Ft=Ou.inclusive)}return new Su(xt,Ft)}(v,m),z=function(ct,dt){const xt=[];let Ft=!0;for(const kr of Ic(dt)){const Ou=0===kr.kind?Ub(ct,kr.fieldPath,ct.endAt):Lb(ct,kr.fieldPath,ct.endAt);xt.push(Ou.value),Ft&&(Ft=Ou.inclusive)}return new Su(xt,Ft)}(v,m),ge=this.nn(m,v,U),Ie=this.nn(m,v,z),lt=this.sn(m,v,k),ht=this.rn(m.indexId,S,ge,U.inclusive,Ie,z.inclusive,lt);return he.forEach(ht,ct=>r.J(ct,t.limit).next(dt=>{dt.forEach(xt=>{const Ft=Ye.fromSegments(xt.documentKey);l.has(Ft)||(l=l.add(Ft),f.push(Ft))})}))}).next(()=>f)}return he.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),T=[];for(let S=0;S<m;++S){const k=t?this.on(t[S/v]):u0,U=this.un(e,k,r[S%v],i),z=this.cn(e,k,a[S%v],l),ge=f.map(Ie=>this.un(e,k,Ie,!0));T.push(...this.createRange(U,z,ge))}return T}un(e,t,r,i){const a=new Cl(e,Ye.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Cl(e,Ye.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new GS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.We(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;return he.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let f=new Mn(Er.comparator),m=!1;for(const v of l.filters){const T=v;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?m=!0:f=f.add(T.field))}for(const v of l.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Ip;for(const i of Ic(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Fc.Te.ce(a,l)}return r.$e()}on(e){const t=new Ip;return Fc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Ip;return Fc.Te.ce(Sc(this.databaseId,t),r.qe(function(i){const a=Ic(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Ip);let a=0;for(const l of Ic(e)){const f=r[a++];for(const m of i)if(this.ln(t,l.fieldPath)&&uh(f))i=this.fn(i,l,f);else{const v=m.qe(l.kind);Fc.Te.ce(f,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new Ip;m.seed(f.$e()),Fc.Te.ce(l,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Tp(e),i=ka(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return he.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,T){const S=T?new rp(T.sequenceNumber,new Yi(El(T.readTime),new Ye(Go(T.documentKey)),T.largestBatchId)):rp.empty(),k=v.fields.map(([U,z])=>new Cm(Er.fromServerFormat(U),z));return new bm(v.indexId,v.collectionGroup,k,S)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Tp(e),a=ka(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>he.forEach(f,m=>a.put(TC(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),he.forEach(f,m=>this.wn(e,i,m).next(v=>{const T=this.mn(a,m);return v.isEqual(T)?he.resolve():this.gn(e,a,m,v,T)}))))})}yn(e,t,r,i){return Ma(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Ma(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ma(e);let a=new Mn(Il);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,f)=>{a=a.add(new Cl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}mn(e,t){let r=new Mn(Il);const i=this.an(t,e);if(null==i)return r;const a=wv(t);if(null!=a){const l=e.data.field(a.fieldPath);if(uh(l))for(const f of l.arrayValue.values||[])r=r.add(new Cl(t.indexId,e.key,this.on(f),i))}else r=r.add(new Cl(t.indexId,e.key,u0,i));return r}gn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,T,S){const k=f.getIterator(),U=m.getIterator();let z=pl(k),ge=pl(U);for(;z||ge;){let Ie=!1,lt=!1;if(z&&ge){const ht=v(z,ge);ht<0?lt=!0:ht>0&&(Ie=!0)}else null!=z?lt=!0:Ie=!0;Ie?(T(ge),ge=pl(U)):lt?(S(z),z=pl(k)):(z=pl(k),ge=pl(U))}}(i,a,Il,f=>{l.push(this.yn(e,t,r,f))},f=>{l.push(this.pn(e,t,r,f))}),he.waitFor(l)}_n(e){let t=1;return ka(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Il(l,f)).filter((l,f,m)=>!f||0!==Il(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=Il(l,e),m=Il(l,t);if(0===f)i[0]=e.Ke();else if(f>0&&m<0)i.push(l),i.push(l.Ke());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,u0,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,u0,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WS)}getMinOffset(e,t){return he.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||at())).next(WS)}}function xC(n){return Xr(n,"collectionParents")}function Ma(n){return Xr(n,"indexEntries")}function Tp(n){return Xr(n,"indexConfiguration")}function ka(n){return Xr(n,"indexState")}function WS(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Tb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Yi(e.readTime,e.documentKey,t)}const l0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ZS(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:l},(T,S,k)=>(f++,k.delete()));a.push(m.next(()=>{Rt(1===f)}));const v=[];for(const T of t.mutations){const S=mC(e,T.key.path,t.batchId);a.push(i.delete(S)),v.push(T.key)}return he.waitFor(a).next(()=>v)}function Dp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(41943040,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);class c0{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Rt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new c0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Na(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ih(e),l=Na(e);return l.add({}).next(f=>{Rt("number"==typeof f);const m=new yp(f,t,r,i),v=function(k,U,z){const ge=z.baseMutations.map(lt=>mp(k.re,lt)),Ie=z.mutations.map(lt=>mp(k.re,lt));return{userId:U,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ge,mutations:Ie}}(this.It,this.userId,m),T=[];let S=new Mn((k,U)=>Bt(k.canonicalString(),U.canonicalString()));for(const k of i){const U=mC(this.userId,k.key.path,f);S=S.add(k.key.path.popLast()),T.push(l.put(v)),T.push(a.put(U,Yv))}return S.forEach(k=>{T.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.In[f]=m.keys()}),he.waitFor(T).next(()=>m)})}lookupMutationBatch(e,t){return Na(e).get(t).next(r=>r?(Rt(r.userId===this.userId),bh(this.It,r)):null)}Tn(e,t){return this.In[t]?he.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Na(e).Z({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(Rt(f.batchId>=r),a=bh(this.It,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Na(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Na(e).W("userMutationsIndex",t).next(r=>r.map(i=>bh(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ih(e).Z({range:i},(l,f,m)=>{const[v,T,S]=l,k=Go(T);if(v===this.userId&&t.path.isEqual(k))return Na(e).get(S).next(U=>{if(!U)throw at();Rt(U.userId===this.userId),a.push(bh(this.It,U))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Bt);const i=[];return t.forEach(a=>{const l=Wm(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=Ih(e).Z({range:f},(v,T,S)=>{const[k,U,z]=v,ge=Go(U);k===this.userId&&a.path.isEqual(ge)?r=r.add(z):S.done()});i.push(m)}),he.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Wm(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new Mn(Bt);return Ih(e).Z({range:l},(m,v,T)=>{const[S,k,U]=m,z=Go(k);S===this.userId&&r.isPrefixOf(z)?z.length===i&&(f=f.add(U)):T.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Na(e).get(a).next(l=>{if(null===l)throw at();Rt(l.userId===this.userId),r.push(bh(this.It,l))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ZS(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ih(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=Go(a[1]);i.push(m)}else f.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return d0(e,this.userId,t)}Rn(e){return RC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function d0(n,e,t){const r=Wm(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Ih(n).Z({range:a,X:!0},(f,m,v)=>{const[T,S,k]=f;T===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Na(n){return Xr(n,"mutations")}function Ih(n){return Xr(n,"documentMutations")}function RC(n){return Xr(n,"mutationQueues")}class Lc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Lc(0)}static vn(){return new Lc(-1)}}class MC{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Lc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>At.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Th(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Th(e).Z((l,f)=>{const m=wp(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Th(e).Z((r,i)=>{const a=wp(i);t(a)})}Vn(e){return kC(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Sn(e,t){return kC(e).put("targetGlobalKey",t)}Dn(e,t){return Th(e).put(Ep(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Th(e).Z({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=wp(f);ch(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Tl(e);return t.forEach(l=>{const f=Ci(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Tl(e);return he.forEach(t,a=>{const l=Ci(a.path);return he.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Tl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tl(e);let a=Nt();return i.Z({range:r,X:!0},(l,f,m)=>{const v=Go(l[1]),T=new Ye(v);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Ci(t.path),i=IDBKeyRange.bound([r],[Cc(r)],!1,!0);let a=0;return Tl(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return Th(e).get(t).next(r=>r?wp(r):null)}}function Th(n){return Xr(n,"targets")}function kC(n){return Xr(n,"targetGlobal")}function Tl(n){return Xr(n,"targetDocuments")}function NC([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class zS{constructor(e){this.xn=e,this.buffer=new Mn(NC),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();NC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ho(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Tc(r)}yield t.Fn(3e5)}))}}class Sp{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Qi.at);const r=new zS(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(l0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l0):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,f,m,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),vm()<=Vo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-T}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class PC{constructor(e,t){this.db=e,this.garbageCollector=new Sp(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Ap(e,r)}removeReference(e,t,r){return Ap(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ap(e,t)}Gn(e,t){return function(r,i){let a=!1;return RC(r).tt(l=>d0(r,l,i).next(f=>(f&&(a=!0),he.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,f)=>{if(f<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),Tl(e).delete([0,Ci(l.path)])))});i.push(m)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ap(e,t)}Kn(e,t){const r=Tl(e);let i,a=Qi.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==Qi.at&&t(new Ye(Go(i)),a),a=v,i=m):a=Qi.at}).next(()=>{a!==Qi.at&&t(new Ye(Go(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ap(n,e){return Tl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class h0{constructor(){this.changes=new Nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class OC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Uc(e).put(r)}removeEntry(e,t,r){return Uc(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],vp(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return Uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Dh(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return Uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Dh(t))},(i,a)=>{r={document:this.jn(t,a),size:Dp(a)}}).next(()=>r)}getEntries(e,t){let r=ps();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=ps(),i=new rr(Ye.comparator);return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);r=r.insert(a,f),i=i.insert(a,Dp(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Mn(VC);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(Dh(i.first()),Dh(i.last())),l=i.getIterator();let f=l.getNext();return Uc(e).Z({index:"documentKeyIndex",range:a},(m,v,T)=>{const S=Ye.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&VC(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?T.j(Dh(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),vp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uc(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let f=ps();for(const m of l){const v=this.jn(Ye.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=ps();const l=UC(t,r),f=UC(t,Yi.max());return Uc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,T)=>{const S=this.jn(Ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new FC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LC(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Qn(e,t){return LC(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function CC(n,e){let t;if(e.document)t=uC(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=El(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ye.fromSegments(e.unknownDocument.path),i=El(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new nr(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Hn.newInvalidDocument(e)}}function f0(n){return new OC(n)}class FC extends h0{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Nc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Mn((a,l)=>Bt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=IC(this.Yn.It,l);i=i.add(a.path.popLast()),r+=Dp(m)-f.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=IC(this.Yn.It,l.convertToNoDocument(At.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function LC(n){return Xr(n,"remoteDocumentGlobal")}function Uc(n){return Xr(n,"remoteDocumentsV14")}function Dh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UC(n,e){const t=e.documentKey.path.toArray();return[n,vp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VC(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class YS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sh{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Hm(r.mutation,i,fs.empty(),nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=$o();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=mh();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=$o();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=ps();const l=cp(),f=cp();return t.forEach((m,v)=>{const T=r.get(v.key);i.has(v.key)&&(void 0===T||T.mutation instanceof xa)?a=a.insert(v.key,v):void 0!==T&&(l.set(v.key,T.mutation.getFieldMask()),Hm(T.mutation,v,T.mutation.getFieldMask(),nr.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,T)=>l.set(v,T)),t.forEach((v,T)=>{var S;return f.set(v,new YS(T,null!==(S=l.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=cp();let i=new rr((l,f)=>l-f),a=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let T=r.get(m)||fs.empty();T=f.applyToLocalView(v,T),r.set(m,T);const S=(i.get(f.batchId)||Nt()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,T=m.value,S=jv();T.forEach(k=>{if(!a.has(k)){const U=Jb(t.get(k),r.get(k));null!==U&&S.set(k,U),a=a.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return he.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Um(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve($o());let f=-1,m=a;return l.next(v=>he.forEach(v,(T,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(T)?he.resolve():this.getBaseDocument(e,T,S).next(k=>{m=m.insert(T,k)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Nt())).next(T=>({batchId:f,changes:Bv(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=mh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=mh();return this.indexManager.getCollectionParents(e,i).next(l=>he.forEach(l,f=>{const m=(v=t,T=f.child(i),new Sa(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,Hn.newInvalidDocument(v)))});let l=mh();return i.forEach((f,m)=>{const v=a.get(f);void 0!==v&&Hm(v.mutation,m,fs.empty(),nr.now()),Nv(t,m)&&(l=l.insert(f,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Hn.newInvalidDocument(t))}}class QS{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return he.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:t0(r.bundledQuery),readTime:Jr(r.readTime)}),he.resolve();var r}}class p0{constructor(){this.overlays=new rr(Ye.comparator),this.es=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$o();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=$o(),a=t.length+1,l=new Ye(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new rr((v,T)=>v-T);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=a.get(v.largestBatchId);null===T&&(T=$o(),a=a.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const f=$o(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,T)=>f.set(v,T)),!(f.size()>=i)););return he.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new e0(t,r));let a=this.es.get(t);void 0===a&&(a=Nt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class uo{constructor(){this.ns=new Mn(si.ss),this.rs=new Mn(si.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new si(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new si(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ye(new un([])),r=new si(t,e),i=new si(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ye(new un([])),r=new si(t,e),i=new si(t,e+1);let a=Nt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new si(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ye.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||Ye.comparator(e.key,t.key)}}class g0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Mn(si.ss)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new yp(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new si(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);a.push(f)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Bt);return t.forEach(i=>{const a=new si(i,0),l=new si(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],f=>{r=r.add(f._s)})}),he.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ye.isDocumentKey(a)||(a=a.child(""));const l=new si(new Ye(a),0);let f=new Mn(Bt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m._s)),!0)},l),he.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return he.forEach(t.mutations,i=>{const a=new si(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new si(t,0),i=this.gs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xp{constructor(e){this.Es=e,this.docs=new rr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=ps();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=ps();const a=new Ye(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:f,value:{document:m}}=l.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Tb(bv(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}As(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JS(this)}getSize(e){return he.resolve(this.size)}}class JS extends h0{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class XS{constructor(e){this.persistence=e,this.Rs=new Nc(t=>bi(t),ch),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.bs=0,this.Ps=new uo,this.targetCount=0,this.vs=Lc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),he.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Lc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Dn(t),he.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Ps.containsKey(t))}}class BC{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Qi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new XS(this),this.indexManager=new o0,this.remoteDocumentCache=new xp(r=>this.referenceDelegate.xs(r)),this.It=new bC(t),this.Ns=new QS(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new p0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new g0(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new Km(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return he.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Km extends Db{constructor(e){super(),this.currentSequenceNumber=e}}class Vc{constructor(e){this.persistence=e,this.Fs=new uo,this.$s=null}static Bs(e){return new Vc(e)}get Ls(){if(this.$s)return this.$s;throw at()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),he.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,r=>{const i=Ye.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return he.or([()=>he.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class eA{constructor(e){this.It=e}$(e,t,r,i){const a=new nh("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0}),f.createObjectStore("documentMutations"),jC(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),jC(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").W().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0});const T=m.store("mutations"),S=v.map(k=>T.put(k));return he.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:vC});m.createIndex("collectionPathOverlayIndex",jS,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",HS,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:kS});m.createIndex("documentKeyIndex",_C),m.createIndex("collectionGroupIndex",NS)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:US}).createIndex("sequenceNumberIndex",VS,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:BS}).createIndex("documentKeyIndex",yC,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Dp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>he.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>he.forEach(f,m=>{Rt(m.userId===a.userId);const v=bh(this.It,m);return ZS(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const m=new un(l),v=[0,Ci(m)];a.push(t.get(v).next(T=>T?he.resolve():t.put({targetId:0,path:Ci(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:LS});const r=t.store("collectionParents"),i=new a0,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Ci(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const m=new un(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,m],v)=>{const T=Go(f);return a(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=wp(i),l=Ep(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Ye(un.fromString(v.document.name).popFirst(5)):v.noDocument?Ye.fromSegments(v.noDocument.path):v.unknownDocument?Ye.fromSegments(v.unknownDocument.path):at()).path.toArray();var v;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(T))}).next(()=>he.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=f0(this.It),a=new BC(Vc.Bs,this.It.re);return r.W().next(l=>{const f=new Map;return l.forEach(m=>{var v;let T=null!==(v=f.get(m.userId))&&void 0!==v?v:Nt();bh(this.It,m).keys().forEach(S=>T=T.add(S)),f.set(m.userId,T)}),he.forEach(f,(m,v)=>{const T=new Kr(v),S=Zm.oe(this.It,T),k=a.getIndexManager(T),U=c0.oe(T,this.It,k,a.referenceDelegate);return new Sh(i,U,S,k).recalculateAndSaveOverlaysForDocumentKeys(new _p(t,Qi.at),m).next()})})}}function jC(n){n.createObjectStore("targetDocuments",{keyPath:OS}).createIndex("documentTargetsIndex",FS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PS,{unique:!0}),n.createObjectStore("targetGlobal")}const Ym="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qm{constructor(e,t,r,i,a,l,f,m,v,T,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=f,this.Js=v,this.Ys=T,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=k=>Promise.resolve(),!Qm.C())throw new Oe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PC(this,i),this.ii=t+"main",this.It=new bC(m),this.ri=new Us(this.ii,this.Xs,new eA(this.It)),this.Cs=new MC(this.referenceDelegate,this.It),this.remoteDocumentCache=f0(this.It),this.Ns=new CR,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(me.FAILED_PRECONDITION,Ym);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Qi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ho(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Bc(e).get("owner").next(t=>he.resolve(this.mi(t)))}gi(e){return Rp(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Xr(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return he.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?he.resolve(!0):Bc(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Oe(me.FAILED_PRECONDITION,Ym);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rp(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _p(t,Qi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Rp(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return c0.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qS(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Zm.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Jv:14===l?EC:13===l?wC:12===l?$S:11===l?Qv:void at();var l;let f;return this.ri.runTransaction(e,i,a,m=>(f=new _p(m,this.Ss?this.Ss.next():Qi.at),"readwrite-primary"===t?this.fi(f).next(v=>!!v||this.di(f)).next(v=>{if(!v)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Oe(me.FAILED_PRECONDITION,Im);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Vi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Vi(e){return Bc(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(me.FAILED_PRECONDITION,Ym)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bc(e).put("owner",t)}static C(){return Us.C()}_i(e){const t=Bc(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bc(n){return Xr(n,"owner")}function Rp(n){return Xr(n,"clientMetadata")}function m0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Nt(),i=Nt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new _0(e,t.fromCache,r,i)}}class tA{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(Mv(t))return he.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Vm(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Nt(...a);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,f);return this.$i(t,v,l,m.readTime)?this.ki(e,Vm(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return Mv(t)||i.isEqual(At.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(vm()<=Vo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kv(t)),this.Bi(e,l,t,Ev(i,-1)))})}Fi(e,t){let r=new Mn(qb(e));return t.forEach((i,a)=>{Nv(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return vm()<=Vo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",kv(t)),this.Ni.getDocumentsMatchingQuery(e,t,Yi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class y0{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new rr(Bt),this.qi=new Nc(a=>bi(a),ch),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sh(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Jm(n,e,t,r){return new y0(n,e,t,r)}function v0(n,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,_e.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=Nt();for(const v of i){l.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}for(const v of a){f.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:f}))})})}),Mp.apply(this,arguments)}function w0(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const T=m.batch,S=T.keys();let k=he.resolve();return S.forEach(U=>{k=k.next(()=>v.getEntry(f,U)).next(z=>{const ge=m.docVersions.get(U);Rt(null!==ge),z.version.compareTo(ge)<0&&(T.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Nt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function HC(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function nA(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((T,S)=>{const k=i.get(S);if(!k)return;f.push(t.Cs.removeMatchingKeys(a,T.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,T.addedDocuments,S)));let U=k.withSequenceNumber(a.currentSequenceNumber);var z,ge,Ie;e.targetMismatches.has(S)?U=U.withResumeToken(Vr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(S,U),ge=U,Ie=T,(0===(z=k).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,U))});let m=ps(),v=Nt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),f.push($C(a,l,e.documentUpdates).next(T=>{m=T.Wi,v=T.zi})),!r.isEqual(At.min())){const T=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(T)}return he.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ui=i,a))}function $C(n,e,t){let r=Nt(),i=Nt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=ps();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(At.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):Ve("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function rA(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jc(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Ra(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Dl(n,e,t){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,_e.Z)(function*(n,e,t){const r=et(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ho(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Xm.apply(this,arguments)}function e_(n,e,t){const r=et(n);let i=At.min(),a=Nt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const T=et(f),S=T.qi.get(v);return void 0!==S?he.resolve(T.Ui.get(S)):T.Cs.getTargetData(m,v)}(r,l,Ji(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:At.min(),t?a:Nt())).next(f=>(GC(r,Gb(e),f),{documents:f,Hi:a})))}function E0(n,e){const t=et(n),r=et(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function b0(n,e){const t=et(n),r=t.Ki.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Ev(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(GC(t,e,i),i))}function GC(n,e,t){let r=n.Ki.get(e)||At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function t_(){return t_=(0,_e.Z)(function*(n,e,t,r){const i=et(n);let a=Nt(),l=ps();for(const v of t){const T=e.Ji(v.metadata.name);v.document&&(a=a.add(T));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(T,S)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield jc(i,(v=r,Ji(Rc(un.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>$C(v,f,l).next(T=>(f.apply(v),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,T.Wi,T.zi)).next(()=>T.Wi)))}),t_.apply(this,arguments)}function iA(n,e){return n_.apply(this,arguments)}function n_(){return n_=(0,_e.Z)(function*(n,e,t=Nt()){const r=yield jc(n,Ji(t0(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(Vr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),n_.apply(this,arguments)}function WC(n,e){return`firestore_clients_${n}_${e}`}function Fi(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sl(n,e){return`firestore_targets_${n}_${e}`}class r_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Oe(i.error.code,i.error.message))),l?new r_(e,t,i.state,a):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Oe(r.error.code,r.error.message))),a?new kp(e,r.state,i):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class C0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gm();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=hS(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new C0(e,a):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hc{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Hc(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class I0{constructor(){this.activeTargetIds=Gm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Np{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rr(Bt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=WC(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new I0),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(WC(e.persistenceKey,i));if(a){const l=C0.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Sl(this.persistenceKey,e));if(r){const i=kp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sl(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Qi.at;if(null!=a)try{const f=JSON.parse(a);Rt("number"==typeof f),l=f}catch(f){wr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Qi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new r_(this.currentUser,e,t,r),a=Fi(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Fi(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Sl(this.persistenceKey,e),a=new kp(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return C0.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return r_.Zi(new Kr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return kp.Zi(i,t)}yr(e){return Hc.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Gm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ZC{constructor(){this.Lr=new I0,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new I0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zC{qr(e){}shutdown(){}}class KC{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T0{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class YC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Ve("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,a),this.fo(e,l,f,r).then(m=>(Ve("RestConnection","Received: ",m),m),m=>{throw bc("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ec,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${sA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const f=new Eb;f.setWithCredentials(!0),f.listenOnce(Xd.COMPLETE,()=>{var v;try{switch(f.getLastErrorCode()){case dl.NO_ERROR:const T=f.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(T)),a(T);break;case dl.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Oe(me.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const S=f.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',S,"response text:",f.getResponseText()),S>0){let k=f.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=null===(v=k)||void 0===v?void 0:v.error;if(U&&U.status&&U.message){const z=function(ge){const Ie=ge.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(Ie)>=0?Ie:me.UNKNOWN}(U.status);l(new Oe(z,U.message))}else l(new Oe(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Oe(me.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qd(),l=Jd(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new wb({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=i.join("");Ve("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let T=!1,S=!1;const k=new T0({Hr:z=>{S?Ve("Connection","Not sending because WebChannel is closed:",z):(T||(Ve("Connection","Opening WebChannel transport."),v.open(),T=!0),Ve("Connection","WebChannel sending:",z),v.send(z))},Jr:()=>v.close()}),U=(z,ge,Ie)=>{z.listen(ge,lt=>{try{Ie(lt)}catch(ht){setTimeout(()=>{throw ht},0)}})};return U(v,tp.EventType.OPEN,()=>{S||Ve("Connection","WebChannel transport opened.")}),U(v,tp.EventType.CLOSE,()=>{S||(S=!0,Ve("Connection","WebChannel transport closed"),k.io())}),U(v,tp.EventType.ERROR,z=>{S||(S=!0,bc("Connection","WebChannel transport errored:",z),k.io(new Oe(me.UNAVAILABLE,"The operation could not be completed")))}),U(v,tp.EventType.MESSAGE,z=>{var ge;if(!S){const Ie=z.data[0];Rt(!!Ie);const lt=Ie,ht=lt.error||(null===(ge=lt[0])||void 0===ge?void 0:ge.error);if(ht){Ve("Connection","WebChannel received error:",ht);const ct=ht.status;let dt=function(Ft){const kr=Br[Ft];if(void 0!==kr)return fr(kr)}(ct),xt=ht.message;void 0===dt&&(dt=me.INTERNAL,xt="Unknown error status: "+ct+" with message "+ht.message),S=!0,k.io(new Oe(dt,xt)),v.close()}else Ve("Connection","WebChannel received:",Ie),k.ro(Ie)}}),U(l,eh.STAT_EVENT,z=>{z.stat===wc.PROXY?Ve("Connection","Detected buffering proxy"):z.stat===wc.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.so()},0),k}}function D0(){return"undefined"!=typeof window?window:null}function $c(){return"undefined"!=typeof document?document:null}function Gc(n){return new iC(n,!0)}class QC{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class S0{constructor(e,t,r,i,a,l,f,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new QC(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Oe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oA extends S0{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function gp(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:at(),i=e.targetChange.targetIds||[],a=function(m,v){return m.gt?(Rt(void 0===v||"string"==typeof v),Vr.fromBase64String(v||"")):(Rt(void 0===v||v instanceof Uint8Array),Vr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?me.UNKNOWN:fr(m.code);return new Oe(v,m.message||"")}(l);t=new $v(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Au(n,r.document.name),a=Jr(r.document.updateTime),l=new jn({mapValue:{fields:r.document.fields}}),f=Hn.newFoundDocument(i,a,l);t=new hp(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Au(n,r.document),a=r.readTime?Jr(r.readTime):At.min(),l=Hn.newNoDocument(i,a);t=new hp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Au(n,r.document);t=new hp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,a=new $m(r.count||0);t=new Hv(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Jr(a.readTime):At.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=vh(this.It),t.addTarget=function(i,a){let l;const f=a.target;return l=km(f)?{documents:cC(i,f)}:{query:Zv(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Gv(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(l.readTime=yh(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function AS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=vh(this.It),t.removeTarget=e,this.Bo(t)}}class JC extends S0{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function SS(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let a=Jr(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Jr(i)),new Qb(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.Zo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=vh(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mp(this.It,r))};this.Bo(t)}}class i_ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Oe(me.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(me.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(me.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class x0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(wr(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class R0{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(f=>{r.enqueueAndForget((0,_e.Z)(function*(){var m;Pa(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,_e.Z)(function*(v){const T=et(v);T._u.add(4),yield Ah(T),T.gu.set("Unknown"),T._u.delete(4),yield s_(T)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new x0(r,i)}}function s_(n){return M0.apply(this,arguments)}function M0(){return M0=(0,_e.Z)(function*(n){if(Pa(n))for(const e of n.wu)yield e(!0)}),M0.apply(this,arguments)}function Ah(n){return o_.apply(this,arguments)}function o_(){return o_=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),o_.apply(this,arguments)}function Pp(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),P0(t)?N0(t):Lp(t).ko()&&a_(t,e))}function Op(n,e){const t=et(n),r=Lp(t);t.du.delete(e),r.ko()&&k0(t,e),0===t.du.size&&(r.ko()?r.Fo():Pa(t)&&t.gu.set("Unknown"))}function a_(n,e){n.yu.Mt(e.targetId),Lp(n).zo(e)}function k0(n,e){n.yu.Mt(e),Lp(n).Ho(e)}function N0(n){n.yu=new fp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Lp(n).start(),n.gu.uu()}function P0(n){return Pa(n)&&!Lp(n).No()&&n.du.size>0}function Pa(n){return 0===et(n)._u.size}function eI(n){n.yu=void 0}function tI(n){return u_.apply(this,arguments)}function u_(){return u_=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{a_(n,e)})}),u_.apply(this,arguments)}function nI(n,e){return l_.apply(this,arguments)}function l_(){return l_=(0,_e.Z)(function*(n,e){eI(n),P0(n)?(n.gu.hu(e),N0(n)):n.gu.set("Unknown")}),l_.apply(this,arguments)}function aA(n,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof $v&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield F0(n,r)}else if(e instanceof hp?n.yu.Gt(e):e instanceof Hv?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(At.min()))try{const r=yield HC(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.du.get(f);if(!m)return;i.du.set(f,m.withResumeToken(Vr.EMPTY_BYTE_STRING,m.snapshotVersion)),k0(i,f);const v=new Ra(m.target,f,1,m.sequenceNumber);a_(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield F0(n,r)}var r}),O0.apply(this,arguments)}function F0(n,e,t){return c_.apply(this,arguments)}function c_(){return c_=(0,_e.Z)(function*(n,e,t){if(!Ho(e))throw e;n._u.add(1),yield Ah(n),n.gu.set("Offline"),t||(t=()=>HC(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield s_(n)}))}),c_.apply(this,arguments)}function uA(n,e){return e().catch(t=>F0(n,t,e))}function Fp(n){return rI.apply(this,arguments)}function rI(){return rI=(0,_e.Z)(function*(n){const e=et(n),t=xu(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;IR(e);)try{const i=yield rA(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,TR(e,i)}catch(i){yield F0(e,i)}lA(e)&&cA(e)}),rI.apply(this,arguments)}function IR(n){return Pa(n)&&n.fu.length<10}function TR(n,e){n.fu.push(e);const t=xu(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function lA(n){return Pa(n)&&!xu(n).No()&&n.fu.length>0}function cA(n){xu(n).start()}function DR(n){return xh.apply(this,arguments)}function xh(){return xh=(0,_e.Z)(function*(n){xu(n).eu()}),xh.apply(this,arguments)}function SR(n){return d_.apply(this,arguments)}function d_(){return d_=(0,_e.Z)(function*(n){const e=xu(n);for(const t of n.fu)e.Xo(t.mutations)}),d_.apply(this,arguments)}function L0(n,e,t){return h_.apply(this,arguments)}function h_(){return h_=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),i=Xv.from(r,e,t);yield uA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fp(n)}),h_.apply(this,arguments)}function iI(n,e){return sI.apply(this,arguments)}function sI(){return sI=(0,_e.Z)(function*(n,e){var t;e&&xu(n).Yo&&(yield(t=(0,_e.Z)(function*(r,i){if(lp(a=i.code)&&a!==me.ABORTED){const l=r.fu.shift();xu(r).Mo(),yield uA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Fp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),lA(n)&&cA(n)}),sI.apply(this,arguments)}function f_(n,e){return p_.apply(this,arguments)}function p_(){return p_=(0,_e.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Pa(t);t._u.add(3),yield Ah(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield s_(t)}),p_.apply(this,arguments)}function g_(n,e){return m_.apply(this,arguments)}function m_(){return m_=(0,_e.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield s_(t)):e||(t._u.add(2),yield Ah(t),t.gu.set("Unknown"))}),m_.apply(this,arguments)}function Lp(n){return n.pu||(n.pu=function(e,t,r){const i=et(e);return i.su(),new oA(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:tI.bind(null,n),Zr:nI.bind(null,n),Wo:aA.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Mo(),P0(n)?N0(n):n.gu.set("Unknown")):(yield n.pu.stop(),eI(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function xu(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.su(),new JC(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:DR.bind(null,n),Zr:iI.bind(null,n),tu:SR.bind(null,n),Zo:L0.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Mo(),yield Fp(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class U0{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new U0(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Al(n,e){if(wr("AsyncQueue",`${e}: ${n}`),Ho(n))return new Oe(me.UNAVAILABLE,`${e}: ${n}`);throw n}class Rh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=mh(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Rh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Rh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dA{constructor(){this.Tu=new rr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):at():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Up{constructor(e,t,r,i,a,l,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Up(e,t,Rh.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class AR{constructor(){this.Au=void 0,this.listeners=[]}}class hA{constructor(){this.queries=new Nc(e=>$b(e),up),this.onlineState="Unknown",this.Ru=new Set}}function V0(n,e){return B0.apply(this,arguments)}function B0(){return B0=(0,_e.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new AR),i)try{a.Au=yield t.onListen(r)}catch(l){const f=Al(l,`Initialization of query '${kv(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&Vs(t)}),B0.apply(this,arguments)}function oI(n,e){return j0.apply(this,arguments)}function j0(){return j0=(0,_e.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),j0.apply(this,arguments)}function H0(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&Vs(t)}function fA(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Vs(n){n.Ru.forEach(e=>{e.next()})}class $0{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Up(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Up.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class G0{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class aI{constructor(e){this.It=e}Ji(e){return Au(this.It,e)}Yi(e){return e.metadata.exists?uC(this.It,e.document,!1):Hn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Jr(e)}}class pA{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=__(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=un.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new aI(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Nt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function qC(n,e,t,r){return t_.apply(this,arguments)}(e.localStore,new aI(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield iA(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function __(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class q0{constructor(e){this.key=e}}class W0{constructor(e){this.key=e}}class uI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Nt(),this.mutatedKeys=Nt(),this.Gu=qb(e),this.Qu=new Rh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new dA,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const k=i.get(T),U=Nv(this.query,S)?S:null,z=!!k&&this.mutatedKeys.has(k.key),ge=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Ie=!1;k&&U?k.data.isEqual(U.data)?z!==ge&&(r.track({type:3,doc:U}),Ie=!0):this.Hu(k,U)||(r.track({type:2,doc:U}),Ie=!0,(m&&this.Gu(U,m)>0||v&&this.Gu(U,v)<0)&&(f=!0)):!k&&U?(r.track({type:0,doc:U}),Ie=!0):k&&!U&&(r.track({type:1,doc:k}),Ie=!0,(m||v)&&(f=!0)),Ie&&(U?(l=l.add(U),a=ge?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Qu:l,zu:r,$i:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,T)=>function(S,k){const U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return U(S)-U(k)}(v.type,T.type)||this.Gu(v.doc,T.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,m=f!==this.qu;return this.qu=f,0!==a.length||m?{snapshot:new Up(this.query,e.Qu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new dA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Nt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new W0(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new q0(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Nt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Up.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class lI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cI{constructor(e){this.key=e,this.nc=!1}}class gA{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Nc(f=>$b(f),up),this.rc=new Map,this.oc=new Set,this.uc=new rr(Ye.comparator),this.cc=new Map,this.ac=new uo,this.hc={},this.lc=new Map,this.fc=Lc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function mA(n,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,_e.Z)(function*(n,e){const t=$p(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield jc(t.localStore,Ji(e));t.isPrimaryClient&&Pp(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Bs(t,e,r,"current"===f,l.resumeToken)}return i}),Vp.apply(this,arguments)}function Bs(n,e,t,r,i){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,_e.Z)(function*(n,e,t,r,i){n._c=(S,k,U)=>{return(z=(0,_e.Z)(function*(ge,Ie,lt,ht){let ct=Ie.view.Wu(lt);ct.$i&&(ct=yield e_(ge.localStore,Ie.query,!1).then(({documents:Ft})=>Ie.view.Wu(Ft,ct)));const dt=ht&&ht.targetChanges.get(Ie.targetId),xt=Ie.view.applyChanges(ct,ge.isPrimaryClient,dt);return ew(ge,Ie.targetId,xt.Xu),xt.snapshot}),function(ge,Ie,lt,ht){return z.apply(this,arguments)})(n,S,k,U);var z};const a=yield e_(n.localStore,e,!0),l=new uI(e,a.Hi),f=l.Wu(a.documents),m=wl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,m);ew(n,t,v.Xu);const T=new lI(e,t,l);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),Z0.apply(this,arguments)}function xR(n,e){return z0.apply(this,arguments)}function z0(){return z0=(0,_e.Z)(function*(n,e){const t=et(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!up(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Op(t.remoteStore,r.targetId),qc(t,r.targetId)}).catch(Tc))):(qc(t,r.targetId),yield Dl(t.localStore,r.targetId,!0))}),z0.apply(this,arguments)}function K0(){return K0=(0,_e.Z)(function*(n,e,t){const r=Mh(n);try{const i=yield function(a,l){const f=et(a),m=nr.now(),v=l.reduce((k,U)=>k.add(U.key),Nt());let T,S;return f.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=ps(),z=Nt();return f.Gi.getEntries(k,v).next(ge=>{U=ge,U.forEach((Ie,lt)=>{lt.isValidDocument()||(z=z.add(Ie))})}).next(()=>f.localDocuments.getOverlayedDocuments(k,U)).next(ge=>{T=ge;const Ie=[];for(const lt of l){const ht=Uv(lt,T.get(lt.key).overlayedDocument);null!=ht&&Ie.push(new xa(lt.key,ht,Ob(ht.value.mapValue),Jn.exists(!0)))}return f.mutationQueue.addMutationBatch(k,m,Ie,l)}).next(ge=>{S=ge;const Ie=ge.applyToLocalDocumentSet(T,z);return f.documentOverlayCache.saveOverlays(k,ge.batchId,Ie)})}).then(()=>({batchId:S.batchId,changes:Bv(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.hc[a.currentUser.toKey()];m||(m=new rr(Bt)),m=m.insert(l,f),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield xl(r,i.changes),yield Fp(r.remoteStore)}catch(i){const a=Al(i,"Failed to persist write");t.reject(a)}}),K0.apply(this,arguments)}function hI(n,e){return y_.apply(this,arguments)}function y_(){return y_=(0,_e.Z)(function*(n,e){const t=et(n);try{const r=yield nA(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Rt(l.nc):i.removedDocuments.size>0&&(Rt(l.nc),l.nc=!1))}),yield xl(t,r,e)}catch(r){yield Tc(r)}}),y_.apply(this,arguments)}function fI(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=et(a);f.onlineState=l;let m=!1;f.queries.forEach((v,T)=>{for(const S of T.listeners)S.bu(l)&&(m=!0)}),m&&Vs(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RR(n,e,t){return v_.apply(this,arguments)}function v_(){return v_=(0,_e.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new rr(Ye.comparator);l=l.insert(a,Hn.newNoDocument(a,At.min()));const f=Nt().add(a),m=new dp(At.min(),new Map,new Mn(Bt),l,f);yield hI(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),gI(r)}else yield Dl(r.localStore,e,!1).then(()=>qc(r,e,t)).catch(Tc)}),v_.apply(this,arguments)}function pI(n,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,_e.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield w0(t.localStore,e);J0(t,r,null),E_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield xl(t,i)}catch(i){yield Tc(i)}}),Y0.apply(this,arguments)}function _A(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,_e.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const f=et(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(T=>(Rt(null!==T),v=T.keys(),f.mutationQueue.removeMutationBatch(m,T))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);J0(r,e,t),E_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield xl(r,i)}catch(i){yield Tc(i)}}),w_.apply(this,arguments)}function Bp(){return Bp=(0,_e.Z)(function*(n,e){const t=et(n);Pa(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Al(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Bp.apply(this,arguments)}function E_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function J0(n,e,t){const r=et(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function qc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||X0(n,r)})}function X0(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Op(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),gI(n))}function ew(n,e,t){for(const r of t)r instanceof q0?(n.ac.addReference(r.key,e),yA(n,r)):r instanceof W0?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||X0(n,r.key)):at()}function yA(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),gI(n))}function gI(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ye(un.fromString(e)),r=n.fc.next();n.cc.set(r,new cI(t)),n.uc=n.uc.insert(t,r),Pp(n.remoteStore,new Ra(Ji(Rc(t.path)),r,2,Qi.at))}}function xl(n,e,t){return b_.apply(this,arguments)}function b_(){return b_=(0,_e.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,m)=>{l.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,(null==v?void 0:v.fromCache)?"not-current":"current"),v){i.push(v);const T=_0.Ci(m.targetId,v);a.push(T)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(f=(0,_e.Z)(function*(m,v){const T=et(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>he.forEach(v,k=>he.forEach(k.Si,U=>T.persistence.referenceDelegate.addReference(S,k.targetId,U)).next(()=>he.forEach(k.Di,U=>T.persistence.referenceDelegate.removeReference(S,k.targetId,U)))))}catch(S){if(!Ho(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const k=S.targetId;if(!S.fromCache){const U=T.Ui.get(k),ge=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ui=T.Ui.insert(k,ge)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),b_.apply(this,arguments)}function vA(n,e){return tw.apply(this,arguments)}function tw(){return tw=(0,_e.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield v0(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(f=>{f.reject(new Oe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xl(t,r.ji)}var i}),tw.apply(this,arguments)}function wA(n,e){const t=et(n),r=t.cc.get(e);if(r&&r.nc)return Nt().add(r.key);{let i=Nt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const f=t.ic.get(l);i=i.unionWith(f.view.ju)}return i}}function MR(n,e){return mI.apply(this,arguments)}function mI(){return mI=(0,_e.Z)(function*(n,e){const t=et(n),r=yield e_(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&ew(t,e.targetId,i.Xu),i}),mI.apply(this,arguments)}function kR(n,e){return _I.apply(this,arguments)}function _I(){return _I=(0,_e.Z)(function*(n,e){const t=et(n);return b0(t.localStore,e).then(r=>xl(t,r))}),_I.apply(this,arguments)}function NR(n,e,t,r){return nw.apply(this,arguments)}function nw(){return nw=(0,_e.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,f){const m=et(l),v=et(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.Tn(T,f).next(S=>S?m.localDocuments.getDocuments(T,S):he.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Fp(i.remoteStore):"acknowledged"===t||"rejected"===t?(J0(i,e,r||null),E_(i,e),f=e,et(et(i.localStore).mutationQueue).An(f)):at(),yield xl(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),nw.apply(this,arguments)}function rw(){return rw=(0,_e.Z)(function*(n,e){const t=et(n);if($p(t),Mh(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yI(t,r.toArray());t.dc=!0,yield g_(t.remoteStore,!0);for(const a of i)Pp(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(qc(t,l),Dl(t.localStore,l,!0))),Op(t.remoteStore,l)}),yield i,yield yI(t,r),function(a){const l=et(a);l.cc.forEach((f,m)=>{Op(l.remoteStore,m)}),l.ac.fs(),l.cc=new Map,l.uc=new rr(Ye.comparator)}(t),t.dc=!1,yield g_(t.remoteStore,!1)}}),rw.apply(this,arguments)}function yI(n,e,t){return I_.apply(this,arguments)}function I_(){return I_=(0,_e.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let f;const m=r.rc.get(l);if(m&&0!==m.length){f=yield jc(r.localStore,Ji(m[0]));for(const v of m){const T=r.ic.get(v),S=yield MR(r,T);S.snapshot&&a.push(S.snapshot)}}else{const v=yield E0(r.localStore,l);f=yield jc(r.localStore,v),yield Bs(r,Rl(v),l,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(a),i}),I_.apply(this,arguments)}function Rl(n){return Rv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function vI(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function iw(n,e,t,r){return jp.apply(this,arguments)}function jp(){return jp=(0,_e.Z)(function*(n,e,t,r){const i=et(n);if(i.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield b0(i.localStore,Gb(a[0])),f=dp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vr.EMPTY_BYTE_STRING);yield xl(i,l,f);break}case"rejected":yield Dl(i.localStore,e,!0),qc(i,e,r);break;default:at()}}),jp.apply(this,arguments)}function EA(n,e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,_e.Z)(function*(n,e,t){const r=$p(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield E0(r.localStore,i),l=yield jc(r.localStore,a);yield Bs(r,Rl(a),l.targetId,!1,l.resumeToken),Pp(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Dl(r.localStore,i,!1).then(()=>{Op(r.remoteStore,i),qc(r,i)}).catch(Tc))}}),Hp.apply(this,arguments)}function $p(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RR.bind(null,e),e.sc.Wo=H0.bind(null,e.eventManager),e.sc.wc=fA.bind(null,e.eventManager),e}function Mh(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_A.bind(null,e),e}class bA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=Gc(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Jm(this.persistence,new tA,e.initialUser,this.It)}yc(e){return new BC(Vc.Bs,this.It)}gc(e){return new ZC}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class CA extends bA{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Mh(r.Ac.syncEngine),yield Fp(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Jm(this.persistence,new tA,e.initialUser,this.It)}Tc(e,t){return new KS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Ab(t,this.persistence);return new Iv(e.asyncQueue,r)}yc(e){const t=m0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new Qm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,D0(),$c(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ZC}}class OR extends CA{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Np&&(r.sharedClientState.syncEngine={Fr:NR.bind(null,i),$r:iw.bind(null,i),Br:EA.bind(null,i),vi:vI.bind(null,i),Mr:kR.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,_e.Z)(function*(l){yield function C_(n,e){return rw.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=D0();if(!Np.C(t))throw new Oe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=m0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Np(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class T_{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>fI(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vA.bind(null,r.syncEngine),yield g_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hA}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),r=new YC(e.databaseInfo);return new i_(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>fI(this.syncEngine,f,0),l=KC.C()?new KC:new zC,new R0(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const T=new gA(r,i,a,l,f,m);return v&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=et(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Ah(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function sw(n,e,t){if(!t)throw new Oe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wI(n,e,t,r){if(!0===e&&!0===r)throw new Oe(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EI(n){if(!Ye.isDocumentKey(n))throw new Oe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bI(n){if(Ye.isDocumentKey(n))throw new Oe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gp(n);throw new Oe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ow(n,e){if(e<=0)throw new Oe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const CI=new Map;class II{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new II({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new II(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wR;switch(t.type){case"gapi":return new oS(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=CI.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),CI.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class Ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class lo extends Ii{constructor(e,t,r){super(e,t,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new Ye(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function TI(n,e,...t){if(n=(0,L.m9)(n),sw("collection","path",e),n instanceof kh){const r=un.fromString(e,...t);return bI(r),new lo(n,null,r)}{if(!(n instanceof ir||n instanceof lo))throw new Oe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return bI(r),new lo(n.firestore,null,r)}}function aw(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=vv.R()),sw("doc","path",e),n instanceof kh){const r=un.fromString(e,...t);return EI(r),new ir(n,null,new Ye(r))}{if(!(n instanceof ir||n instanceof lo))throw new Oe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return EI(r),new ir(n.firestore,n instanceof lo?n.converter:null,new Ye(r))}}function TA(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof ir||n instanceof lo)&&(e instanceof ir||e instanceof lo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DI(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Ii&&e instanceof Ii&&n.firestore===e.firestore&&up(n._query,e._query)&&n.converter===e.converter}function SI(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class S_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class FR{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new G0(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const f=et(a),m=vh(f.It)+"/documents",v={documents:l.map(U=>qm(f.It,U))},T=yield f._o("BatchGetDocuments",m,v,l.length),S=new Map;T.forEach(U=>{const z=function lC(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=Au(t,r.found.name),a=Jr(r.found.updateTime),l=new jn({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=Au(t,r.missing),a=Jr(r.readTime);return Hn.newNoDocument(i,a)}(n,e):at()}(f.It,U);S.set(z.key.toString(),z)});const k=[];return l.forEach(U=>{const z=S.get(U.toString());Rt(!!z),k.push(z)}),k}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ye.fromPath(i);e.mutations.push(new Vv(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=et(i),f=vh(l.It)+"/documents",m={writes:a.map(v=>mp(l.It,v))};yield l.ao("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Jn.exists(!1):Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Oe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DA{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new QC(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,_e.Z)(function*(){const t=new VR(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!sh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!lp(t)}return!1}}class BR{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Kr.UNAUTHENTICATED,this.clientId=vv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Al(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function SA(n,e){return AI.apply(this,arguments)}function AI(){return AI=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield v0(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),AI.apply(this,arguments)}function AA(n,e){return s.apply(this,arguments)}function s(){return s=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield o(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>f_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>f_(e.remoteStore,a)),n.onlineComponents=e}),s.apply(this,arguments)}function o(n){return u.apply(this,arguments)}function u(){return u=(0,_e.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield SA(n,new bA)),n.offlineComponents}),u.apply(this,arguments)}function c(n){return h.apply(this,arguments)}function h(){return h=(0,_e.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield AA(n,new T_)),n.onlineComponents}),h.apply(this,arguments)}function p(n){return o(n).then(e=>e.persistence)}function y(n){return o(n).then(e=>e.localStore)}function E(n){return c(n).then(e=>e.remoteStore)}function I(n){return c(n).then(e=>e.syncEngine)}function R(n){return V.apply(this,arguments)}function V(){return V=(0,_e.Z)(function*(n){const e=yield c(n),t=e.eventManager;return t.onListen=mA.bind(null,e.syncEngine),t.onUnlisten=xR.bind(null,e.syncEngine),t}),V.apply(this,arguments)}function He(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,f,m){const v=new S_({next:S=>{a.enqueueAndForget(()=>oI(i,T));const k=S.docs.has(l);!k&&S.fromCache?m.reject(new Oe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&f&&"server"===f.source?m.reject(new Oe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new $0(Rc(l.path),v,{includeMetadataChanges:!0,Nu:!0});return V0(i,T)}(yield R(n),n.asyncQueue,e,t,r)})),r.promise}function ot(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,f,m){const v=new S_({next:S=>{a.enqueueAndForget(()=>oI(i,T)),S.fromCache&&"server"===f.source?m.reject(new Oe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new $0(l,v,{includeMetadataChanges:!0,Nu:!0});return V0(i,T)}(yield R(n),n.asyncQueue,e,t,r)})),r.promise}class In{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new QC(this,"async_queue_retry"),this.Wc=()=>{const t=$c();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=$c();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=$c();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Yr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ho(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=U0.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&at()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Xi(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Wc{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class On extends kh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new In,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||A_(this),this._firestoreClient.terminate()}}function pr(n){return n._firestoreClient||A_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function A_(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Rb(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new BR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function x_(n,e,t){const r=new Yr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield SA(n,t),yield AA(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;bc("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function jR(n){if(n._initialized||n._terminated)throw new Oe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(Vr.fromBase64String(e))}catch(t){throw new Oe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ml(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qp{constructor(e){this._methodName=e}}class MI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const kF=/^__.*__$/;class NF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class HR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $R(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class kI{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new kI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return OI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($R(this.sa)&&kF.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class PF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Gc(e)}da(e,t,r,i=!1){return new kI({sa:e,methodName:t,fa:r,path:Er.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Wp(n){const e=n._freezeSettings(),t=Gc(n._databaseId);return new PF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NI(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);kA("Data must be an object, but it was:",l,r);const f=WR(r,l);let m,v;if(a.merge)m=new fs(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const k=NA(e,S,t);if(!l.contains(k))throw new Oe(me.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);zR(T,k)||T.push(k)}m=new fs(T),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new NF(new jn(f),m,v)}class dw extends qp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dw}}function GR(n,e,t){return new kI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class xA extends qp{_toFieldTransform(e){return new fh(e.path,new hh)}isEqual(e){return e instanceof xA}}class OF extends qp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=GR(this,e,!0),r=this._a.map(a=>Zp(a,t)),i=new yl(r);return new fh(e.path,i)}isEqual(e){return this===e}}class FF extends qp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=GR(this,e,!0),r=this._a.map(a=>Zp(a,t)),i=new vl(r);return new fh(e.path,i)}isEqual(e){return this===e}}class LF extends qp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Mc(e.It,zb(e.It,this.wa));return new fh(e.path,t)}isEqual(e){return this===e}}function RA(n,e,t,r){const i=n.da(1,e,t);kA("Data must be an object, but it was:",i,r);const a=[],l=jn.empty();fl(r,(m,v)=>{const T=PI(e,m,t);v=(0,L.m9)(v);const S=i.ca(T);if(v instanceof dw)a.push(T);else{const k=Zp(v,S);null!=k&&(a.push(T),l.set(T,k))}});const f=new fs(a);return new HR(l,f,i.fieldTransforms)}function MA(n,e,t,r,i,a){const l=n.da(1,e,t),f=[NA(e,r,t)],m=[i];if(a.length%2!=0)throw new Oe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)f.push(NA(e,a[k])),m.push(a[k+1]);const v=[],T=jn.empty();for(let k=f.length-1;k>=0;--k)if(!zR(v,f[k])){const U=f[k];let z=m[k];z=(0,L.m9)(z);const ge=l.ca(U);if(z instanceof dw)v.push(U);else{const Ie=Zp(z,ge);null!=Ie&&(v.push(U),T.set(U,Ie))}}const S=new fs(v);return new HR(T,S,l.fieldTransforms)}function qR(n,e,t,r=!1){return Zp(t,n.da(r?4:3,e))}function Zp(n,e){if(ZR(n=(0,L.m9)(n)))return kA("Unsupported field value:",e,n),WR(n,e);if(n instanceof qp)return function(t,r){if(!$R(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Zp(l,r.aa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zb(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=nr.fromDate(t);return{timestampValue:yh(r.It,i)}}if(t instanceof nr){const i=new nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yh(r.It,i)}}if(t instanceof MI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ml)return{bytesValue:Gv(r.It,t._byteString)};if(t instanceof ir){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Gp(t)}`)}(n,e)}function WR(n,e){const t={};return Tv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fl(n,(r,i)=>{const a=Zp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function ZR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof MI||n instanceof Ml||n instanceof ir||n instanceof qp)}function kA(n,e,t){if(!ZR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Gp(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function NA(n,e,t){if((e=(0,L.m9)(e))instanceof Zc)return e._internalPath;if("string"==typeof e)return PI(n,e);throw OI("Field path arguments must be of type string or ",n,!1,void 0,t)}const UF=new RegExp("[~\\*/\\[\\]]");function PI(n,e,t){if(e.search(UF)>=0)throw OI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zc(...e.split("."))._internalPath}catch(r){throw OI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function OI(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Oe(me.INVALID_ARGUMENT,f+n+m)}function zR(n,e){return n.some(t=>t.isEqual(e))}class hw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new VF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class VF extends hw{data(){return super.data()}}function FI(n,e){return"string"==typeof e?PI(n,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}function KR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fw{}function Nh(n,...e){for(const t of e)n=t._apply(n);return n}class BF extends fw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Wp(e.firestore),r=function(i,a,l,f,m,v,T){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Oe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){tM(T,v);const U=[];for(const z of T)U.push(eM(f,i,z));S={arrayValue:{values:U}}}else S=eM(f,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||tM(T,v),S=qR(l,"where",T,"in"===v||"not-in"===v);const k=Qr.create(m,v,S);return function(U,z){if(z.dt()){const Ie=Lm(U);if(null!==Ie&&!Ie.isEqual(z.field))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${z.field.toString()}'`);const lt=Fm(U);null!==lt&&nM(0,z.field,lt)}const ge=function(Ie,lt){for(const ht of Ie.filters)if(lt.indexOf(ht.op)>=0)return ht.op;return null}(U,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ge)throw new Oe(me.INVALID_ARGUMENT,ge===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ge.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ii(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class HF extends fw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Oe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new xc(i,a);return function(f,m){if(null===Fm(f)){const v=Lm(f);null!==v&&nM(0,v,m.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Ii(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Sa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YR extends fw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ii(e.firestore,e.converter,Vm(e._query,this.Ia,this.Ta))}}class QR extends fw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=XR(e,this.type,this.Ea,this.Aa);return new Ii(e.firestore,e.converter,(i=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class JR extends fw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=XR(e,this.type,this.Ea,this.Aa);return new Ii(e.firestore,e.converter,(i=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function XR(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof hw)return function(i,a,l,f,m){if(!f)throw new Oe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const T of dh(i))if(T.field.isKeyField())v.push(Sc(a,f.key));else{const S=f.data.field(T.field);if(Dm(S))throw new Oe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=T.field.canonicalString();throw new Oe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}v.push(S)}return new Su(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Wp(n.firestore);return function(a,l,f,m,v,T){const S=a.explicitOrderBy;if(v.length>S.length)throw new Oe(me.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let U=0;U<v.length;U++){const z=v[U];if(S[U].field.isKeyField()){if("string"!=typeof z)throw new Oe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof z}`);if(!Um(a)&&-1!==z.indexOf("/"))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${z}' contains a slash.`);const ge=a.path.child(un.fromString(z));if(!Ye.isDocumentKey(ge))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const Ie=new Ye(ge);k.push(Sc(l,Ie))}else{const ge=qR(f,m,z);k.push(ge)}}return new Su(k,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eM(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Oe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Um(e)&&-1!==t.indexOf("/"))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Ye.isDocumentKey(r))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sc(n,new Ye(r))}if(t instanceof ir)return Sc(n,t._key);throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gp(t)}.`)}function tM(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nM(n,e,t){if(!t.isEqual(e))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class PA{convertValue(e,t="none"){switch(_l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return fl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new MI(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ih(e));default:return null}}convertTimestamp(e){const t=Ia(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);Rt(pC(r));const i=new Tu(r.get(1),r.get(3)),a=new Ye(r.popFirst(5));return i.isEqual(t)||wr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function LI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YF extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zc extends hw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pw extends zc{data(e={}){return super.data(e)}}class Ph{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pw(this._firestore,this._userDataWriter,r.key,r,new zp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new pw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new zp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new pw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new zp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:QF(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function rM(n,e){return n instanceof zc&&e instanceof zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ph&&e instanceof Ph&&n._firestore===e._firestore&&DI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Oh extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function iM(n,e,t){n=Jt(n,ir);const r=Jt(n.firestore,On),i=LI(n.converter,e,t);return R_(r,[NI(Wp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Jn.none())])}function sM(n,e,t,...r){n=Jt(n,ir);const i=Jt(n.firestore,On),a=Wp(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Zc?MA(a,"updateDoc",n._key,e,t,r):RA(a,"updateDoc",n._key,e),R_(i,[l.toMutation(n._key,Jn.exists(!0))])}function oM(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Xi(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(Xi(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,T;if(n instanceof ir)v=Jt(n.firestore,On),T=Rc(n._key.path),m={next:S=>{e[l]&&e[l](OA(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=Jt(n,Ii);v=Jt(S.firestore,On),T=S._query;const k=new Oh(v);m={next:U=>{e[l]&&e[l](new Ph(v,k,S,U))},error:e[l+1],complete:e[l+2]},KR(n._query)}return function(S,k,U,z){const ge=new S_(z),Ie=new $0(k,ge,U);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return V0(yield R(S),Ie)})),()=>{ge.bc(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return oI(yield R(S),Ie)}))}}(pr(v),T,f,m)}function R_(n,e){return function(t,r){const i=new Yr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function dI(n,e,t){return K0.apply(this,arguments)}(yield I(t),r,i)})),i.promise}(pr(n),e)}function OA(n,e,t){const r=t.docs.get(e._key),i=new Oh(n);return new zc(n,i,e._key,r,new zp(t.hasPendingWrites,t.fromCache),e.converter)}const aL={maxAttempts:5};class aM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wp(e)}set(e,t,r){this._verifyNotCommitted();const i=Fh(e,this._firestore),a=LI(i.converter,t,r),l=NI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Fh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Zc?MA(this._dataReader,"WriteBatch.update",a._key,t,r,i):RA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fh(e,this._firestore);return this._mutations=this._mutations.concat(new gh(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Oe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wp(e)}get(e){const t=Fh(e,this._firestore),r=new YF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const a=i[0];if(a.isFoundDocument())return new hw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new hw(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Fh(e,this._firestore),a=LI(i.converter,t,r),l=NI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Fh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Zc?MA(this._dataReader,"Transaction.update",a._key,t,r,i):RA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Fh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fh(e,this._firestore),r=new Oh(this._firestore);return super.get(e).then(i=>new zc(this._firestore,r,t._key,i._document,new zp(!1,!1),t.converter))}}function FA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lM(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function cM(){if(!function dS(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ec=Wi.SDK_VERSION,(0,Wi._registerComponent)(new io.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new On(new _v(t.getProvider("auth-internal")),new ER(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Oe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Wi.registerVersion)(mv,"3.7.3",n),(0,Wi.registerVersion)(mv,"3.7.3","esm2017")}();class gw{constructor(e){this._delegate=e}static fromBase64String(e){return cM(),new gw(Ml.fromBase64String(e))}static fromUint8Array(e){return lM(),new gw(Ml.fromUint8Array(e))}toBase64(){return cM(),this._delegate.toBase64()}toUint8Array(){return lM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LA(n){return function _L(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yL{enableIndexedDbPersistence(e,t){return function lw(n,e){jR(n=Jt(n,On));const t=pr(n),r=n._freezeSettings(),i=new T_;return x_(t,i,new CA(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cw(n){jR(n=Jt(n,On));const e=pr(n),t=n._freezeSettings(),r=new T_;return x_(e,r,new OR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function DF(n){if(n._initialized&&!n._terminated)throw new Oe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Us.C())return Promise.resolve();const i=r+"main";yield Us.delete(i)}),function(r){return t.apply(this,arguments)})(m0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class dM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function D_(n,e,t,r={}){var i;const a=(n=Jt(n,kh))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&bc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Kr.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Oe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Kr(m)}n._authCredentials=new sS(new Cb(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function AF(n){return function K(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield p(n),t=yield E(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i._u.delete(0),s_(i)}(t)}))}(pr(n=Jt(n,On)))}(this._delegate)}disableNetwork(){return function xF(n){return function ne(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield p(n),t=yield E(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=et(i);a._u.add(0),yield Ah(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(pr(n=Jt(n,On)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function SF(n){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Q0(n,e){return Bp.apply(this,arguments)}(yield I(e),t)})),t.promise}(pr(n=Jt(n,On)))}(this._delegate)}onSnapshotsInSync(e){return function oL(n,e){return function ke(n,e){const t=new S_(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield R(n),i=t,et(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield R(n),i=t,void et(r).Ru.delete(i);var r,i}))}}(pr(n=Jt(n,On)),Xi(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new M_(this,TI(this._delegate,e))}catch(t){throw js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,aw(this._delegate,e))}catch(t){throw js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,function IA(n,e){if(n=Jt(n,kh),sw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ii(n,null,(t=e,new Sa(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lL(n,e,t){n=Jt(n,On);const r=Object.assign(Object.assign({},aL),t);return function(i){if(i.maxAttempts<1)throw new Oe(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Yr;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const m=yield function A(n){return c(n).then(e=>e.datastore)}(i);new DA(i.asyncQueue,m,l,a,f).run()})),f.promise}(pr(n),i=>e(new uL(n,i)),r)}(this._delegate,t=>e(new hM(this,t)))}batch(){return pr(this._delegate),new fM(new aM(this._delegate,e=>R_(this._delegate,e)))}loadBundle(e){return function RF(n,e){const t=pr(n=Jt(n,On)),r=new Wc;return function Dt(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return SI(m,v);if(m instanceof ArrayBuffer)return SI(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new FR(m,l);var m}(t,Gc(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function PR(n,e,t){const r=et(n);var i;(i=(0,_e.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(k,U){const z=et(k),ge=Jr(U.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ie=>z.Ns.getBundleMetadata(Ie,U.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(ge)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(k=m).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);f._updateProgress(__(m));const v=new pA(m,a.localStore,l.It);let T=yield l.mc();for(;T;){const k=yield v.Fu(T);k&&f._updateProgress(k),T=yield l.mc()}const S=yield v.complete();return yield xl(a,S.Lu,void 0),yield function(k,U){const z=et(k);return z.persistence.runTransaction("Save bundle","readwrite",ge=>z.Ns.saveBundleMetadata(ge,U))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return bc("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var k}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield I(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function MF(n,e){return function Xt(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield y(n),e)}))}(pr(n=Jt(n,On)),e).then(t=>t?new Ii(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hs(this,t):null)}}class UI extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new gw(new Ml(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class hM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new UI(e)}get(e){const t=Yp(e);return this._delegate.get(t).then(r=>new mw(this._firestore,new zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Yp(e);return r?(FA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Yp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}}class fM{constructor(e){this._delegate=e}set(e,t,r){const i=Yp(e);return r?(FA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Yp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _w(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Kp(e,new UI(e),t),i.set(t,a)),a}}Kp.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new ir(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Oa(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new M_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new M_(this.firestore,TI(this._delegate,e))}catch(t){throw js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof ir&&TA(this._delegate,e)}set(e,t){t=FA("DocumentReference.set",t);try{return t?iM(this._delegate,e,t):iM(this._delegate,e)}catch(r){throw js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sM(this._delegate,e):sM(this._delegate,e,t,...r)}catch(i){throw js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iL(n){return R_(Jt(n.firestore,On),[new gh(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=pM(e),r=gM(e,i=>new mw(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function XF(n){n=Jt(n,ir);const e=Jt(n.firestore,On),t=pr(e),r=new Oh(e);return function Ce(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const f=yield function(m,v){const T=et(m);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Oe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Al(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield y(n),e,t);var r})),t.promise}(t,n._key).then(i=>new zc(e,r,n._key,i,new zp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function eL(n){n=Jt(n,ir);const e=Jt(n.firestore,On);return He(pr(e),n._key,{source:"server"}).then(t=>OA(e,n,t))}(this._delegate):function JF(n){n=Jt(n,ir);const e=Jt(n.firestore,On);return He(pr(e),n._key).then(t=>OA(e,n,t))}(this._delegate),t.then(r=>new mw(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function js(n,e,t){return n.message=n.message.replace(e,t),n}function pM(n){for(const e of n)if("object"==typeof e&&!LA(e))return e;return{}}function gM(n,e){var t,r;let i;return i=LA(n[0])?n[0]:LA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rM(this._delegate,e._delegate)}}class _w extends mw{data(e){const t=this._delegate.data(e);return function iS(n,e){n||at()}(void 0!==t),t}}class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UI(e)}where(e,t,r){try{return new Hs(this.firestore,Nh(this._delegate,function jF(n,e,t){const r=e,i=FI("where",n);return new BF(i,r,t)}(e,t,r)))}catch(i){throw js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hs(this.firestore,Nh(this._delegate,function $F(n,e="asc"){const t=e,r=FI("orderBy",n);return new HF(r,t)}(e,t)))}catch(r){throw js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,Nh(this._delegate,function GF(n){return ow("limit",n),new YR("limit",n,"F")}(e)))}catch(t){throw js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,Nh(this._delegate,function qF(n){return ow("limitToLast",n),new YR("limitToLast",n,"L")}(e)))}catch(t){throw js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,Nh(this._delegate,function WF(...n){return new QR("startAt",n,!0)}(...e)))}catch(t){throw js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,Nh(this._delegate,function ZF(...n){return new QR("startAfter",n,!1)}(...e)))}catch(t){throw js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,Nh(this._delegate,function zF(...n){return new JR("endBefore",n,!1)}(...e)))}catch(t){throw js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,Nh(this._delegate,function KF(...n){return new JR("endAt",n,!0)}(...e)))}catch(t){throw js(t,"endAt()","Query.endAt()")}}isEqual(e){return DI(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function nL(n){n=Jt(n,Ii);const e=Jt(n.firestore,On),t=pr(e),r=new Oh(e);return function Qe(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const f=yield e_(i,a,!0),m=new uI(a,f.Hi),v=m.Wu(f.documents),T=m.applyChanges(v,!1);l.resolve(T.snapshot)}catch(f){const m=Al(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield y(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ph(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function rL(n){n=Jt(n,Ii);const e=Jt(n.firestore,On),t=pr(e),r=new Oh(e);return ot(t,n._query,{source:"server"}).then(i=>new Ph(e,r,n,i))}(this._delegate):function tL(n){n=Jt(n,Ii);const e=Jt(n.firestore,On),t=pr(e),r=new Oh(e);return KR(n._query),ot(t,n._query).then(i=>new Ph(e,r,n,i))}(this._delegate),t.then(r=>new UA(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=pM(e),r=gM(e,i=>new UA(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oM(this._delegate,t,r)}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}class wL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _w(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _w(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _w(this._firestore,r))})}isEqual(e){return rM(this._delegate,e._delegate)}}class M_ extends Hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?aw(this._delegate):aw(this._delegate,e))}catch(t){throw js(t,"doc()","CollectionReference.doc()")}}add(e){return function sL(n,e){const t=Jt(n.firestore,On),r=aw(n),i=LI(n.converter,e);return R_(t,[NI(Wp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return TA(this._delegate,e._delegate)}withConverter(e){return new M_(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function Yp(n){return Jt(n,ir)}class VA{constructor(...e){this._delegate=new Zc(...e)}static documentId(){return new VA(Er.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dL(){return new xA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qp(e)}static delete(){const e=function cL(){return new dw("deleteField")}();return e._methodName="FieldValue.delete",new Qp(e)}static arrayUnion(...e){const t=function hL(...n){return new OF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qp(t)}static arrayRemove(...e){const t=function fL(...n){return new FF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qp(t)}static increment(e){const t=function pL(n){return new LF("increment",n)}(e);return t._methodName="FieldValue.increment",new Qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const EL={Firestore:dM,GeoPoint:MI,Timestamp:nr,Blob:gw,Transaction:hM,WriteBatch:fM,DocumentReference:Oa,DocumentSnapshot:mw,Query:Hs,QueryDocumentSnapshot:_w,QuerySnapshot:UA,CollectionReference:M_,FieldPath:VA,FieldValue:Qp,setLogLevel:function vL(n){!function bb(n){Iu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function CL(n){(function bL(n,e){n.INTERNAL.registerComponent(new io.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},EL)))})(n,(e,t)=>new dM(e,t,new yL)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Sy.Z);var yw=O(6451),VI=O(5363),IL=O(6063);class TL extends $i.x{constructor(e=1/0,t=1/0,r=IL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var mM=O(3099);function _M(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,mM.B)({connector:()=>new TL(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yM(n,e){return(0,Or.m)(e)?xn(()=>n,e):xn(()=>n)}var BA=O(9468);O(5867);const HA=new Map,wM={activated:!1,tokenObservers:[]},RL={initialized:!1,enabled:!1};function es(n){return HA.get(n)||Object.assign({},wM)}function jI(){return RL}class FL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function LL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $s=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bM(n){if(!es(n).activated)throw $s.create("use-before-activation",{appName:n.name})}function qA(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,_e.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const U=yield l.getHeartbeatsHeader();U&&(a["X-Firebase-Client"]=U)}const f={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,f)}catch(U){throw $s.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==m.status)throw $s.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(U){throw $s.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const T=v.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw $s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(T[1]),k=Date.now();return{token:v.token,expireTimeMillis:k+S,issuedAtTimeMillis:k}}),WA.apply(this,arguments)}function jL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const vw="firebase-app-check-store";let GI=null;function IM(){return GI||(GI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e($s.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(vw,{keyPath:"compositeKey"})}}catch(r){e($s.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),GI)}function ZA(){return ZA=(0,_e.Z)(function*(n,e){const r=(yield IM()).transaction(vw,"readwrite"),a=r.objectStore(vw).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f($s.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),ZA.apply(this,arguments)}const ww=new Vo.Yd("@firebase/app-check");function YA(n,e){return(0,L.hl)()?function qL(n,e){return function TM(n,e){return ZA.apply(this,arguments)}(function SM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ww.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function AM(){return jI().enabled}function xM(){return JA.apply(this,arguments)}function JA(){return JA=(0,_e.Z)(function*(){const n=jI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),JA.apply(this,arguments)}const QL={error:"UNKNOWN_ERROR"};function JL(n){return L.US.encodeString(JSON.stringify(n),!1)}function qI(n){return XA.apply(this,arguments)}function XA(){return XA=(0,_e.Z)(function*(n,e=!1){const t=n.app;bM(t);const r=es(t);let a,i=r.token;if(i&&!k_(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(k_(m)?i=m:yield YA(t,void 0))}if(!e&&i&&k_(i))return{token:i.token};let f,l=!1;if(AM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qA(jL(t,yield xM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield YA(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield es(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?ww.warn(m.message):ww.error(m),a=m}return i?a?f=k_(i)?{token:i.token,internalError:a}:kM(a):(f={token:i.token},r.token=i,yield YA(t,i)):f=kM(a),l&&MM(t,f),f}),XA.apply(this,arguments)}function tx(n,e){const t=es(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function RM(n){const{app:e}=n,t=es(e);let r=t.tokenRefresher;r||(r=function XL(n){const{app:e}=n;return new FL((0,_e.Z)(function*(){let r;if(r=es(e).token?yield qI(n,!0):yield qI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=es(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function MM(n,e){const t=es(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function k_(n){return n.expireTimeMillis-Date.now()>0}function kM(n){return{token:JL(QL),error:n}}class e2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=es(this.app);for(const t of e)tx(this.app,t.next);return Promise.resolve()}}const BM="app-check-internal";!function p2(){(0,Wi._registerComponent)(new io.wA("app-check",n=>function t2(n,e){return new e2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(BM).initialize()})),(0,Wi._registerComponent)(new io.wA(BM,n=>function n2(n){return{getToken:e=>qI(n,e),addTokenListener:e=>function ex(n,e,t,r){const{app:i}=n,a=es(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&k_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),RM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>RM(n))}(n,"INTERNAL",e),removeTokenListener:e=>tx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wi.registerVersion)("@firebase/app-check","0.5.17")}();class Ew{constructor(){return(0,pn.vb)("app-check")}}"undefined"!=typeof window&&window;var ZI=O(127);const ox=new d.OlP("angularfire2.auth.use-emulator"),ax=new d.OlP("angularfire2.auth.settings"),ux=new d.OlP("angularfire2.auth.tenant-id"),lx=new d.OlP("angularfire2.auth.langugage-code"),cx=new d.OlP("angularfire2.auth.use-device-language"),dx=new d.OlP("angularfire.auth.persistence"),hx=(n,e,t,r,i,a,l,f)=>(0,Lr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,T]of Object.entries(l))m.settings[v]=T;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let bw=(()=>{class n{constructor(t,r,i,a,l,f,m,v,T,S,k,U){const z=new $i.x,ge=rt(void 0).pipe((0,VI.Q)(l.outsideAngular),xn(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,gt.U)(()=>(0,Lr.on)(t,a,r)),(0,gt.U)(Ie=>hx(Ie,a,f,v,T,S,m,k)),_M({bufferSize:1,refCount:!1}));if(qr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{ge.pipe(cu()).subscribe();const lt=ge.pipe(xn(dt=>dt.getRedirectResult().then(xt=>xt,()=>null)),pn.iC,_M({bufferSize:1,refCount:!1})),ht=ge.pipe(xn(dt=>new yr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>dt.onAuthStateChanged(Ft=>xt.next(Ft),Ft=>xt.error(Ft),()=>xt.complete()))})))),ct=ge.pipe(xn(dt=>new yr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>dt.onIdTokenChanged(Ft=>xt.next(Ft),Ft=>xt.error(Ft),()=>xt.complete()))}))));this.authState=lt.pipe(yM(ht),(0,BA.R)(l.outsideAngular),(0,VI.Q)(l.insideAngular)),this.user=lt.pipe(yM(ct),(0,BA.R)(l.outsideAngular),(0,VI.Q)(l.insideAngular)),this.idToken=this.user.pipe(xn(dt=>dt?(0,An.D)(dt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(xn(dt=>dt?(0,An.D)(dt.getIdTokenResult()):rt(null))),this.credential=(0,yw.T)(lt,z,this.authState.pipe(En(dt=>!dt))).pipe((0,gt.U)(dt=>(null==dt?void 0:dt.user)?dt:null),(0,BA.R)(l.outsideAngular),(0,VI.Q)(l.insideAngular))}return(0,Lr.pX)(this,ge,a,{spy:{apply:(Ie,lt,ht)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&ht.then(ct=>z.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lr.Dh),d.LFG(Lr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(ox,8),d.LFG(ax,8),d.LFG(ux,8),d.LFG(lx,8),d.LFG(cx,8),d.LFG(dx,8),d.LFG(Ew,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),w2=(()=>{class n{constructor(){ZI.Z.registerVersion("angularfire",pn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bw]}),n})();function HM(n,e){return function E2(n,e=cc.z){return new yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function fx(n,e){return HM(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function zI(n,e){return fx(n,e).pipe(di(void 0),RE(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(T=>T.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function $M(n,e,t){return zI(n,t).pipe(hi((r,i)=>function C2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function I2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return px(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return px(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return px(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Dy(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function px(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function GM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class qM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),RE(),En(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return $M(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return fx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new WM(this.ref.doc(e),this.afs)}}class WM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=KM(r,t);return new qM(i,a,this.afs)}snapshotChanges(){return function b2(n,e){return HM(n,e).pipe(di(void 0),RE(),(0,gt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(pn.iC)}}class T2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zI(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),En(t=>t.length>0),pn.iC):zI(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return $M(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return fx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(pn.iC)}}const ZM=new d.OlP("angularfire2.enableFirestorePersistence"),zM=new d.OlP("angularfire2.firestore.persistenceSettings"),D2=new d.OlP("angularfire2.firestore.settings"),S2=new d.OlP("angularfire2.firestore.use-emulator");function KM(n,e=(t=>t)){return{query:e(n),ref:n}}let YM=(()=>{class n{constructor(t,r,i,a,l,f,m,v,T,S,k,U,z,ge,Ie,lt,ht){this.schedulers=m;const ct=(0,Lr.on)(t,f,r),dt=T;S&&hx(ct,f,k,z,ge,Ie,U,lt),[this.firestore,this.persistenceEnabled$]=(0,Lr.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const xt=f.runOutsideAngular(()=>ct.firestore());if(a&&xt.settings(a),dt&&xt.useEmulator(...dt),i&&!qr(l)){const Ft=()=>{try{return(0,An.D)(xt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(kr){return"undefined"!=typeof console&&console.warn(kr),rt(!1)}};return[xt,f.runOutsideAngular(Ft)]}return[xt,rt(!1)]},[a,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=KM(i,r),f=this.schedulers.ngZone.run(()=>a);return new qM(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new T2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new WM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lr.Dh),d.LFG(Lr.xv,8),d.LFG(ZM,8),d.LFG(D2,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(zM,8),d.LFG(S2,8),d.LFG(bw,8),d.LFG(ox,8),d.LFG(ax,8),d.LFG(ux,8),d.LFG(lx,8),d.LFG(cx,8),d.LFG(dx,8),d.LFG(Ew,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A2=(()=>{class n{constructor(){ZI.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ZM,useValue:!0},{provide:zM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[YM]}),n})(),kl=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new ND.Q).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(YM),d.LFG(bw),d.LFG(mi),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Jp=(()=>{class n extends QM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Nl=new d.OlP("NgValueAccessor"),M2={provide:Nl,useExisting:(0,d.Gpc)(()=>KI),multi:!0},N2=new d.OlP("CompositionEventMode");let KI=(()=>{class n extends QM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function k2(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(N2,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([M2]),d.qOj]}),n})();function Lh(n){return null==n||0===n.length}function XM(n){return null!=n&&"number"==typeof n.length}const ms=new d.OlP("NgValidators"),Uh=new d.OlP("NgAsyncValidators"),P2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ek{static min(e){return function tk(n){return e=>{if(Lh(e.value)||Lh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function nk(n){return e=>{if(Lh(e.value)||Lh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return rk(e)}static requiredTrue(e){return function ik(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function sk(n){return Lh(n.value)||P2.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ok(n){return e=>Lh(e.value)||!XM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ak(n){return e=>XM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function uk(n){if(!n)return YI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Lh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return pk(e)}static composeAsync(e){return gk(e)}}function rk(n){return Lh(n.value)?{required:!0}:null}function YI(n){return null}function lk(n){return null!=n}function ck(n){const e=(0,d.QGY)(n)?(0,An.D)(n):n;return(0,d.CqO)(e),e}function dk(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function hk(n,e){return e.map(t=>t(n))}function fk(n){return n.map(e=>function O2(n){return!n.validate}(e)?e:t=>e.validate(t))}function pk(n){if(!n)return null;const e=n.filter(lk);return 0==e.length?null:function(t){return dk(hk(t,e))}}function gx(n){return null!=n?pk(fk(n)):null}function gk(n){if(!n)return null;const e=n.filter(lk);return 0==e.length?null:function(t){return function x2(...n){const e=(0,ou.jO)(n),{args:t,keys:r}=Co(n),i=new yr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let T=0;T<l;T++){let S=!1;(0,Gi.Xf)(t[T]).subscribe((0,wn.x)(a,k=>{S||(S=!0,v--),f[T]=k},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?Wu(r,f):f),a.complete())}))}});return e?i.pipe(qu(e)):i}(hk(t,e).map(ck)).pipe((0,gt.U)(dk))}}function mx(n){return null!=n?gk(fk(n)):null}function mk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _k(n){return n._rawValidators}function yk(n){return n._rawAsyncValidators}function _x(n){return n?Array.isArray(n)?n:[n]:[]}function QI(n,e){return Array.isArray(n)?n.includes(e):n===e}function vk(n,e){const t=_x(e);return _x(n).forEach(i=>{QI(t,i)||t.push(i)}),t}function wk(n,e){return _x(e).filter(t=>!QI(n,t))}class Ek{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vh extends Ek{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gs extends Ek{get formDirective(){return null}get path(){return null}}class bk{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Ck=(()=>{class n extends bk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vh,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),N_=(()=>{class n extends bk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Gs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Cw(n,e){wx(n,e),e.valueAccessor.writeValue(n.value),function $2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Tk(n,e)})}(n,e),function q2(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function G2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Tk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function H2(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function eT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),nT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function tT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wx(n,e){const t=_k(n);null!==e.validator?n.setValidators(mk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=yk(n);null!==e.asyncValidator?n.setAsyncValidators(mk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();tT(e._rawValidators,i),tT(e._rawAsyncValidators,i)}function nT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=_k(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=yk(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return tT(e._rawValidators,r),tT(e._rawAsyncValidators,r),t}function Tk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Dk(n,e){wx(n,e)}function Ak(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Cx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Iw="VALID",rT="INVALID",P_="PENDING",Tw="DISABLED";function Tx(n){return(iT(n)?n.validators:n)||null}function xk(n){return Array.isArray(n)?gx(n):n||null}function Dx(n,e){return(iT(e)?e.asyncValidators:n)||null}function Rk(n){return Array.isArray(n)?mx(n):n||null}function iT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Sx=n=>n instanceof xx,sT=n=>n instanceof oT,Mk=n=>n instanceof Ok;function kk(n){return Sx(n)?n.value:n.getRawValue()}function Nk(n,e){const t=sT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function Pk(n,e){sT(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new d.vHH(1002,"")})}class Ax{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=xk(this._rawValidators),this._composedAsyncValidatorFn=Rk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Iw}get invalid(){return this.status===rT}get pending(){return this.status==P_}get disabled(){return this.status===Tw}get enabled(){return this.status!==Tw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=xk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Rk(e)}addValidators(e){this.setValidators(vk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wk(e,this._rawAsyncValidators))}hasValidator(e){return QI(this._rawValidators,e)}hasAsyncValidator(e){return QI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=P_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Iw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Iw||this.status===P_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tw:Iw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=P_,this._hasOwnPendingAsyncValidator=!0;const t=ck(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function K2(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=sT(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:Mk(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Tw:this.errors?rT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(P_)?P_:this._anyControlsHaveStatus(rT)?rT:Iw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xx extends Ax{constructor(e=null,t,r){super(Tx(t),Dx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class oT extends Ax{constructor(e,t,r){super(Tx(t),Dx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Pk(this,e),Object.keys(e).forEach(r=>{Nk(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=kk(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ok extends Ax{constructor(e,t,r){super(Tx(t),Dx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Pk(this,e),e.forEach((r,i)=>{Nk(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>kk(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Y2={provide:Gs,useExisting:(0,d.Gpc)(()=>Xp)},Dw=(()=>Promise.resolve(null))();let Xp=(()=>{class n extends Gs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new oT({},gx(t),mx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Cw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dw.then(()=>{const r=this._findContainer(t.path),i=new oT({});Dk(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Dw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Ak(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ms,10),d.Y36(Uh,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Y2]),d.qOj]}),n})(),O_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const X2={provide:Nl,useExisting:(0,d.Gpc)(()=>Rx),multi:!0};let Rx=(()=>{class n extends Jp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([X2]),d.qOj]}),n})(),Bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Mx=new d.OlP("NgModelWithFormControlWarning"),iU={provide:Gs,useExisting:(0,d.Gpc)(()=>aT)};let aT=(()=>{class n extends Gs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(nT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Cw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){eT(t.control||null,t,!1),Cx(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Ak(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(eT(r||null,t),Sx(i)&&(Cw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Dk(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function W2(n,e){return nT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wx(this.form,this),this._oldForm&&nT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ms,10),d.Y36(Uh,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([iU]),d.qOj,d.TTD]}),n})();const aU={provide:Vh,useExisting:(0,d.Gpc)(()=>Px)};let Px=(()=>{class n extends Vh{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function bx(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===KI?t=a:function z2(n){return Object.getPrototypeOf(n.constructor)===Jp}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Ex(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function XI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Gs,13),d.Y36(ms,10),d.Y36(Uh,10),d.Y36(Nl,10),d.Y36(Mx,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([aU]),d.qOj,d.TTD]}),n})(),eg=(()=>{class n{constructor(){this._validator=YI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const _U={provide:ms,useExisting:(0,d.Gpc)(()=>uT),multi:!0};let uT=(()=>{class n extends eg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function pU(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>rk}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([_U]),d.qOj]}),n})(),nN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Bk]]}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[nN]}),n})(),rN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mx,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[nN]}),n})(),TU=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let f,a=null,l=null;return null!=r&&(function IU(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,l=null!=r.asyncValidators?r.asyncValidators:null,f=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,l=null!=r.asyncValidator?r.asyncValidator:null)),new oT(i,{asyncValidators:l,updateOn:f,validators:a})}control(t,r,i){return new xx(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new Ok(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return Sx(t)||sT(t)||Mk(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:rN}),n})(),DU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kl))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-forgor-password"]],decls:12,vars:0,consts:[[1,"flex","px-2","w-full","bg-banner-left","h-screen","align-middle"],[1,"p-4","w-full","max-w-sm","bg-white","rounded-lg","border","border-gray-200","shadow-md","sm:p-6","md:p-8","dark:bg-gray-800","dark:border-gray-700","m-auto"],["action","#",1,"space-y-6"],[1,"text-xl","font-medium","text-gray-900","dark:text-white"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","email","name","email","id","email","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white"],["passwordResetEmail",""],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"h5",3),d._uU(4,"Sign in to our platform"),d.qZA(),d.TgZ(5,"div")(6,"label",4),d._uU(7,"Your email"),d.qZA(),d._UZ(8,"input",5,6),d.qZA(),d.TgZ(10,"button",7),d.NdJ("click",function(){d.CHM(i);const l=d.MAs(9);return r.authService.ForgotPassword(l.value)}),d._uU(11,"Reset Password"),d.qZA()()()()}},directives:[O_,N_,Xp],styles:[""]}),n})(),SU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kl))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:29,vars:0,consts:[[1,"flex","px-2","w-full","bg-banner-left","h-screen","align-middle"],[1,"p-4","w-full","max-w-sm","bg-white","rounded-lg","border","border-gray-200","shadow-md","sm:p-6","md:p-8","dark:bg-gray-800","dark:border-gray-700","m-auto"],["action","#",1,"space-y-6"],[1,"text-xl","font-medium","text-gray-900","dark:text-white"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","email","name","email","id","email","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white"],[1,"flex","items-start"],[1,"flex","items-center","h-5"],["id","remember","type","checkbox","value","","required","",1,"w-4","h-4","bg-gray-50","rounded","border","border-gray-300","focus:ring-3","focus:ring-blue-300","dark:bg-gray-700","dark:border-gray-600","dark:focus:ring-blue-600","dark:ring-offset-gray-800"],["for","remember",1,"ml-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["routerLink","/forgot-password",1,"ml-auto","text-sm","text-blue-700","hover:underline","dark:text-blue-500"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-300"],["routerLink","/register",1,"text-blue-700","hover:underline","dark:text-blue-500"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"h5",3),d._uU(4,"Sign in to our platform"),d.qZA(),d.TgZ(5,"div")(6,"label",4),d._uU(7,"Your email"),d.qZA(),d._UZ(8,"input",5),d.qZA(),d.TgZ(9,"div")(10,"label",6),d._uU(11,"Your password"),d.qZA(),d._UZ(12,"input",7),d.qZA(),d.TgZ(13,"div",8)(14,"div",8)(15,"div",9),d._UZ(16,"input",10),d.qZA(),d.TgZ(17,"label",11),d._uU(18,"Remember me"),d.qZA()(),d.TgZ(19,"a",12),d._uU(20,"Lost Password?"),d.qZA()(),d.TgZ(21,"button",13),d._uU(22,"Login to your account"),d.qZA(),d.TgZ(23,"div",14),d._uU(24," Not registered? "),d.TgZ(25,"a",15),d._uU(26,"Create account"),d.qZA()(),d.TgZ(27,"button",16),d.NdJ("click",function(){return r.authService.GoogleAuth()}),d._uU(28,"Login with Google"),d.qZA()()()())},directives:[O_,N_,Xp,xf],styles:[""]}),n})(),AU=(()=>{class n{constructor(t,r){this.router=t,this.authService=r}ngOnInit(){}register(){this.router.navigate(["/dashboard"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mi),d.Y36(kl))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],decls:25,vars:0,consts:[[1,"flex","px-2","w-full","bg-banner-left","h-screen","align-middle"],[1,"p-4","w-full","max-w-sm","bg-white","rounded-lg","border","border-gray-200","shadow-md","sm:p-6","md:p-8","dark:bg-gray-800","dark:border-gray-700","m-auto"],["action","#",1,"space-y-6"],[1,"text-xl","font-medium","text-gray-900","dark:text-white"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","text","name","name","id","name","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white"],["type","email","name","email","id","email","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"h5",3),d._uU(4,"Please Fill the form"),d.qZA(),d.TgZ(5,"div")(6,"label",4),d._uU(7,"Your Name"),d.qZA(),d._UZ(8,"input",5),d.qZA(),d.TgZ(9,"div")(10,"label",4),d._uU(11,"Your email"),d.qZA(),d._UZ(12,"input",6),d.qZA(),d.TgZ(13,"div")(14,"label",7),d._uU(15,"Your password"),d.qZA(),d._UZ(16,"input",8),d.qZA(),d.TgZ(17,"div")(18,"label",7),d._uU(19,"Re-Type Your password"),d.qZA(),d._UZ(20,"input",8),d.qZA(),d.TgZ(21,"button",9),d.NdJ("click",function(){return r.register()}),d._uU(22,"Create account"),d.qZA(),d.TgZ(23,"button",9),d.NdJ("click",function(){return r.authService.GoogleAuth()}),d._uU(24,"Continue with Google"),d.qZA()()()())},directives:[O_,N_,Xp],styles:[""]}),n})();function xU(n,e){if(1&n&&(d.TgZ(0,"div")(1,"p",7),d._uU(2,"We have sent a confirmation email to "),d.TgZ(3,"strong"),d._uU(4),d.qZA(),d._uU(5,"."),d.qZA(),d.TgZ(6,"p",7),d._uU(7,"Please check your email and click on the link to verfiy your email address."),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}let RU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kl))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-verivy-email"]],decls:10,vars:1,consts:[[1,"flex","px-2","w-full","bg-banner-left","h-screen","align-middle"],[1,"p-4","w-full","max-w-sm","bg-white","rounded-lg","border","border-gray-200","shadow-md","sm:p-6","md:p-8","dark:bg-gray-800","dark:border-gray-700","m-auto"],["action","#",1,"space-y-6"],[1,"text-xl","font-medium","text-gray-900","dark:text-white"],[4,"ngIf"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["type","submit","routerLink","/login",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],[1,"text-center"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"h5",3),d._uU(4,"Thank you For Registering"),d.qZA(),d.YNc(5,xU,8,1,"div",4),d.TgZ(6,"button",5),d.NdJ("click",function(){return r.authService.SendVerificationMail()}),d._uU(7,"Resend Verification Email"),d.qZA(),d.TgZ(8,"button",6),d._uU(9,"Back to Login"),d.qZA()()()()),2&t&&(d.xp6(5),d.Q6J("ngIf",r.authService.userData))},directives:[O_,N_,Xp,lr,Af],styles:[""]}),n})(),MU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-banner"]],decls:23,vars:0,consts:[[1,"py-3","px-3"],[1,"lg:max-w-[1440px]","relative","inset-0","md:max-w-[744px]","max-w-[375px]","mx-auto","bg-black","lg:px-20","md:px-6","px-4"],[1,"relative"],["src","../../../../assets/image/lamp.jpg",1,"w-full","object-cover","lg:h-[330px]","lg:block","md:hidden","hidden"],[1,"w-full","h-full","bg-black","opacity-50","absolute","top-0","left-0"],["src","../../../../assets/image/lamp.jpg",1,"lg:hidden","md:block","hidden"],["src","../../../../assets/image/lamp.jpg",1,"lg:hidden","md:hidden","block"],[1,"absolute","lg:bottom-8","md:bottom-3","bottom-0","lg:px-7","md:px-10","px-4","py-4"],[1,"lg:text-4xl","md:text-2xl","text-2xl","font-semibold","leading-9","text-white"],[1,"text-base","font-medium","leading-none","text-white-800","bg-black","px-2","py-2","max-w-[142px]","mt-3","text-center"],[1,"flex","gap-3","pt-4"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg",1,"text-white","hover:text-gray-300","cursor-pointer"],["fill-rule","evenodd","clip-rule","evenodd","d","M18.75 10.0532C18.75 5.22119 14.832 1.30322 10 1.30322C5.16797 1.30322 1.25 5.22119 1.25 10.0532C1.25 14.4204 4.44922 18.0403 8.63281 18.6974V12.5833H6.41055V10.0532H8.63281V8.12549C8.63281 5.93291 9.93945 4.7208 11.9379 4.7208C12.8953 4.7208 13.8969 4.89189 13.8969 4.89189V7.04541H12.793C11.7066 7.04541 11.3668 7.71963 11.3668 8.4126V10.0532H13.7934L13.4059 12.5833H11.3672V18.6981C15.5508 18.0415 18.75 14.4216 18.75 10.0532Z","fill","currentColor"],["d","M19.375 4.27735C18.6717 4.58296 17.9275 4.7843 17.166 4.87501C17.9663 4.4064 18.5681 3.66195 18.8586 2.78126C18.102 3.22368 17.2756 3.5341 16.4148 3.69923C16.0524 3.31935 15.6165 3.01716 15.1336 2.811C14.6507 2.60484 14.1309 2.49904 13.6059 2.50001C11.4801 2.50001 9.75977 4.19532 9.75977 6.28516C9.75826 6.57585 9.79157 6.86568 9.85898 7.14844C8.33464 7.07698 6.842 6.68813 5.47656 6.00675C4.11111 5.32537 2.90292 4.36648 1.9293 3.19141C1.58772 3.76724 1.40708 4.42424 1.40625 5.09376C1.40625 6.40626 2.09102 7.56641 3.125 8.2461C2.51239 8.23156 1.91234 8.06942 1.37578 7.77344V7.82032C1.37578 9.65626 2.70391 11.1836 4.46172 11.5313C4.13117 11.6194 3.79053 11.664 3.44844 11.6641C3.20569 11.6645 2.9635 11.6409 2.72539 11.5938C3.21406 13.0977 4.63633 14.1914 6.32109 14.2227C4.9521 15.2777 3.27134 15.848 1.54297 15.8438C1.23618 15.8433 0.929674 15.825 0.625 15.7891C2.38327 16.9118 4.42713 17.5057 6.51328 17.5C13.5977 17.5 17.468 11.7305 17.468 6.72657C17.468 6.56251 17.4637 6.39844 17.4559 6.23829C18.2071 5.70394 18.857 5.03989 19.375 4.27735Z","fill","currentColor"],["d","M17.3504 1.25H2.74531C1.94727 1.25 1.25 1.82422 1.25 2.61289V17.2504C1.25 18.0434 1.94727 18.75 2.74531 18.75H17.3461C18.1484 18.75 18.75 18.0387 18.75 17.2504V2.61289C18.7547 1.82422 18.1484 1.25 17.3504 1.25ZM6.67461 15.8371H4.16758V8.04219H6.67461V15.8371ZM5.50781 6.85703H5.48984C4.6875 6.85703 4.16797 6.25977 4.16797 5.51211C4.16797 4.75078 4.70117 4.16758 5.52148 4.16758C6.3418 4.16758 6.84375 4.74648 6.86172 5.51211C6.86133 6.25977 6.3418 6.85703 5.50781 6.85703ZM15.8371 15.8371H13.3301V11.575C13.3301 10.5539 12.9652 9.85625 12.0582 9.85625C11.3652 9.85625 10.9551 10.325 10.7727 10.7816C10.7043 10.9457 10.6859 11.1691 10.6859 11.3973V15.8371H8.17891V8.04219H10.6859V9.12695C11.0508 8.60742 11.6207 7.85977 12.9469 7.85977C14.5926 7.85977 15.8375 8.94453 15.8375 11.2832L15.8371 15.8371Z","fill","currentColor"],["d","M13.6457 2.7082C14.6118 2.71109 15.5375 3.09616 16.2207 3.77931C16.9038 4.46246 17.2889 5.38818 17.2918 6.3543V13.6457C17.2889 14.6118 16.9038 15.5375 16.2207 16.2207C15.5375 16.9038 14.6118 17.2889 13.6457 17.2918H6.3543C5.38818 17.2889 4.46246 16.9038 3.77931 16.2207C3.09616 15.5375 2.71109 14.6118 2.7082 13.6457V6.3543C2.71109 5.38818 3.09616 4.46246 3.77931 3.77931C4.46246 3.09616 5.38818 2.71109 6.3543 2.7082H13.6457ZM13.6457 1.25H6.3543C3.54687 1.25 1.25 3.54687 1.25 6.3543V13.6457C1.25 16.4531 3.54687 18.75 6.3543 18.75H13.6457C16.4531 18.75 18.75 16.4531 18.75 13.6457V6.3543C18.75 3.54687 16.4531 1.25 13.6457 1.25Z","fill","white"],["d","M14.7395 6.35449C14.5231 6.35449 14.3117 6.29034 14.1318 6.17016C13.9519 6.04998 13.8117 5.87916 13.729 5.6793C13.6462 5.47944 13.6245 5.25953 13.6667 5.04736C13.7089 4.8352 13.8131 4.64031 13.9661 4.48734C14.119 4.33438 14.3139 4.23021 14.5261 4.18801C14.7382 4.14581 14.9582 4.16747 15.158 4.25025C15.3579 4.33303 15.5287 4.47322 15.6489 4.65309C15.7691 4.83295 15.8332 5.04442 15.8332 5.26074C15.8335 5.40446 15.8054 5.54683 15.7506 5.67967C15.6957 5.8125 15.6152 5.9332 15.5135 6.03483C15.4119 6.13645 15.2912 6.21701 15.1584 6.27186C15.0255 6.32672 14.8832 6.3548 14.7395 6.35449Z","fill","white"],["d","M10 7.0832C10.5769 7.0832 11.1408 7.25427 11.6205 7.57477C12.1002 7.89527 12.474 8.35082 12.6948 8.88379C12.9155 9.41677 12.9733 10.0032 12.8608 10.569C12.7482 11.1348 12.4704 11.6546 12.0625 12.0625C11.6546 12.4704 11.1348 12.7482 10.569 12.8608C10.0032 12.9733 9.41677 12.9155 8.8838 12.6948C8.35082 12.474 7.89528 12.1002 7.57478 11.6205C7.25428 11.1408 7.08321 10.5769 7.08321 10C7.08404 9.22667 7.39161 8.48525 7.93843 7.93843C8.48526 7.3916 9.22668 7.08403 10 7.0832ZM10 5.625C9.13471 5.625 8.28885 5.88159 7.56939 6.36232C6.84992 6.84305 6.28917 7.52633 5.95804 8.32576C5.6269 9.12519 5.54026 10.0049 5.70907 10.8535C5.87788 11.7022 6.29456 12.4817 6.90642 13.0936C7.51827 13.7054 8.29782 14.1221 9.14648 14.2909C9.99515 14.4597 10.8748 14.3731 11.6742 14.042C12.4737 13.7108 13.1569 13.1501 13.6377 12.4306C14.1184 11.7112 14.375 10.8653 14.375 10C14.375 8.83968 13.9141 7.72688 13.0936 6.90641C12.2731 6.08594 11.1603 5.625 10 5.625Z","fill","currentColor"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d._UZ(3,"img",3)(4,"div",4)(5,"img",5)(6,"img",6),d.TgZ(7,"div",7)(8,"p",8),d._uU(9," Your Electricity Solution "),d.qZA(),d.TgZ(10,"p",9),d._uU(11," 50% discount !!! "),d.qZA(),d.TgZ(12,"div",10),d.O4$(),d.TgZ(13,"svg",11),d._UZ(14,"path",12),d.qZA(),d.TgZ(15,"svg",11),d._UZ(16,"path",13),d.qZA(),d.TgZ(17,"svg",11),d._UZ(18,"path",14),d.qZA(),d.TgZ(19,"svg",11),d._UZ(20,"path",15)(21,"path",16)(22,"path",17),d.qZA()()()()()())},styles:[""]}),n})(),kU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-cards"]],decls:57,vars:0,consts:[[1,"mx-auto","py-3","px-3"],["id","section1",1,"px-4","py-4","md:px-6","lg:px-10"],[1,"grid","grid-cols-5","bg-slate-100","lg:h-[330px]","lg:max-w-[1440px]","relative","inset-0","md:max-w-[744px]","max-w-[375px]","mx-auto","rounded-lg"],[1,"col-span-5","md:col-span-2"],[1,"hidden","md:flex","font-semibold","text-base","text-slate-600","md:pl-10","md:pt-14","lg:pt-24"],[1,"text-center","md:text-left","font-bold","text-base","text-black","text-4xl","lg:text-6xl","md:pl-10","pt-1"],[1,"text-center","md:text-left","font-bold","text-base","text-black","text-4xl","lg:text-6xl","md:pl-10"],[1,"hidden","md:flex","flex-wrap","md:col-span-3","gap-4","p-4","m-auto"],[1,"md:max-w-[184px]","lg:max-w-[304px]","lg:w-[304px]","h-[96px]","bg-slate-200","hover:bg-slate-400","rounded-lg","drop-shadow-md"],[1,"w-full","p-2"],[1,"font-semibold","text-base","text-slate-600"],[1,"font-extralight","text-sm","text-black"],[1,"font-extralight","text-xs","text-black"],[1,"grid","grid-cols-3","lg:px-20","md:px-6","px-4","gap-4"],[1,"max-w-sm","bg-white","rounded-lg","border","border-gray-200","shadow-md","dark:bg-gray-800","dark:border-gray-700","hover:border-gray-500"],["href","#"],["src","../../../../assets/image/lamp2.jpg","alt","Lamp 2",1,"rounded-t-lg"],[1,"lg:p-5","md:p-3","p-1"],[1,"mb-2","lg:text-2xl","md:text-xl","text-sm","font-bold","tracking-tight","text-gray-900","dark:text-white","text-center"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),d._uU(5,"Our Service"),d.qZA(),d.TgZ(6,"p",5),d._uU(7,"We Offer"),d.qZA(),d.TgZ(8,"p",6),d._uU(9,"Best Service"),d.qZA()(),d.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"p",10),d._uU(14,"Repair your Electricity"),d.qZA(),d.TgZ(15,"p",11),d._uU(16,"Electrical things that may need repair. "),d.qZA()()(),d.TgZ(17,"div",8)(18,"div",9)(19,"p",10),d._uU(20,"Electrical Installation"),d.qZA(),d.TgZ(21,"p",12),d._uU(22,"Group of items of electrical equipment that are permanently electrically connected. "),d.qZA()()(),d.TgZ(23,"div",8)(24,"div",9)(25,"p",10),d._uU(26,"Replace Electric meter"),d.qZA(),d.TgZ(27,"p",12),d._uU(28,"Increase or decrease KWH meter. "),d.qZA()()(),d.TgZ(29,"div",8)(30,"div",9)(31,"p",10),d._uU(32,"Power and Utility"),d.qZA(),d.TgZ(33,"p",12),d._uU(34,"Power & Utilities includes electricity generation (Power). "),d.qZA()()()()()(),d.TgZ(35,"div",13)(36,"div",14)(37,"a",15),d._UZ(38,"img",16),d.qZA(),d.TgZ(39,"div",17)(40,"a",15)(41,"h5",18),d._uU(42," Installation"),d.qZA()()()(),d.TgZ(43,"div",14)(44,"a",15),d._UZ(45,"img",16),d.qZA(),d.TgZ(46,"div",17)(47,"a",15)(48,"h5",18),d._uU(49," Repairing "),d.qZA()()()(),d.TgZ(50,"div",14)(51,"a",15),d._UZ(52,"img",16),d.qZA(),d.TgZ(53,"div",17)(54,"a",15)(55,"h5",18),d._uU(56," Customize "),d.qZA()()()()()())},styles:[""]}),n})(),NU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-content"]],decls:18,vars:0,consts:[[1,"py-3","px-3"],[1,"lg:max-w-[1440px]","relative","inset-0","md:max-w-[744px]","max-w-[375px]","mx-auto","bg-black","lg:px-20","md:px-6","px-4","lg:h-[330px]"],[1,"grid","lg:grid-cols-2","md:grid-cols-1","gap-4","content-between"],[1,"text-center","py-5"],["routerLink","login",1,"bg-gray-300","hover:bg-gray-400","text-gray-800","font-bold","py-2","px-4","rounded","inline-flex","items-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","w-4","h-4","mr-2"],["d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"],[1,"justify-self-end"],["src","../../../../assets/image/banner.jpg",1,"object-cover","lg:h-48","lg:w-96","right-5"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"p"),d._uU(5,"We provide electricity service for the Jabodetabek area."),d.qZA(),d._UZ(6,"br"),d.TgZ(7,"p"),d._uU(8,"If you need to install, upgrade, move or remove the electricity service at your home or business, you can submit your request online. If you have any questions, call us or email us using the contact information below. "),d.qZA(),d.TgZ(9,"p",3)(10,"button",4),d.O4$(),d.TgZ(11,"svg",5),d._UZ(12,"path",6),d.qZA(),d.kcU(),d.TgZ(13,"span"),d._uU(14,"Order Now ..."),d.qZA()()(),d._UZ(15,"p"),d.qZA(),d.TgZ(16,"div",7),d._UZ(17,"img",8),d.qZA()()()())},directives:[Af],styles:[""]}),n})(),PU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-footer"]],decls:31,vars:0,consts:[[1,"text-left","bg-slate-900","h-[397]","grid","grid-cols-4","p-10","gap-4"],[1,"col"],[1,"font-semibold"],[1,"font-thin","text-xs"],[1,"col-span-3","md:col-span-2","grid","grid-cols-2","gap-4"],[1,"hidden","md:flex","col","m-auto"],["src","../../../../assets/icons/splashscreen.png",1,"w-[75px]","object-cover","lg:block"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"p",2),d._uU(3," PT. Citra Dilla "),d.qZA(),d.TgZ(4,"p",3),d._uU(5," Copyright"),d.qZA(),d.TgZ(6,"p",3),d._uU(7," @2022"),d.qZA(),d.TgZ(8,"p",3),d._uU(9," Muhammad Ananda Patama"),d.qZA()(),d.TgZ(10,"div",4)(11,"div",1)(12,"p",2),d._uU(13," About "),d.qZA(),d.TgZ(14,"p",3),d._uU(15," Company Profile"),d.qZA(),d.TgZ(16,"p",3),d._uU(17," Careers"),d.qZA(),d.TgZ(18,"p",3),d._uU(19," Contact"),d.qZA()(),d.TgZ(20,"div",1)(21,"p",2),d._uU(22," Community "),d.qZA(),d.TgZ(23,"p",3),d._uU(24," Community Sentral"),d.qZA(),d.TgZ(25,"p",3),d._uU(26," FAQ"),d.qZA(),d.TgZ(27,"p",3),d._uU(28," Support"),d.qZA()()(),d.TgZ(29,"div",5),d._UZ(30,"img",6),d.qZA()())},styles:[""]}),n})(),OU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"container","mx-auto","bg-black","text-white"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"app-banner")(2,"app-cards")(3,"app-content")(4,"app-footer"),d.qZA())},directives:[MU,kU,NU,PU],styles:[""]}),n})();var Lx=O(5032);const iN="@firebase/database",sN="0.13.10";let Ux="";function oN(n){Ux=n}class UU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class VU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const aN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new UU(e)}}catch(e){}return new VU},tg=aN("localStorage"),Vx=aN("sessionStorage"),F_=new Vo.Yd("@firebase/database"),uN=function(){let n=1;return function(){return n++}}(),lN=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Sw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Sw.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let ng=null,cN=!0;const dN=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(F_.logLevel=Vo.in.VERBOSE,ng=F_.log.bind(F_),e&&Vx.set("logging_enabled",!0)):"function"==typeof n?ng=n:(ng=null,Vx.remove("logging_enabled"))},Li=function(...n){if(!0===cN&&(cN=!1,null===ng&&!0===Vx.get("logging_enabled")&&dN(!0)),ng){const e=Sw.apply(null,n);ng(e)}},Aw=function(n){return function(...e){Li(n,...e)}},Bx=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sw(...n);F_.error(e)},Pl=function(...n){const e=`FIREBASE FATAL ERROR: ${Sw(...n)}`;throw F_.error(e),new Error(e)},_s=function(...n){const e="FIREBASE WARNING: "+Sw(...n);F_.warn(e)},lT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Kc="[MIN_NAME]",Ol="[MAX_NAME]",rg=function(n,e){if(n===e)return 0;if(n===Kc||e===Ol)return-1;if(e===Kc||n===Ol)return 1;{const t=cT(n),r=cT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},HU=function(n,e){return n===e?0:n<e?-1:1},xw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},jx=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=jx(n[e[r]]);return t+="}",t},hN=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ui(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const fN=function(n){(0,L.hu)(!lT(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const T=v.join("");let S="";for(m=0;m<64;m+=8){let k=parseInt(T.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},WU=new RegExp("^-?(0*)\\d{1,10}$"),pN=-2147483648,Hx=2147483647,cT=function(n){if(WU.test(n)){const e=Number(n);if(e>=pN&&e<=Hx)return e}return null},L_=function(n){try{n()}catch(e){setTimeout(()=>{throw _s("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Rw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class zU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class KU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Li("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_s(e)}}let Mw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const vN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bN="websocket",CN="long_polling";class Gx{constructor(e,t,r,i,a=!1,l="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function IN(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===bN)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==CN)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function YU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ui(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class QU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const qx={},Wx={};function Zx(n){const e=n.toString();return qx[e]||(qx[e]=new QU),qx[e]}class XU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&L_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bh{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Aw(e),this.stats_=Zx(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),IN(t,CN,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new XU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zx((...a)=>{const[l,f,m,v,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&vN.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bh.forceAllow_=!0}static forceDisallow(){Bh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Bh.forceAllow_&&(Bh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=hN(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class zx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=uN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=zx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Li("frame writing exception"),f.stack&&Li(f.stack),Li(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Li("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Li("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let hT=null;"undefined"!=typeof MozWebSocket?hT=MozWebSocket:"undefined"!=typeof WebSocket&&(hT=WebSocket);let U_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Aw(this.connId),this.stats_=Zx(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&vN.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),IN(t,bN,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tg.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Ux}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new hT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==hT&&!n.forceDisallow_}static previouslyFailed(){return tg.isInMemoryStorage||!0===tg.get("previous_websocket_failure")}markConnectionHealthy(){tg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=hN(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),MN=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bh,U_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=U_&&U_.isAvailable();let i=r&&!U_.previouslyFailed();if(t.webSocketOnly&&(r||_s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[U_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class UN{constructor(e,t,r,i,a,l,f,m,v,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Aw("c:"+this.id+":"),this.transportManager_=new MN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Rw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xw("t",e),r=xw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xw("t",e),r=xw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Bx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&_s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Rw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class VN{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class BN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class fT extends BN{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fT}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Tn(){return new Nn("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jh(n){return n.pieces_.length-n.pieceNum_}function Xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function Yx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function $N(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function br(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function qs(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return qs(Xn(n),Xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function EV(n,e){const t=kw(n,0),r=kw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=rg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Qx(n,e){if(jh(n)!==jh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Fa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jh(n)>jh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class bV{constructor(e,t){this.errorPrefix_=t,this.parts_=kw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);GN(this)}}function GN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ig(n))}function ig(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Jx extends BN{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Jx}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nw=1e3;let gT,sg=(()=>{class n extends VN{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Aw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&fT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,T=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();_s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Bx("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const T=function(){v?v.close():(m=!0,a())};t.realtime_={close:T,sendRequest:function(U){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(U)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,z]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);m?Li("getToken() completed but was canceled"):(Li("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=z&&z.token,v=new UN(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ge=>{_s(ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(U){t.log_("Failed to get token: "+U),m||(t.repoInfo_.nodeAdmin&&_s(U),T())}}})()}interrupt(t){Li("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Li("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>jx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Li("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Li("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Ux.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=fT.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class pT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(Kc,e),i=new on(Kc,t);return 0!==this.compare(r,i)}minPost(){return on.MIN}}class ZN extends pT{static get __EMPTY_NODE(){return gT}static set __EMPTY_NODE(e){gT=e}compare(e,t){return rg(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(Ol,gT)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,gT)}toString(){return".key"}}const Fl=new ZN;class mT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let e1,Ru=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:co.EMPTY_NODE,this.right=null!=l?l:co.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return co.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return co.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class co{constructor(e,t=co.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new co(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ru.BLACK,null,null))}remove(e){return new co(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ru.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mT(this.root_,null,this.comparator_,!0,e)}}function RV(n,e){return rg(n.name,e.name)}function Xx(n,e){return rg(n,e)}co.EMPTY_NODE=new class xV{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ru(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zN=function(n){return"number"==typeof n?"number:"+fN(n):"string:"+n},KN=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===e1||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===e1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let YN,QN,JN,V_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),KN(this.priorityNode_)}static set __childrenNodeConstructor(t){YN=t}static get __childrenNodeConstructor(){return YN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===jh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+zN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?fN(this.value_):this.value_,this.lazyHash_=lN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const sr=new class PV extends pT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?rg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(Ol,new V_("[PRIORITY-POST]",JN))}makePost(e,t){const r=QN(e);return new on(t,new V_("[PRIORITY-POST]",r))}toString(){return".priority"}},OV=Math.log(2);class FV{constructor(e){this.count=parseInt(Math.log(e+1)/OV,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _T=function(n,e,t,r){n.sort(e);const i=function(m,v){const T=v-m;let S,k;if(0===T)return null;if(1===T)return S=n[m],k=t?t(S):S,new Ru(k,S.node,Ru.BLACK,null,null);{const U=parseInt(T/2,10)+m,z=i(m,U),ge=i(U+1,v);return S=n[U],k=t?t(S):S,new Ru(k,S.node,Ru.BLACK,z,ge)}},f=function(m){let v=null,T=null,S=n.length;const k=function(z,ge){const Ie=S-z,lt=S;S-=z;const ht=i(Ie+1,lt),ct=n[Ie],dt=t?t(ct):ct;U(new Ru(dt,ct.node,ge,null,ht))},U=function(z){v?(v.left=z,v=z):(T=z,v=z)};for(let z=0;z<m.count;++z){const ge=m.nextBitIsOne(),Ie=Math.pow(2,m.count-(z+1));ge?k(Ie,Ru.BLACK):(k(Ie,Ru.BLACK),k(Ie,Ru.RED))}return T}(new FV(n.length));return new co(r||e,f)};let t1;const B_={};class Yc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(B_&&sr,"ChildrenNode.ts has not been loaded"),t1=t1||new Yc({".priority":B_},{".priority":sr}),t1}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof co?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(on.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?_T(r,e.getCompare()):B_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const T=Object.assign({},this.indexes_);return T[m]=f,new Yc(T,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===B_){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(on.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),_T(f,l.getCompare())}return B_}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new on(e.name,f))),m.insert(e,e.node)}});return new Yc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===B_)return i;{const a=t.get(e.name);return a?i.remove(new on(e.name,a)):i}});return new Yc(r,this.indexSet_)}}let Pw,Zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&KN(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pw||(Pw=new n(new co(Xx),null,Yc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Pw:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(Xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new on(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Pw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,L.hu)(".priority"!==en(t)||1===jh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Xn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(sr,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+zN(this.getPriority().val())+":"),this.forEachChild(sr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":lN(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new on(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ow?-1:0}withIndex(t){if(t===Fl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(sr),a=r.getIterator(sr);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Fl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ow=new class LV extends Zt{constructor(){super(new co(Xx),Zt.EMPTY_NODE,Yc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function Rr(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new V_(n,Rr(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return Ui(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=Rr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Rr(e))}{const t=[];let r=!1;if(Ui(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Rr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new on(l,m)))}}),0===t.length)return Zt.EMPTY_NODE;const a=_T(t,RV,l=>l.name,Xx);if(r){const l=_T(t,sr.getCompare());return new Zt(a,Rr(e),new Yc({".priority":l},{".priority":sr}))}return new Zt(a,Rr(e),Yc.Default)}}Object.defineProperties(on,{MIN:{value:new on(Kc,Zt.EMPTY_NODE)},MAX:{value:new on(Ol,Ow)}}),ZN.__EMPTY_NODE=Zt.EMPTY_NODE,V_.__childrenNodeConstructor=Zt,function MV(n){e1=n}(Ow),function NV(n){JN=n}(Ow),function kV(n){QN=n}(Rr);class n1 extends pT{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?rg(e.name,t.name):a}makePost(e,t){const r=Rr(e),i=Zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,i)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,Ow);return new on(Ol,e)}toString(){return kw(this.indexPath_,0).join("/")}}const r1=new class VV extends pT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?rg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=Rr(e);return new on(t,r)}toString(){return".value"}},j_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",BV=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=j_.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=j_.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),tP=function(n){if(n===""+Hx)return"-";const e=cT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ol;const a=j_.charAt(j_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},nP=function(n){if(n===""+pN)return Kc;const e=cT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Hx:(delete t[t.length-1],t.join("")):(t[t.length-1]=j_.charAt(j_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function rP(n){return{type:"value",snapshotNode:n}}function H_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Lw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class s1{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Fw(t,f)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(H_(t,r)):l.trackChildChange(Lw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(sr,(i,a)=>{t.hasChild(i)||r.trackChildChange(Fw(i,a))}),t.isLeafNode()||t.forEachChild(sr,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Lw(i,a,l))}else r.trackChildChange(H_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Uw{constructor(e){this.indexedFilter_=new s1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Uw.getStartPost_(e),this.endPost_=Uw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new on(t,r))||(r=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Zt.EMPTY_NODE);const a=this;return t.forEachChild(sr,(l,f)=>{a.matches(new on(l,f))||(i=i.updateImmediateChild(l,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class HV{constructor(e){this.rangedFilter_=new Uw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new on(t,r))||(r=Zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),l++}}else{let a,l,f,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Zt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(k,U)=>S(U,k)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let v=0,T=!1;for(;m.hasNext();){const S=m.getNext();!T&&f(a,S)<=0&&(T=!0),T&&v<this.limit_&&f(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(k,U)=>S(U,k)}else l=this.index_.getCompare();const f=e;(0,L.hu)(f.numChildren()===this.limit_,"");const m=new on(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=k&&(k.name===t||f.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const U=null==k?1:l(k,m);if(T&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(Lw(t,r,S)),f.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Fw(t,S));const ge=f.updateImmediateChild(t,Zt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=a&&a.trackChildChange(H_(k.name,k.node)),ge.updateImmediateChild(k.name,k.node)):ge}}return r.isEmpty()?e:T&&l(v,m)>=0?(null!=a&&(a.trackChildChange(Fw(v.name,v.node)),a.trackChildChange(H_(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Zt.EMPTY_NODE)):e}}class yT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ol}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){const e=new yT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function o1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function a1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function vT(n,e){const t=n.copy();return t.index_=e,t}function iP(n){const e={};if(n.isDefault())return e;let t;return n.index_===sr?t="$priority":n.index_===r1?t="$value":n.index_===Fl?t="$key":((0,L.hu)(n.index_ instanceof n1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function sP(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==sr&&(e.i=n.index_.toString()),e}class wT extends VN{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Aw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=wT.getListenId_(e,r),f={};this.listens_[l]=f;const m=iP(e._queryParams);this.restRequest_(a+".json",m,(v,T)=>{let S=T;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,l)===f){let k;k=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(k,null)}})}unlisten(e,t){const r=wT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=iP(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,L.cI)(f.responseText)}catch(v){_s("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&_s("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class zV{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ET(){return{value:null,children:new Map}}function $_(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,ET()),$_(n.children.get(r),e=Xn(e),t)}}function u1(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(sr,(r,i)=>{$_(n,new Nn(r),i)}),u1(n,e)}}if(n.children.size>0){const t=en(e);return e=Xn(e),n.children.has(t)&&u1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function l1(n,e,t){null!==n.value?t(e,n.value):function KV(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{l1(i,new Nn(e.toString()+"/"+r),t)})}class YV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ui(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class XV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new YV(e);const r=1e4+2e4*Math.random();Rw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ui(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Rw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var La=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(La||(La={})),La))();function h1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class bT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=La.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new bT(Tn(),t,this.revert)}}return(0,L.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new bT(Xn(this.path),this.affectedTree,this.revert)}}class Vw{constructor(e,t){this.source=e,this.path=t,this.type=La.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new Vw(this.source,Tn()):new Vw(this.source,Xn(this.path))}}class og{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=La.OVERWRITE}operationForChild(e){return tn(this.path)?new og(this.source,Tn(),this.snap.getImmediateChild(e)):new og(this.source,Xn(this.path),this.snap)}}class G_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=La.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new og(this.source,Tn(),t.value):new G_(this.source,Tn(),t)}return(0,L.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new G_(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class eB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Bw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function rB(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),i=new on(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function nB(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function CT(n,e){return{eventCache:n,serverCache:e}}function jw(n,e,t,r){return CT(new Hh(e,t,r),n.serverCache)}function aP(n,e,t,r){return CT(n.eventCache,new Hh(e,t,r))}function IT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ag(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let f1;class or{constructor(e,t=(()=>(f1||(f1=new co(HU)),f1))()){this.value=e,this.children=t}static fromObject(e){let t=new or(null);return Ui(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Tn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Xn(e),t);return null!=a?{path:br(new Nn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(Xn(e)):new or(null)}}set(e,t){if(tn(e))return new or(t,this.children);{const r=en(e),a=(this.children.get(r)||new or(null)).set(Xn(e),t),l=this.children.insert(r,a);return new or(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new or(null):new or(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(Xn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new or(null):new or(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(Xn(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new or(null)).setTree(Xn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new or(this.value,l)}}fold(e){return this.fold_(Tn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(br(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Tn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_(Xn(e),br(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Tn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(Xn(e),br(t,i),r):new or(null)}}foreach(e){this.foreach_(Tn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(br(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Mu{constructor(e){this.writeTree_=e}static empty(){return new Mu(new or(null))}}function Hw(n,e,t){if(tn(e))return new Mu(new or(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=qs(i,e);return a=a.updateChild(l,t),new Mu(n.writeTree_.set(i,a))}{const i=new or(t),a=n.writeTree_.setTree(e,i);return new Mu(a)}}}function p1(n,e,t){let r=n;return Ui(t,(i,a)=>{r=Hw(r,br(e,i),a)}),r}function uP(n,e){if(tn(e))return Mu.empty();{const t=n.writeTree_.setTree(e,new or(null));return new Mu(t)}}function g1(n,e){return null!=ug(n,e)}function ug(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(qs(t.path,e)):null}function lP(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(sr,(r,i)=>{e.push(new on(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new on(r,i.value))}),e}function $h(n,e){if(tn(e))return n;{const t=ug(n,e);return new Mu(null!=t?new or(t):n.writeTree_.subtree(e))}}function m1(n){return n.writeTree_.isEmpty()}function q_(n,e){return cP(Tn(),n.writeTree_,e)}function cP(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=cP(br(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(br(n,".priority"),r)),t}}function TT(n,e){return gP(e,n)}function lB(n,e){if(n.snap)return Fa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Fa(br(n.path,t),e))return!0;return!1}function dB(n){return n.visible}function dP(n,e,t){let r=Mu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Fa(t,l)?(f=qs(t,l),r=Hw(r,f,a.snap)):Fa(l,t)&&(f=qs(l,t),r=Hw(r,Tn(),a.snap.getChild(f)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Fa(t,l))f=qs(t,l),r=p1(r,f,a.children);else if(Fa(l,t))if(f=qs(l,t),tn(f))r=p1(r,Tn(),a.children);else{const m=(0,L.DV)(a.children,en(f));if(m){const v=m.getChild(Xn(f));r=Hw(r,Tn(),v)}}}}}return r}function hP(n,e,t,r,i){if(r||i){const a=$h(n.visibleWrites,e);return!i&&m1(a)?t:i||null!=t||g1(a,Tn())?q_(dP(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Fa(v.path,e)||Fa(e,v.path))},e),t||Zt.EMPTY_NODE):null}{const a=ug(n.visibleWrites,e);if(null!=a)return a;{const l=$h(n.visibleWrites,e);return m1(l)?t:null!=t||g1(l,Tn())?q_(l,t||Zt.EMPTY_NODE):null}}}function DT(n,e,t,r){return hP(n.writeTree,n.treePath,e,t,r)}function _1(n,e){return function hB(n,e,t){let r=Zt.EMPTY_NODE;const i=ug(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(sr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=$h(n.visibleWrites,e);return t.forEachChild(sr,(l,f)=>{const m=q_($h(a,new Nn(l)),f);r=r.updateImmediateChild(l,m)}),lP(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return lP($h(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function fP(n,e,t,r){return function fB(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=br(e,t);if(g1(n.visibleWrites,a))return null;{const l=$h(n.visibleWrites,a);return m1(l)?i.getChild(t):q_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ST(n,e){return function gB(n,e){return ug(n.visibleWrites,e)}(n.writeTree,br(n.treePath,e))}function y1(n,e,t){return function pB(n,e,t,r){const i=br(e,t),a=ug(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?q_($h(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function pP(n,e){return gP(br(n.treePath,e),n.writeTree)}function gP(n,e){return{treePath:n,writeTree:e}}class vB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Lw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Fw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,H_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Lw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const mP=new class wB{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class v1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return y1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ag(this.viewCache_),a=function yB(n,e,t,r,i,a){return function mB(n,e,t,r,i,a,l){let f;const m=$h(n.visibleWrites,e),v=ug(m,Tn());if(null!=v)f=v;else{if(null==t)return[];f=q_(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const T=[],S=l.getCompare(),k=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let U=k.getNext();for(;U&&T.length<i;)0!==S(U,r)&&T.push(U),U=k.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function _P(n,e,t,r,i,a){const l=e.eventCache;if(null!=ST(r,t))return e;{let f,m;if(tn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=ag(e),S=_1(r,v instanceof Zt?v:Zt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=DT(r,ag(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,L.hu)(1===jh(t),"Can't have a priority with additional path components");const T=l.getNode();m=e.serverCache.getNode();const S=fP(r,t,T,m);f=null!=S?n.filter.updatePriority(T,S):l.getNode()}else{const T=Xn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const k=fP(r,t,l.getNode(),m);S=null!=k?l.getNode().getImmediateChild(v).updateChild(T,k):l.getNode().getImmediateChild(v)}else S=y1(r,v,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),v,S,T,i,a):l.getNode()}}return jw(e,f,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function AT(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const T=l?n.filter:n.filter.getIndexedFilter();if(tn(t))v=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(t,r);v=T.updateFullNode(m.getNode(),U,null)}else{const U=en(t);if(!m.isCompleteForPath(t)&&jh(t)>1)return e;const z=Xn(t),Ie=m.getNode().getImmediateChild(U).updateChild(z,r);v=".priority"===U?T.updatePriority(m.getNode(),Ie):T.updateChild(m.getNode(),U,Ie,z,mP,null)}const S=aP(e,v,m.isFullyInitialized()||tn(t),T.filtersNodes());return _P(n,S,t,i,new v1(i,S,a),f)}function w1(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const T=new v1(i,e,a);if(tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=jw(e,v,!0,n.filter.filtersNodes());else{const S=en(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=jw(e,v,f.isFullyInitialized(),f.isFiltered());else{const k=Xn(t),U=f.getNode().getImmediateChild(S);let z;if(tn(k))z=r;else{const ge=T.getCompleteChild(S);z=null!=ge?".priority"===Yx(k)&&ge.getChild($N(k)).isEmpty()?ge:ge.updateChild(k,r):Zt.EMPTY_NODE}m=U.equals(z)?e:jw(e,n.filter.updateChild(f.getNode(),S,z,k,T,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function yP(n,e){return n.eventCache.isCompleteForChild(e)}function vP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function E1(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=tn(t)?r:new or(null).setTree(t,r);const T=e.serverCache.getNode();return v.children.inorderTraversal((S,k)=>{if(T.hasChild(S)){const z=vP(0,e.serverCache.getNode().getImmediateChild(S),k);m=AT(n,m,new Nn(S),z,i,a,l,f)}}),v.children.inorderTraversal((S,k)=>{const U=!e.serverCache.isCompleteForChild(S)&&null===k.value;if(!T.hasChild(S)&&!U){const ge=vP(0,e.serverCache.getNode().getImmediateChild(S),k);m=AT(n,m,new Nn(S),ge,i,a,l,f)}}),m}class xB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new s1(r.getIndex()),a=function $V(n){return n.loadsAllData()?new s1(n.getIndex()):n.hasLimit()?new HV(n):new Uw(n)}(r);this.processor_=function EB(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,m=i.updateFullNode(Zt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Zt.EMPTY_NODE,f.getNode(),null),T=new Hh(m,l.isFullyInitialized(),i.filtersNodes()),S=new Hh(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=CT(S,T),this.eventGenerator_=new eB(this.query_)}get query(){return this.query_}}function kB(n,e){const t=ag(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function wP(n){return 0===n.eventRegistrations_.length}function EP(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function bP(n,e,t,r){e.type===La.MERGE&&null!==e.source.queryId&&((0,L.hu)(ag(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(IT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function CB(n,e,t,r,i){const a=new vB;let l,f;if(t.type===La.OVERWRITE){const v=t;v.source.fromUser?l=w1(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!tn(v.path),l=AT(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===La.MERGE){const v=t;v.source.fromUser?l=function TB(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const T=br(t,m);yP(e,en(T))&&(f=w1(n,f,T,v,i,a,l))}),r.foreach((m,v)=>{const T=br(t,m);yP(e,en(T))||(f=w1(n,f,T,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=E1(n,e,v.path,v.children,r,i,f,a))}else if(t.type===La.ACK_USER_WRITE){const v=t;l=v.revert?function AB(n,e,t,r,i,a){let l;if(null!=ST(r,t))return e;{const f=new v1(r,e,i),m=e.eventCache.getNode();let v;if(tn(t)||".priority"===en(t)){let T;if(e.serverCache.isFullyInitialized())T=DT(r,ag(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Zt,"serverChildren would be complete if leaf node"),T=_1(r,S)}T=T,v=n.filter.updateFullNode(m,T,a)}else{const T=en(t);let S=y1(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=m.getImmediateChild(T)),v=null!=S?n.filter.updateChild(m,T,S,Xn(t),f,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,Zt.EMPTY_NODE,Xn(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=DT(r,ag(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=ST(r,Tn()),jw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function DB(n,e,t,r,i,a,l){if(null!=ST(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(tn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return AT(n,e,t,m.getNode().getChild(t),i,a,f,l);if(tn(t)){let v=new or(null);return m.getNode().forEachChild(Fl,(T,S)=>{v=v.set(new Nn(T),S)}),E1(n,e,t,v,i,a,f,l)}return e}{let v=new or(null);return r.foreach((T,S)=>{const k=br(t,T);m.isCompleteForPath(k)&&(v=v.set(T,m.getNode().getChild(k)))}),E1(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==La.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function SB(n,e,t,r,i){const a=e.serverCache;return _P(n,aP(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,mP,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function IB(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=IT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(rP(IT(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function bB(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,CP(n,a.changes,a.viewCache.eventCache.getNode(),null)}function CP(n,e,t,r){return function tB(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function jV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Bw(n,i,"child_removed",e,r,t),Bw(n,i,"child_added",e,r,t),Bw(n,i,"child_moved",a,r,t),Bw(n,i,"child_changed",e,r,t),Bw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let xT,MT;class IP{constructor(){this.views=new Map}}function b1(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),bP(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(bP(l,e,t,r));return a}}function TP(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=DT(t,i?r:null),m=!1;f?m=!0:r instanceof Zt?(f=_1(t,r),m=!1):(f=Zt.EMPTY_NODE,m=!1);const v=CT(new Hh(f,m,!1),new Hh(r,i,!1));return new xB(e,v)}return l}function DP(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gh(n,e){let t=null;for(const r of n.views.values())t=t||kB(r,e);return t}function SP(n,e){return e._queryParams.loadsAllData()?RT(n):n.views.get(e._queryIdentifier)}function AP(n,e){return null!=SP(n,e)}function qh(n){return null!=RT(n)}function RT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let HB=1;class xP{constructor(e){this.listenProvider_=e,this.syncPointTree_=new or(null),this.pendingWriteTree_=function _B(){return{visibleWrites:Mu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function C1(n,e,t,r,i){return function sB(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Hw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?W_(n,new og({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wh(n,e,t=!1){const r=function aB(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function uB(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&lB(f,r.path)?i=!1:Fa(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function cB(n){n.visibleWrites=dP(n.allWrites,dB,Tn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=uP(n.visibleWrites,r.path):Ui(r.children,m=>{n.visibleWrites=uP(n.visibleWrites,br(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new or(null);return null!=r.snap?a=a.set(Tn(),!0):Ui(r.children,l=>{a=a.set(new Nn(l),!0)}),W_(n,new bT(r.path,a,t))}return[]}function $w(n,e,t){return W_(n,new og({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function kT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||AP(l,e))){const m=function VB(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=qh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(EP(v,t,r)),wP(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(EP(m,t,r)),wP(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!qh(n)&&a.push(new(function FB(){return(0,L.hu)(xT,"Reference.ts has not been loaded"),xT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function LB(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const T=-1!==v.findIndex(k=>k._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(k,U)=>qh(U));if(T&&!S){const k=n.syncPointTree_.subtree(a);if(!k.isEmpty()){const U=function KB(n){return n.fold((e,t,r)=>{if(t&&qh(t))return[RT(t)];{let i=[];return t&&(i=DP(t)),Ui(r,(a,l)=>{i=i.concat(l)}),i}})}(k);for(let z=0;z<U.length;++z){const ge=U[z],Ie=ge.query,lt=NP(n,ge);n.listenProvider_.startListening(qw(Ie),Gw(n,Ie),lt.hashFn,lt.onComplete)}}}!S&&v.length>0&&!r&&(T?n.listenProvider_.stopListening(qw(e),null):v.forEach(k=>{const U=n.queryToTagMap.get(PT(k));n.listenProvider_.stopListening(qw(k),U)}))}!function YB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=PT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function RP(n,e,t,r){const i=T1(n,r);if(null!=i){const a=D1(i),l=a.path,f=a.queryId,m=qs(l,e);return S1(n,l,new og(h1(f),m,t))}return[]}function I1(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(k,U)=>{const z=qs(k,i);a=a||Gh(U,z),l=l||qh(U)});let m,f=n.syncPointTree_.get(i);f?(l=l||qh(f),a=a||Gh(f,Tn())):(f=new IP,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=Zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,z)=>{const ge=Gh(z,Tn());ge&&(a=a.updateImmediateChild(U,ge))}));const v=AP(f,e);if(!v&&!e._queryParams.loadsAllData()){const k=PT(e);(0,L.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const U=function QB(){return HB++}();n.queryToTagMap.set(k,U),n.tagToQueryMap.set(U,k)}let S=function UB(n,e,t,r,i,a){const l=TP(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function NB(n,e){n.eventRegistrations_.push(e)}(l,t),function PB(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(sr,(a,l)=>{r.push(H_(a,l))}),t.isFullyInitialized()&&r.push(rP(t.getNode())),CP(n,r,t.getNode(),e)}(l,t)}(f,e,t,TT(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const k=SP(f,e);S=S.concat(function JB(n,e,t){const r=e._path,i=Gw(n,e),a=NP(n,t),l=n.listenProvider_.startListening(qw(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!qh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,T,S)=>{if(!tn(v)&&T&&qh(T))return[RT(T).query];{let k=[];return T&&(k=k.concat(DP(T).map(U=>U.query))),Ui(S,(U,z)=>{k=k.concat(z)}),k}});for(let v=0;v<m.length;++v){const T=m[v];n.listenProvider_.stopListening(qw(T),Gw(n,T))}}return l}(n,e,k))}return S}function NT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=Gh(f,qs(l,e));if(v)return v});return hP(i,e,a,t,!0)}function W_(n,e){return MP(e,n.syncPointTree_,null,TT(n.pendingWriteTree_,Tn()))}function MP(n,e,t,r){if(tn(n.path))return kP(n,e,t,r);{const i=e.get(Tn());null==t&&null!=i&&(t=Gh(i,Tn()));let a=[];const l=en(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,T=pP(r,l);a=a.concat(MP(f,m,v,T))}return i&&(a=a.concat(b1(i,n,r,t))),a}}function kP(n,e,t,r){const i=e.get(Tn());null==t&&null!=i&&(t=Gh(i,Tn()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=pP(r,l),T=n.operationForChild(l);T&&(a=a.concat(kP(T,f,m,v)))}),i&&(a=a.concat(b1(i,n,r,t))),a}function NP(n,e){const t=e.query,r=Gw(n,t);return{hashFn:()=>(function RB(n){return n.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function WB(n,e,t){const r=T1(n,t);if(r){const i=D1(r),a=i.path,l=i.queryId,f=qs(a,e);return S1(n,a,new Vw(h1(l),f))}return[]}(n,t._path,r):function qB(n,e){return W_(n,new Vw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function qU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return kT(n,t,null,a)}}}}function Gw(n,e){const t=PT(e);return n.queryToTagMap.get(t)}function PT(n){return n._path.toString()+"$"+n._queryIdentifier}function T1(n,e){return n.tagToQueryMap.get(e)}function D1(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function S1(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),b1(r,t,TT(n.pendingWriteTree_,e),null)}function qw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function jB(){return(0,L.hu)(MT,"Reference.ts has not been loaded"),MT}())(n._repo,n._path):n}class A1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new A1(t)}node(){return this.node_}}class x1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=br(this.path_,e);return new x1(this.syncTree_,t)}node(){return NT(this.syncTree_,this.path_)}}const PP=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?e3(n[".sv"],e,t):"object"==typeof n[".sv"]?t3(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},e3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},t3=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},OP=function(n,e,t,r){return M1(e,new x1(t,n),r)},R1=function(n,e,t){return M1(n,new A1(e),t)};function M1(n,e,t){const r=n.getPriority().val(),i=PP(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=PP(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new V_(f,Rr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new V_(i))),l.forEachChild(sr,(f,m)=>{const v=M1(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class k1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function OT(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=en(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new k1(i,r,a),t=Xn(t),i=en(t)}return r}function lg(n){return n.node.value}function N1(n,e){n.node.value=e,P1(n)}function FP(n){return n.node.childCount>0}function FT(n,e){Ui(n.node.children,(t,r)=>{e(new k1(t,n,r))})}function LP(n,e,t,r){t&&!r&&e(n),FT(n,i=>{LP(i,e,!0,r)}),t&&r&&e(n)}function Ww(n){return new Nn(null===n.parent?n.name:Ww(n.parent)+"/"+n.name)}function P1(n){null!==n.parent&&function i3(n,e,t){const r=function n3(n){return void 0===lg(n)&&!FP(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,P1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,P1(n))}(n.parent,n.name,n)}const s3=/[\[\].#$\/\u0000-\u001F\u007F]/,o3=/[\[\].#$\u0000-\u001F\u007F]/,O1=10485760,LT=function(n){return"string"==typeof n&&0!==n.length&&!s3.test(n)},UP=function(n){return"string"==typeof n&&0!==n.length&&!o3.test(n)},Zw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!lT(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Ll=function(n,e,t,r){r&&void 0===e||zw((0,L.gK)(n,"value"),e,t)},zw=function(n,e,t){const r=t instanceof Nn?new bV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ig(r));if("function"==typeof e)throw new Error(n+"contains a function "+ig(r)+" with contents = "+e.toString());if(lT(e))throw new Error(n+"contains "+e.toString()+" "+ig(r));if("string"==typeof e&&e.length>O1/3&&(0,L.ug)(e)>O1)throw new Error(n+"contains a string greater than "+O1+" utf8 bytes "+ig(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ui(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!LT(l)))throw new Error(n+" contains an invalid key ("+l+") "+ig(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function CV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),GN(n)})(r,l),zw(n,f,r),function IV(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+ig(r)+" in addition to actual children.")}},VP=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ui(e,(l,f)=>{const m=new Nn(l);if(zw(i,f,br(t,m)),".priority"===Yx(m)&&!Zw(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=kw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!LT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(EV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Fa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},F1=function(n,e,t){if(!t||void 0!==e){if(lT(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zw(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Kw=function(n,e,t,r){if(!(r&&void 0===t||LT(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yw=function(n,e,t,r){if(!(r&&void 0===t||UP(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ua=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},BP=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!LT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UP(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class c3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function UT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Qx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function jP(n,e,t){UT(n,t),HP(n,r=>Qx(r,e))}function qo(n,e,t){UT(n,t),HP(n,r=>Fa(r,e)||Fa(e,r))}function HP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(d3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function d3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ng&&Li("event: "+t.toString()),L_(r)}}}const $P="repo_interrupt";class f3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new c3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ET(),this.transactionQueueTree_=new k1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GP(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Qw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:GP(n)})}function qP(n,e,t,r,i){n.dataUpdateCount++;const a=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,L.UI)(t,v=>Rr(v));l=function ZB(n,e,t,r){const i=T1(n,r);if(i){const a=D1(i),l=a.path,f=a.queryId,m=qs(l,e),v=or.fromObject(t);return S1(n,l,new G_(h1(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Rr(t);l=RP(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>Rr(v));l=function GB(n,e,t){const r=or.fromObject(t);return W_(n,new G_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Rr(t);l=$w(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=z_(n,a)),qo(n.eventQueue_,f,l)}function WP(n,e){L1(n,"connected",e),!1===e&&function y3(n){Z_(n,"onDisconnectEvents");const e=Qw(n),t=ET();l1(n.onDisconnect_,Tn(),(i,a)=>{const l=OP(i,a,n.serverSyncTree_,e);$_(t,i,l)});let r=[];l1(t,Tn(),(i,a)=>{r=r.concat($w(n.serverSyncTree_,i,a));const l=j1(n,i);z_(n,l)}),n.onDisconnect_=ET(),qo(n.eventQueue_,Tn(),r)}(n)}function L1(n,e,t){const r=new Nn("/.info/"+e),i=Rr(t);n.infoData_.updateSnapshot(r,i);const a=$w(n.infoSyncTree_,r,i);qo(n.eventQueue_,r,a)}function VT(n){return n.nextWriteId_++}function U1(n,e,t,r,i){Z_(n,"set",{path:e.toString(),value:t,priority:r});const a=Qw(n),l=Rr(t,r),f=NT(n.serverSyncTree_,e),m=R1(l,f,a),v=VT(n),T=C1(n.serverSyncTree_,e,m,v,!0);UT(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(k,U)=>{const z="ok"===k;z||_s("set at "+e+" failed: "+k);const ge=Wh(n.serverSyncTree_,v,!z);qo(n.eventQueue_,e,ge),Zh(0,i,k,U)});const S=j1(n,e);z_(n,S),qo(n.eventQueue_,S,[])}function v3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&u1(n.onDisconnect_,e),Zh(0,t,r,i)})}function ZP(n,e,t,r){const i=Rr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&$_(n.onDisconnect_,e,i),Zh(0,r,a,l)})}function V1(n,e,t){let r;r=".info"===en(e._path)?kT(n.infoSyncTree_,e,t):kT(n.serverSyncTree_,e,t),jP(n.eventQueue_,e._path,r)}function zP(n){n.persistentConnection_&&n.persistentConnection_.interrupt($P)}function Z_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Li(t,...e)}function Zh(n,e,t,r){e&&L_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function B1(n,e,t){return NT(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function BT(n,e=n.transactionQueueTree_){if(e||jT(n,e),lg(e)){const t=YP(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function T3(n,e,t){const r=t.map(v=>v.currentWriteId),i=B1(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const T=t[v];(0,L.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=qs(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{Z_(n,"transaction put response",{path:m.toString(),status:v});let T=[];if("ok"===v){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,T=T.concat(Wh(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();jT(n,OT(n.transactionQueueTree_,e)),BT(n,n.transactionQueueTree_),qo(n.eventQueue_,e,T);for(let k=0;k<S.length;k++)L_(S[k])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{_s("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}z_(n,e)}},l)}(n,Ww(e),t)}else FP(e)&&FT(e,t=>{BT(n,t)})}function z_(n,e){const t=KP(n,e),r=Ww(t);return function D3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=qs(t,m.path);let S,T=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,S=m.abortReason,i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,S="maxretry",i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0));else{const k=B1(n,m.path,l);m.currentInputSnapshot=k;const U=e[f].update(k.val());if(void 0!==U){zw("transaction failed: Data returned ",U,m.path);let z=Rr(U);"object"==typeof U&&null!=U&&(0,L.r3)(U,".priority")||(z=z.updatePriority(k.getPriority()));const Ie=m.currentWriteId,lt=Qw(n),ht=R1(z,k,lt);m.currentOutputSnapshotRaw=z,m.currentOutputSnapshotResolved=ht,m.currentWriteId=VT(n),l.splice(l.indexOf(Ie),1),i=i.concat(C1(n.serverSyncTree_,m.path,ht,m.currentWriteId,m.applyLocally)),i=i.concat(Wh(n.serverSyncTree_,Ie,!0))}else T=!0,S="nodata",i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0))}qo(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}jT(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)L_(r[f]);BT(n,n.transactionQueueTree_)}(n,YP(n,t),r),r}function KP(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===lg(r);)r=OT(r,t),t=en(e=Xn(e));return r}function YP(n,e){const t=[];return QP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function QP(n,e,t){const r=lg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);FT(e,i=>{QP(n,i,t)})}function jT(n,e){const t=lg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,N1(e,t.length>0?t:void 0)}FT(e,r=>{jT(n,r)})}function j1(n,e){const t=Ww(KP(n,e)),r=OT(n.transactionQueueTree_,e);return function r3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{H1(n,i)}),H1(n,r),LP(r,i=>{H1(n,i)}),t}function H1(n,e){const t=lg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Wh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?N1(e,void 0):t.length=a+1,qo(n.eventQueue_,Ww(e),i);for(let l=0;l<r.length;l++)L_(r[l])}}const $1=function(n,e){const t=x3(n),r=t.namespace;return"firebase.com"===t.domain&&Pl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Pl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Gx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},x3=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function S3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,S)));const k=function A3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_s(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const U=e.slice(0,v);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class JP{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class XP{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class G1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class eO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return v3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ua("OnDisconnect.remove",this._path);const e=new L.BH;return ZP(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ua("OnDisconnect.set",this._path),Ll("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return ZP(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ua("OnDisconnect.setWithPriority",this._path),Ll("OnDisconnect.setWithPriority",e,this._path,!1),F1("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function w3(n,e,t,r,i){const a=Rr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&$_(n.onDisconnect_,e,a),Zh(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ua("OnDisconnect.update",this._path),VP("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function E3(n,e,t,r){if((0,L.xb)(t))return Li("onDisconnect().update() called with empty data.  Don't do anything."),void Zh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ui(t,(l,f)=>{const m=Rr(f);$_(n.onDisconnect_,br(e,l),m)}),Zh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ho{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:Yx(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const e=sP(this._queryParams),t=jx(e);return"{}"===t?"default":t}get _queryObject(){return sP(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof ho))return!1;const t=this._repo===e._repo,r=Qx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function wV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function HT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Fl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Kc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ol)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===sr){if(null!=e&&!Zw(e)||null!=t&&!Zw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof n1||n.getIndex()===r1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $T(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Va extends ho{constructor(e,t){super(e,t,new yT,!1)}get parent(){const e=$N(this._path);return null===e?null:new Va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=dg(this.ref,e);return new cg(this._node.getChild(t),r,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new cg(i,dg(this.ref,r),sr)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tO(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?dg(n._root,e):n._root}function nO(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=$1(e,n._repo.repoInfo_.nodeAdmin);BP("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Pl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),tO(n,t.path.toString())}function dg(n,e){return null===en((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Yw("child","path",t,!1)):Yw("child","path",e,!1),new Va(n._repo,br(n._path,e));var t}function q1(n,e){n=(0,L.m9)(n),Ua("set",n._path),Ll("set",e,n._path,!1);const t=new L.BH;return U1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function P3(n,e){VP("update",e,n._path,!1);const t=new L.BH;return function _3(n,e,t,r){Z_(n,"update",{path:e.toString(),value:t});let i=!0;const a=Qw(n),l={};if(Ui(t,(f,m)=>{i=!1,l[f]=OP(br(e,f),Rr(m),n.serverSyncTree_,a)}),i)Li("update() called with empty data.  Don't do anything."),Zh(0,r,"ok",void 0);else{const f=VT(n),m=function $B(n,e,t,r){!function oB(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=p1(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=or.fromObject(t);return W_(n,new G_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);UT(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,T)=>{const S="ok"===v;S||_s("update at "+e+" failed: "+v);const k=Wh(n.serverSyncTree_,f,!S),U=k.length>0?z_(n,e):e;qo(n.eventQueue_,U,k),Zh(0,r,v,T)}),Ui(t,v=>{const T=j1(n,br(e,v));z_(n,T)}),qo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function O3(n){n=(0,L.m9)(n);const e=new G1(()=>{}),t=new Jw(e);return function m3(n,e,t){const r=function zB(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,T)=>{const S=qs(v,t);r=r||Gh(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Gh(i,Tn()):(i=new IP,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Hh(r,!0,!1):null;return function MB(n){return IT(n.viewCache_)}(TP(i,e,TT(n.pendingWriteTree_,e._path),a?l.getNode():Zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Rr(i).withIndex(e._queryParams.getIndex());let l;if(I1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=$w(n.serverSyncTree_,e._path,a);else{const f=Gw(n.serverSyncTree_,e);l=RP(n.serverSyncTree_,e._path,a,f)}return qo(n.eventQueue_,e._path,l),kT(n.serverSyncTree_,e,t,null,!0),a},i=>(Z_(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new cg(r,new Va(n._repo,n._path),n._queryParams.getIndex()))}class Jw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new JP("value",this,new cg(e.snapshotNode,new Va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new XP(this,e,t):null}matches(e){return e instanceof Jw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class GT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new XP(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=dg(new Va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new JP(e.type,this,new cg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof GT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Xw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(T,S)=>{V1(n._repo,n,f),m(T,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new G1(t,a||void 0),f="value"===e?new Jw(l):new GT(e,l);return function b3(n,e,t){let r;r=".info"===en(e._path)?I1(n.infoSyncTree_,e,t):I1(n.serverSyncTree_,e,t),jP(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>V1(n._repo,n,f)}function W1(n,e,t,r){return Xw(n,"value",e,t,r)}function rO(n,e,t,r){return Xw(n,"child_added",e,t,r)}function iO(n,e,t,r){return Xw(n,"child_changed",e,t,r)}function sO(n,e,t,r){return Xw(n,"child_moved",e,t,r)}function oO(n,e,t,r){return Xw(n,"child_removed",e,t,r)}function aO(n,e,t){let r=null;const i=t?new G1(t):null;"value"===e?r=new Jw(i):e&&(r=new GT(e,i)),V1(n._repo,n,r)}class ku{}class uO extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ll("endAt",this._value,e._path,!0);const t=a1(e._queryParams,this._value,this._key);if($T(t),zh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ho(e._repo,e._path,t,e._orderByCalled)}}class L3 extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ll("endBefore",this._value,e._path,!1);const t=function ZV(n,e,t){let r,i;return n.index_===Fl?("string"==typeof e&&(e=nP(e)),i=a1(n,e,t)):(r=null==t?Kc:nP(t),i=a1(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if($T(t),zh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ho(e._repo,e._path,t,e._orderByCalled)}}class lO extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ll("startAt",this._value,e._path,!0);const t=o1(e._queryParams,this._value,this._key);if($T(t),zh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ho(e._repo,e._path,t,e._orderByCalled)}}class B3 extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ll("startAfter",this._value,e._path,!1);const t=function WV(n,e,t){let r;if(n.index_===Fl)"string"==typeof e&&(e=tP(e)),r=o1(n,e,t);else{let i;i=null==t?Ol:tP(t),r=o1(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),zh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ho(e._repo,e._path,t,e._orderByCalled)}}class H3 extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ho(e._repo,e._path,function GV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class G3 extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ho(e._repo,e._path,function qV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class W3 extends ku{constructor(e){super(),this._path=e}_apply(e){HT(e,"orderByChild");const t=new Nn(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new n1(t),i=vT(e._queryParams,r);return zh(i),new ho(e._repo,e._path,i,!0)}}class z3 extends ku{_apply(e){HT(e,"orderByKey");const t=vT(e._queryParams,Fl);return zh(t),new ho(e._repo,e._path,t,!0)}}class Y3 extends ku{_apply(e){HT(e,"orderByPriority");const t=vT(e._queryParams,sr);return zh(t),new ho(e._repo,e._path,t,!0)}}class J3 extends ku{_apply(e){HT(e,"orderByValue");const t=vT(e._queryParams,r1);return zh(t),new ho(e._repo,e._path,t,!0)}}class ej extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ll("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uO(this._value,this._key)._apply(new lO(this._value,this._key)._apply(e))}}function Nu(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function OB(n){(0,L.hu)(!xT,"__referenceConstructor has already been defined"),xT=n})(Va),function BB(n){(0,L.hu)(!MT,"__referenceConstructor has already been defined"),MT=n}(Va);const Z1={};function dO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Pl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Li("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=$1(a,i),f=l.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=$1(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const T=i&&m?new Mw(Mw.OWNER):new KU(n.name,n.options,e);BP("Invalid Firebase Database URL",l),tn(l.path)||Pl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function sj(n,e,t,r){let i=Z1[e.name];i||(i={},Z1[e.name]=i);let a=i[n.toURLString()];return a&&Pl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new f3(n,false,t,r),i[n.toURLString()]=a,a}(f,n,T,new zU(n.name,t));return new aj(S,n)}class aj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function p3(n,e,t){if(n.stats_=Zx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new wT(n.repoInfo_,(r,i,a,l)=>{qP(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>WP(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new sg(n.repoInfo_,e,(r,i,a,l)=>{qP(n,r,i,a,l)},r=>{WP(n,r)},r=>{!function g3(n,e){Ui(e,(t,r)=>{L1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function JU(n,e){const t=n.toString();return Wx[t]||(Wx[t]=e()),Wx[t]}(n.repoInfo_,()=>new XV(n.stats_,n.server_)),n.infoData_=new zV,n.infoSyncTree_=new xP({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=$w(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),L1(n,"connected",!1),n.serverSyncTree_=new xP({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);qo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,Tn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ij(n,e){const t=Z1[e];(!t||t[n.key]!==n)&&Pl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zP(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pl("Cannot call "+e+" on a deleted database.")}}function hO(){MN.IS_TRANSPORT_INITIALIZED&&_s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function uj(){hO(),Bh.forceDisallow()}function lj(){hO(),U_.forceDisallow(),Bh.forceAllow()}function hj(n,e){dN(n,e)}const pj={".sv":"timestamp"};class _j{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}sg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},sg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function fj(n){oN(Wi.SDK_VERSION),(0,Wi._registerComponent)(new io.wA("database",(e,{instanceIdentifier:t})=>dO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Wi.registerVersion)(iN,sN,n),(0,Wi.registerVersion)(iN,sN,"esm2017")}();const Ej=new Vo.Yd("@firebase/database-compat"),pO=function(n){Ej.warn("FIREBASE WARNING: "+n)};class Ij{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,pO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Tj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Kh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Yw("DataSnapshot.child","path",e,!1),new Kh(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Yw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Kh(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Wo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=ts.getCancelAndContextArgs_("Query.on",r,i),f=(v,T)=>{t.call(l.context,new Kh(this.database,v),T)};f.userCallback=t,f.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return W1(this._delegate,f,m),t;case"child_added":return rO(this._delegate,f,m),t;case"child_removed":return oO(this._delegate,f,m),t;case"child_changed":return iO(this._delegate,f,m),t;case"child_moved":return sO(this._delegate,f,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,aO(this._delegate,e,i)}else aO(this._delegate,e)}get(){return O3(this._delegate).then(e=>new Kh(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=ts.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,f=(v,T)=>{const S=new Kh(this.database,v);t&&t.call(a.context,S,T),l.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":W1(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":rO(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":oO(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":iO(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":sO(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ts(this.database,Nu(this._delegate,function $3(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new H3(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ts(this.database,Nu(this._delegate,function q3(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new G3(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ts(this.database,Nu(this._delegate,function Z3(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yw("orderByChild","path",n,!1),new W3(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ts(this.database,Nu(this._delegate,function K3(){return new z3}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ts(this.database,Nu(this._delegate,function Q3(){return new Y3}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ts(this.database,Nu(this._delegate,function X3(){return new J3}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ts(this.database,Nu(this._delegate,function V3(n=null,e){return Kw("startAt","key",e,!0),new lO(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ts(this.database,Nu(this._delegate,function j3(n,e){return Kw("startAfter","key",e,!0),new B3(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ts(this.database,Nu(this._delegate,function F3(n,e){return Kw("endAt","key",e,!0),new uO(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ts(this.database,Nu(this._delegate,function U3(n,e){return Kw("endBefore","key",e,!0),new L3(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ts(this.database,Nu(this._delegate,function tj(n,e){return Kw("equalTo","key",e,!0),new ej(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Wo(this.database,new Va(this._delegate._repo,this._delegate._path))}}class Wo extends ts{constructor(e,t){super(e,new ho(t._repo,t._path,new yT,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Wo(this.database,dg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Wo(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Wo(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=q1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,pO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ua("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=P3(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function N3(n,e,t){if(Ua("setWithPriority",n._path),Ll("setWithPriority",e,n._path,!1),F1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return U1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function M3(n){return Ua("remove",n._path),q1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function yj(n,e,t){var r;if(n=(0,L.m9)(n),Ua("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new L.BH,f=W1(n,()=>{});return function I3(n,e,t,r,i,a){Z_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:uN(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=B1(n,e,void 0);l.currentInputSnapshot=f;const m=l.update(f.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{zw("transaction failed: Data returned ",m,l.path),l.status=0;const v=OT(n.transactionQueueTree_,e),T=lg(v)||[];let S;T.push(l),N1(v,T),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(S=(0,L.DV)(m,".priority"),(0,L.hu)(Zw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(NT(n.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();const k=Qw(n),U=Rr(m,S),z=R1(U,f,k);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=z,l.currentWriteId=VT(n);const ge=C1(n.serverSyncTree_,e,z,l.currentWriteId,l.applyLocally);qo(n.eventQueue_,e,ge),BT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,T)=>{let S=null;m?a.reject(m):(S=new cg(T,new Va(n._repo,n._path),sr),a.resolve(new _j(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Tj(a.committed,new Kh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function k3(n,e){n=(0,L.m9)(n),Ua("setPriority",n._path),F1("setPriority",e,!1);const t=new L.BH;return U1(n._repo,br(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function R3(n,e){n=(0,L.m9)(n),Ua("push",n._path),Ll("push",e,n._path,!0);const t=GP(n._repo),r=BV(t),i=dg(n,r),a=dg(n,r);let l;return l=null!=e?q1(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Wo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Wo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ua("Reference.onDisconnect",this._delegate._path),new Ij(new eO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class eE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:uj,forceLongPolling:lj}}useEmulator(e,t,r={}){!function fO(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Pl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Mw(Mw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new Mw(l)}!function rj(n,e,t,r){n.repoInfo_=new Gx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Wo){const t=nO(this._delegate,e.toString());return new Wo(this,t)}{const t=tO(this._delegate,e);return new Wo(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=nO(this._delegate,e);return new Wo(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function cj(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),zP(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function dj(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function C3(n){n.persistentConnection_&&n.persistentConnection_.resume($P)}(n._repo)}(this._delegate)}}eE.ServerValue={TIMESTAMP:function gj(){return pj}(),increment:n=>function mj(n){return{".sv":{increment:n}}}(n)};var Sj=Object.freeze({__proto__:null,initStandalone:function Dj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){oN(t);const l=new io.zt("auth-internal",new io.H0("database-standalone"));return l.setComponent(new io.wA("auth-internal",()=>r,"PRIVATE")),{instance:new eE(dO(n,l,void 0,e,a),n),namespace:i}}});const Aj=eE.ServerValue;function gO(n){return null==n}function mO(n){return"function"==typeof n.set}function _O(n,e){return mO(e)?e:n.ref(e)}function yO(n,e){if(function Rj(n){return"string"==typeof n}(n))return e.stringCase();if(mO(n))return e.firebaseCase();if(function Mj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function tE(n,e,t="on",r=cc.z){return new yr.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,gt.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,mM.B)())}function vO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Pj(n,e){const{payload:t,prevKey:r,key:i}=e,a=vO(n,i),l=function Nj(n,e){if(gO(e))return 0;{const t=vO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function wO(n){return(gO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function EO(n,e,t){return function kj(n,e,t){return tE(n,"value","once",t).pipe(xn(r=>{const i=[rt(r)];return e.forEach(a=>i.push(tE(n,a,"on",t))),(0,yw.T)(...i).pipe(hi(Pj,[]))}),Dy())}(n,e=wO(e),t)}function bO(n,e,t){const r=(e=wO(e)).map(i=>tE(n,i,"on",t));return(0,yw.T)(...r)}function CO(n,e){return function(r,i){return yO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Uj(n){return function(t){return t?yO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function IO(n,e){return function(){return tE(n,"value","on",e)}}!function xj(n){n.INTERNAL.registerComponent(new io.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new eE(i,r)},"PUBLIC").setServiceProps({Reference:Wo,Query:ts,Database:eE,DataSnapshot:Kh,enableLogging:hj,INTERNAL:Sj,ServerValue:Aj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Sy.Z);const jj=new d.OlP("angularfire2.realtimeDatabaseURL"),Hj=new d.OlP("angularfire2.database.use-emulator");let TO=(()=>{class n{constructor(t,r,i,a,l,f,m,v,T,S,k,U,z,ge,Ie){this.schedulers=f;const lt=m,ht=(0,Lr.on)(t,l,r);v&&hx(ht,l,T,k,U,z,S,ge),this.database=(0,Lr.cc)(`${ht.name}.database.${i}`,"AngularFireDatabase",ht.name,()=>{const ct=l.runOutsideAngular(()=>ht.database(i||void 0));return lt&&ct.useEmulator(...lt),ct},[lt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>_O(this.database,t));let a=i;return r&&(a=r(i)),function Vj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:CO(r,"update"),set:CO(r,"set"),push:i=>r.push(i),remove:Uj(r),snapshotChanges:i=>EO(n,i,t).pipe(pn.iC),stateChanges:i=>bO(n,i,t).pipe(pn.iC),auditTrail:i=>function Oj(n,e,t){return function Lj(n,e,t){return function Fj(n,e){return tE(n,"value","on",e).pipe((0,gt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function FU(...n){const e=(0,ou.jO)(n);return(0,Un.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,Gi.Xf)(n[m]).subscribe((0,wn.x)(r,v=>{a[m]=v,!f&&!l[m]&&(l[m]=!0,(f=l.every(us.y))&&(l=null))},Lx.Z));t.subscribe((0,wn.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,gt.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function LU(n){return(0,Un.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,wn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,gt.U)(i=>i.actions))}(n,bO(n,e).pipe(hi((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(pn.iC),valueChanges:(i,a)=>EO(n,i,t).pipe((0,gt.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),pn.iC)}}(a,this)}object(t){return function Bj(n,e){return{query:n,snapshotChanges:()=>IO(n,e.schedulers.outsideAngular)().pipe(pn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>IO(n,e.schedulers.outsideAngular)().pipe(pn.iC,(0,gt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>_O(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lr.Dh),d.LFG(Lr.xv,8),d.LFG(jj,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(Hj,8),d.LFG(bw,8),d.LFG(ox,8),d.LFG(ax,8),d.LFG(ux,8),d.LFG(lx,8),d.LFG(cx,8),d.LFG(dx,8),d.LFG(Ew,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$j=(()=>{class n{constructor(){ZI.Z.registerVersion("angularfire",pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[TO]}),n})(),qT=(()=>{class n{constructor(t){this.db=t,this.dbPath="/order",this.orderRef=t.list(this.dbPath)}getAll(){return this.orderRef}create(t){return this.orderRef.push(t)}update(t,r){return this.orderRef.update(t,r)}delete(t){return this.orderRef.remove(t)}deleteAll(){return this.orderRef.remove()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(TO))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gj=["*"];let WT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-landing-page"]],ngContentSelectors:Gj,decls:29,vars:0,consts:[[1,"w-full","h-screen"],["id","bottom-navigation",1,"block","fixed","inset-x-0","bottom-0","z-10","bg-white","shadow"],["id","tabs",1,"flex","justify-between"],["routerLink","/dashboard",1,"w-full","focus:text-teal-500","hover:text-teal-500","justify-center","inline-block","text-center","pt-2","pb-1"],["width","25","height","25","viewBox","0 0 42 42",1,"inline-block","mb-1"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["d","M21.0847458,3.38674884 C17.8305085,7.08474576 17.8305085,10.7827427 21.0847458,14.4807396 C24.3389831,18.1787365 24.3389831,22.5701079 21.0847458,27.6548536 L21.0847458,42 L8.06779661,41.3066256 L6,38.5331279 L6,26.2681048 L6,17.2542373 L8.88135593,12.4006163 L21.0847458,2 L21.0847458,3.38674884 Z","fill","currentColor","fill-opacity","0.1"],["d","M11,8 L33,8 L11,8 Z M39,17 L39,36 C39,39.3137085 36.3137085,42 33,42 L11,42 C7.6862915,42 5,39.3137085 5,36 L5,17 L7,17 L7,36 C7,38.209139 8.790861,40 11,40 L33,40 C35.209139,40 37,38.209139 37,36 L37,17 L39,17 Z","fill","currentColor"],["d","M22,27 C25.3137085,27 28,29.6862915 28,33 L28,41 L16,41 L16,33 C16,29.6862915 18.6862915,27 22,27 Z","stroke","currentColor","stroke-width","2","fill","currentColor","fill-opacity","0.1"],["fill","currentColor","transform","translate(32.000000, 11.313708) scale(-1, 1) rotate(-45.000000) translate(-32.000000, -11.313708) ","x","17","y","10.3137085","width","30","height","2","rx","1"],["fill","currentColor","transform","translate(12.000000, 11.313708) rotate(-45.000000) translate(-12.000000, -11.313708) ","x","-3","y","10.3137085","width","30","height","2","rx","1"],[1,"tab","tab-home","block","text-xs"],["routerLink","/order",1,"w-full","focus:text-teal-500","hover:text-teal-500","justify-center","inline-block","text-center","pt-2","pb-1"],["d","M20.5890101,0.254646884 C12.8696785,5.50211755 8.0025785,14.258415 14.1941217,18.8708225 C23.16683,25.5550669 13.3362326,40.2698884 33.1021758,38.4149164 C29.6814884,40.8311956 25.5065164,42.2507054 21,42.2507054 C9.40202025,42.2507054 0,32.8486852 0,21.2507054 C0,9.79003409 9.18071714,0.473634138 20.5890101,0.254646884 Z","fill","currentColor","opacity","0.1"],["d","M25.9500282,20.3643496 L22.4308312,38.2677802 C22.3775703,38.5387376 22.1147395,38.7152155 21.8437821,38.6619546 C21.6570955,38.6252584 21.507413,38.4857901 21.4576354,38.3021581 L16.5951895,20.3643496 L20.099732,4.44663907 C20.1385204,4.27046145 20.2692032,4.12883813 20.4417012,4.07604096 C20.7057521,3.99522179 20.9853245,4.14376046 21.0661436,4.40781135 L25.9500282,20.3643496 Z M21.3022963,22.2852638 C22.4068658,22.2852638 23.3022963,21.3898333 23.3022963,20.2852638 C23.3022963,19.1806943 22.4068658,18.2852638 21.3022963,18.2852638 C20.1977268,18.2852638 19.3022963,19.1806943 19.3022963,20.2852638 C19.3022963,21.3898333 20.1977268,22.2852638 21.3022963,22.2852638 Z","fill","currentColor","transform","translate(21.272609, 20.629524) rotate(-315.000000) translate(-21.272609, -20.629524) "],["stroke","currentColor","stroke-width","2","cx","21","cy","21","r","20"],[1,"tab","tab-explore","block","text-xs"],["routerLink","/profile",1,"w-full","focus:text-teal-500","hover:text-teal-500","justify-center","inline-block","text-center","pt-2","pb-1"],["width","25","height","25","viewBox","0 0 42 42","data-name","Layer 1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",1,"inline-block","mb-1"],["d","M32,32A10,10,0,1,1,42,22,10,10,0,0,1,32,32Zm0-15.91a6,6,0,1,0,6,6A6,6,0,0,0,32,16.08Z"],["d","M32,59.16a26.83,26.83,0,0,1-15.68-5,2,2,0,0,1-.83-1.42,7.13,7.13,0,0,1,0-.8,16.54,16.54,0,1,1,33.08,0,7.13,7.13,0,0,1,0,.8,2,2,0,0,1-.83,1.42A26.83,26.83,0,0,1,32,59.16Zm-12.53-7.7a23.07,23.07,0,0,0,25.06,0,12.54,12.54,0,0,0-25.06,0Zm27.05,1.07h0Z"],["d","M32,59.16a26.83,26.83,0,0,1-15.68-5,27.15,27.15,0,1,1,34.22-42,2,2,0,0,1-2.74,2.92A23.15,23.15,0,1,0,18.63,50.89a23.07,23.07,0,0,0,26.73,0,23.17,23.17,0,0,0,8.18-27.4A2,2,0,1,1,57.26,22a27.16,27.16,0,0,1-9.59,32.13A26.83,26.83,0,0,1,32,59.16Z"],[1,"tab","tab-account","block","text-xs"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.Hsn(1),d.TgZ(2,"section",1)(3,"div",2)(4,"a",3),d.O4$(),d.TgZ(5,"svg",4)(6,"g",5),d._UZ(7,"path",6)(8,"path",7)(9,"path",8)(10,"rect",9)(11,"rect",10),d.qZA()(),d.kcU(),d.TgZ(12,"span",11),d._uU(13,"Home"),d.qZA()(),d.TgZ(14,"a",12),d.O4$(),d.TgZ(15,"svg",4)(16,"g",5),d._UZ(17,"path",13)(18,"path",14)(19,"circle",15),d.qZA()(),d.kcU(),d.TgZ(20,"span",16),d._uU(21,"Panggil Tukang"),d.qZA()(),d.TgZ(22,"a",17),d.O4$(),d.TgZ(23,"svg",18),d._UZ(24,"path",19)(25,"path",20)(26,"path",21),d.qZA(),d.kcU(),d.TgZ(27,"span",22),d._uU(28,"Account"),d.qZA()()()()())},directives:[xf],styles:[""]}),n})();const{toast:z1}=O(3697);let DO=(()=>{class n{constructor(){}successMessage(t){z1().success("~",t).with({shape:"pill",duration:4e3,speed:1e3,positionX:"center",positionY:"top",color:"bg-blue-500",fontColor:"white",fontTone:200}).show()}errorMessage(t){z1().success("~",t).with({shape:"pill",duration:4e3,speed:1e3,positionX:"center",positionY:"top",color:"bg-red-500",fontColor:"white",fontTone:200}).show()}warningsMessage(t){z1().success("~",t).with({shape:"pill",duration:4e3,speed:1e3,positionX:"center",positionY:"top",color:"bg-amber-100",fontColor:"white",fontTone:200}).show()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"button",15),d.NdJ("click",function(){return d.CHM(t),d.oxw().deleteOrder()}),d._uU(2," Delete "),d.qZA(),d.TgZ(3,"button",16),d.NdJ("click",function(){return d.CHM(t),d.oxw().processCariTukang()}),d._uU(4,"Cari Tukang"),d.qZA()()}}let Wj=(()=>{class n{constructor(t,r,i){this.orderService=t,this.toastService=r,this.authService=i,this.newItemEvent=new d.vpe,this.message=""}ngOnInit(){this.message="",this.user=this.authService.userData}back(){this.newItemEvent.emit(!1)}deleteOrder(){this.orderService.delete(this.order.key).then(()=>{this.newItemEvent.emit(),this.message="Delete order successfully!"}).catch(t=>console.log(t))}processCariTukang(){let t="MENCARI TUKANG";this.orderService.update(this.order.key,{status:t}).then(()=>{this.order.status=t,this.message="The status was updated successfully!",this.toastService.successMessage(this.message),this.back()}).catch(r=>{console.log(r),this.toastService.errorMessage(r)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qT),d.Y36(DO),d.Y36(kl))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detail"]],inputs:{order:"order"},outputs:{newItemEvent:"newItemEvent"},decls:48,vars:13,consts:[[1,"bg-slate-100","overflow-y-auto","bottom-10"],[1,"w-full","grid","grid-cols-2","top-0","p-5","bg-white"],[1,"col"],[1,"bg-transparent","hover:bg-blue-500","text-blue-700","font-semibold","hover:text-white","py-2","px-4","border","border-blue-500","hover:border-transparent","rounded",3,"click"],[1,"text-2xl","text-right"],[1,"font-semibold","text-xl"],[1,"w-full","m-auto","gap-4"],[1,"grid","grid-cols-1"],[1,"flex","justify-center","w-full"],[1,"rounded-lg","shadow-lg","bg-white","w-full"],[1,"p-6"],[1,"text-gray-700","text-base"],[1,"font-extralight","text-xs"],["target","_blank",1,"font-semibold","text-blue-700","text-xs",3,"href"],[4,"ngIf"],[1,"mt-2","mb-2","w-full","bg-transparent","hover:bg-red-500","text-red-700","font-semibold","hover:text-white","py-2","px-4","border","border-red-500","hover:border-transparent","rounded",3,"click"],["type","button",1,"mt-2","mb-2","w-full","inline-block","px-6","py-2.5","bg-blue-600","text-white","font-medium","text-xs","leading-normal","uppercase","rounded","shadow-md","hover:bg-blue-700","hover:shadow-lg","focus:bg-blue-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-blue-800","active:shadow-lg","transition","duration-150","ease-in-out",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),d.NdJ("click",function(){return r.back()}),d._uU(4," Back "),d.qZA()(),d.TgZ(5,"div",2)(6,"p",4)(7,"span",5),d._uU(8,"Detail Order"),d.qZA()()()(),d.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"p",11),d._uU(15," Tanggal Order "),d.qZA(),d.TgZ(16,"p",12),d._uU(17),d.ALo(18,"date"),d.qZA(),d.TgZ(19,"p",11),d._uU(20," Status "),d.qZA(),d.TgZ(21,"p",12),d._uU(22),d.qZA(),d.TgZ(23,"p",11),d._uU(24," Nama Penanggung Jawab "),d.qZA(),d.TgZ(25,"p",12),d._uU(26),d.qZA(),d.TgZ(27,"p",11),d._uU(28," No. HP "),d.qZA(),d.TgZ(29,"p",12),d._uU(30),d.qZA(),d.TgZ(31,"p",11),d._uU(32," e-mail "),d.qZA(),d.TgZ(33,"p",12),d._uU(34),d.qZA(),d.TgZ(35,"p",11),d._uU(36," Koordinat "),d.qZA(),d.TgZ(37,"a",13),d._uU(38),d.qZA(),d.TgZ(39,"p",11),d._uU(40," Detail Alamat "),d.qZA(),d.TgZ(41,"p",12),d._uU(42),d.qZA(),d.TgZ(43,"p",11),d._uU(44," Detail Order "),d.qZA(),d.TgZ(45,"p",12),d._uU(46),d.qZA()()()()()(),d.YNc(47,qj,5,0,"div",14),d.qZA()),2&t&&(d.xp6(17),d.Oqu(d.xi3(18,10,r.order.tanggalOrder,"dd-MM-yyyy")),d.xp6(5),d.Oqu(r.order.status),d.xp6(4),d.Oqu(r.order.penanggungJawab),d.xp6(4),d.Oqu(r.order.phoneNumber),d.xp6(4),d.Oqu(r.order.email),d.xp6(3),d.MGl("href","http://maps.google.com/maps?q=",r.order.koordinat,"",d.LSH),d.xp6(1),d.Oqu(r.order.koordinat),d.xp6(4),d.Oqu(r.order.detailAlamat),d.xp6(4),d.Oqu(r.order.detailOrder),d.xp6(1),d.Q6J("ngIf","enigmanians@gmail.com"===r.user.email))},directives:[lr],pipes:[od],styles:[""]}),n})();function Zj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",8)(1,"div",9),d.NdJ("click",function(){const a=d.CHM(t).$implicit;return d.oxw(3).moveToDetail(a)}),d.TgZ(2,"div",10)(3,"div",11)(4,"div",12)(5,"h5",13),d._uU(6),d.qZA(),d._UZ(7,"hr"),d.TgZ(8,"p",14),d._uU(9),d.qZA(),d.TgZ(10,"p",14),d._uU(11),d.qZA(),d.TgZ(12,"p",15),d._uU(13),d.qZA(),d.TgZ(14,"p",16),d._uU(15),d.ALo(16,"date"),d.qZA()()()()()()}if(2&n){const t=e.$implicit;d.xp6(6),d.AsE("",t.penanggungJawab," - ",t.status,""),d.xp6(3),d.hij(" ",t.detailOrder," "),d.xp6(2),d.hij(" ",t.detailAlamat," "),d.xp6(2),d.hij(" ",t.koordinat," "),d.xp6(2),d.hij(" ",d.xi3(16,6,t.tanggalOrder,"dd-MM-yyyy")," ")}}function zj(n,e){if(1&n&&(d.TgZ(0,"div",3)(1,"div",4)(2,"p",5)(3,"span",6),d._uU(4),d.qZA()(),d.TgZ(5,"p",5)(6,"span",6),d._uU(7,"Your order"),d.qZA()()(),d.YNc(8,Zj,17,9,"div",7),d.qZA()),2&n){const t=e.ngIf,r=d.oxw(2);d.xp6(4),d.Oqu(t.displayName?t.displayName:"User"),d.xp6(4),d.Q6J("ngForOf",r.orders)}}function Kj(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,zj,9,2,"div",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.authService.userData)}}function Yj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-detail",17),d.NdJ("newItemEvent",function(i){return d.CHM(t),d.oxw().backToDashboard(i)}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("order",t.currentOrder)}}let SO=(()=>{class n{constructor(t,r){this.authService=t,this.crudService=r,this.detail=!1}ngOnInit(){this.retrieveOrders(),this.user=this.authService.userData}retrieveOrders(){this.crudService.getAll().snapshotChanges().pipe((0,gt.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.orders=t,console.log(this.orders)})}moveToDetail(t){console.log("order",t),this.currentOrder=t,this.detail=!0}backToDashboard(t){this.detail=!1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kl),d.Y36(qT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],decls:3,vars:2,consts:[[4,"ngIf"],[3,"order","newItemEvent",4,"ngIf"],["class","h-screen bg-slate-100",4,"ngIf"],[1,"h-screen","bg-slate-100"],[1,"w-full","top-0","py-5","bg-white"],[1,"text-2xl","text-center"],[1,"font-semibold"],["class","w-full m-auto p-2 gap-4 ",4,"ngFor","ngForOf"],[1,"w-full","m-auto","p-2","gap-4"],[1,"grid","grid-cols-1",3,"click"],[1,"flex","justify-center","w-full"],[1,"rounded-lg","shadow-lg","bg-white","w-full"],[1,"p-6"],[1,"text-gray-900","text-xl","font-medium","mb-2"],[1,"text-gray-700","text-base"],[1,"text-gray-700","text-sm","font-semibold"],[1,"text-gray-700","text-sm"],[3,"order","newItemEvent"]],template:function(t,r){1&t&&(d.TgZ(0,"app-landing-page"),d.YNc(1,Kj,2,1,"div",0),d.YNc(2,Yj,1,1,"app-detail",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",!r.detail),d.xp6(1),d.Q6J("ngIf",r.detail))},directives:[WT,lr,ur,Wj],pipes:[od],styles:[""]}),n})();function Qj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",3)(1,"p"),d._uU(2,"Silakan nama orang yang dapat dihubungi"),d.qZA(),d.TgZ(3,"label",7),d._uU(4,"Nama Penanggung Jawab"),d.qZA(),d.TgZ(5,"div",8)(6,"div",9),d.O4$(),d.TgZ(7,"svg",10),d._UZ(8,"path",11),d.qZA()(),d.kcU(),d._UZ(9,"input",12),d.TgZ(10,"button",13),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).nameToPhone()}),d._uU(11,"Next"),d.qZA()()()}}function Jj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",3)(1,"p"),d._uU(2,"Silakan tulis nomor Hanphone yang bisa dihubungi"),d.qZA(),d.TgZ(3,"label",14),d._uU(4,"Phone Number"),d.qZA(),d.TgZ(5,"div",8)(6,"div",9),d.O4$(),d.TgZ(7,"svg",10),d._UZ(8,"path",11),d.qZA()(),d.kcU(),d._UZ(9,"input",15),d.TgZ(10,"button",13),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).phoneToCoordinat()}),d._uU(11,"Next"),d.qZA()()()}}function Xj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",13),d.NdJ("click",function(){return d.CHM(t),d.oxw(3).setCoordinat()}),d._uU(1,"Pin"),d.qZA()}}function e6(n,e){if(1&n&&(d.TgZ(0,"div",3)(1,"p"),d._uU(2,"Silakan tulis koordinat anda saat ini"),d.qZA(),d.TgZ(3,"label",14),d._uU(4,"Koordinat"),d.qZA(),d.TgZ(5,"div",8)(6,"div",9),d.O4$(),d.TgZ(7,"svg",10),d._UZ(8,"path",11),d.qZA()(),d.kcU(),d._UZ(9,"input",16),d.YNc(10,Xj,2,0,"button",17),d.qZA()()),2&n){const t=d.oxw(2);d.xp6(10),d.Q6J("ngIf","coordinat"===t.state)}}function t6(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",18)(1,"label",19),d._uU(2,"Silakan masukkan detail alamat anda"),d.qZA(),d._UZ(3,"textarea",20),d.TgZ(4,"button",21),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).alamatToDetail()}),d._uU(5,"Next"),d.qZA()()}}function n6(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",3)(1,"label",19),d._uU(2,"Silakan masukkan detail pesanan anda"),d.qZA(),d._UZ(3,"textarea",22),d.TgZ(4,"button",21),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).proceed()}),d._uU(5,"Panggil Tukang"),d.qZA()()}}function r6(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"form",2)(2,"p",3),d._uU(3,"Hai Kak, "),d.TgZ(4,"span",4),d._uU(5),d.qZA()(),d.YNc(6,Qj,12,0,"div",5),d.YNc(7,Jj,12,0,"div",5),d.YNc(8,e6,11,1,"div",5),d.YNc(9,t6,6,0,"div",6),d.YNc(10,n6,6,0,"div",5),d.qZA()()),2&n){const t=e.ngIf,r=d.oxw();d.xp6(1),d.Q6J("formGroup",r.form),d.xp6(4),d.Oqu(t.displayName),d.xp6(1),d.Q6J("ngIf","name"===r.state),d.xp6(1),d.Q6J("ngIf","phone"===r.state),d.xp6(1),d.Q6J("ngIf","coordinat"===r.state||"detailCoordinat"===r.state),d.xp6(1),d.Q6J("ngIf","detailCoordinat"===r.state),d.xp6(1),d.Q6J("ngIf","detailOrder"===r.state)}}let i6=(()=>{class n{constructor(t,r,i,a,l){this.fb=t,this.crudService=r,this.router=i,this.authService=a,this.toastService=l,this.myDate=new Date}ngOnInit(){this.form=this.fb.group({koordinat:[null],penanggungJawab:["",[ek.required,ek.minLength(3)]],phoneNumber:[null],detailAlamat:[null],detailOrder:[null]}),this.state="name",this.user=this.authService.userData}nameToPhone(){this.form.value.penanggungJawab?this.state="phone":this.toastService.warningsMessage("Nama Harus Diisi")}phoneToCoordinat(){this.form.value.phoneNumber?this.state="coordinat":this.toastService.warningsMessage("Nomor HP Harus Diisi")}setCoordinat(){var t;navigator.geolocation.getCurrentPosition(r=>{var i;return null===(i=this.form.get("koordinat"))||void 0===i?void 0:i.setValue(r.coords.latitude+", "+r.coords.longitude)}),null===(t=this.form.controls.koordinat)||void 0===t||t.disable(),this.state="detailCoordinat"}alamatToDetail(){this.form.value.detailAlamat?this.state="detailOrder":this.toastService.warningsMessage("Detail Alamat Harus Diisi")}proceed(){var t;let r=null===(t=this.form.get("koordinat"))||void 0===t?void 0:t.value;this.form.value.koordinat=r,this.saveOrder(this.form.value)}saveOrder(t){t.email=this.user.email,t.status="MENUNGGU KONFIRMASI",t.tanggalOrder=this.myDate.toISOString(),console.log(t),this.crudService.create(t).then(()=>{console.log("Success"),this.router.navigate(["dashboard"])})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(TU),d.Y36(qT),d.Y36(mi),d.Y36(kl),d.Y36(DO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-order"]],decls:2,vars:1,consts:[["class","flex h-screen",4,"ngIf"],[1,"flex","h-screen"],[1,"m-auto","px-2",3,"formGroup"],[1,"text-center"],[1,"font-semibold"],["class","text-center",4,"ngIf"],["class","text-center  py-3",4,"ngIf"],["for","search",1,"mb-2","text-sm","font-medium","text-gray-900","sr-only","dark:text-gray-","300"],[1,"relative"],[1,"flex","absolute","inset-y-0","left-0","items-center","pl-3","pointer-events-none"],["aria-hidden","true","fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","text-gray-500","dark:text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","id","penanggungJawab","name","penanggungJawab","onkeyup","this.value = this.value.toUpperCase();","formControlName","penanggungJawab","placeholder","Nama Klien","required","true",1,"block","p-4","pl-10","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"text-white","absolute","right-2.5","bottom-2.5","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-4","py-2","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["for","search",1,"mb-2","text-sm","font-medium","text-gray-900","sr-only","dark:text-gray-300"],["type","number","id","phoneNumber","name","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required","",1,"block","p-4","pl-10","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","text","id","koordinat","name","koordinat","formControlName","koordinat","placeholder","Pin","required","","size","50",1,"block","p-4","pl-10","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit","class","text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"ngIf"],[1,"text-center","py-3"],["for","message",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-400"],["rows","4","id","detailAlamat","name","detailAlamat","formControlName","detailAlamat","placeholder","Your message...",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","button",1,"mt-2","mb-2","w-full","inline-block","px-6","py-2.5","bg-blue-600","text-white","font-medium","text-xs","leading-normal","uppercase","rounded","shadow-md","hover:bg-blue-700","hover:shadow-lg","focus:bg-blue-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-blue-800","active:shadow-lg","transition","duration-150","ease-in-out",3,"click"],["rows","4","id","detailOrder","name","detailOrder","formControlName","detailOrder","placeholder","Detail Pesanan...",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"]],template:function(t,r){1&t&&(d.TgZ(0,"app-landing-page"),d.YNc(1,r6,11,7,"div",0),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.authService.userData))},directives:[WT,lr,O_,N_,aT,KI,Ck,Px,uT,Rx],styles:[""]}),n})();function s6(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"div",2)(2,"div",3),d._UZ(3,"img",4),d.TgZ(4,"p",5),d._uU(5),d.qZA(),d.TgZ(6,"p",6),d._uU(7),d.qZA(),d.TgZ(8,"p",6),d._uU(9),d.qZA()()(),d.TgZ(10,"div",2)(11,"div",3)(12,"button",7),d.NdJ("click",function(){return d.CHM(t),d.oxw().authService.SignOut()}),d._uU(13,"Signout"),d.qZA()()()()}if(2&n){const t=e.ngIf;d.xp6(3),d.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",d.LSH),d.s9C("alt",t.displayName),d.xp6(2),d.Oqu(t.displayName?t.displayName:"User"),d.xp6(2),d.Oqu(t.email),d.xp6(2),d.Oqu(t.uid)}}let o6=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kl))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-profile"]],decls:2,vars:1,consts:[["class","py-4 bg-slate-200",4,"ngIf"],[1,"py-4","bg-slate-200"],[1,"flex","w-full","mt-5"],[1,"mx-auto","gap-4"],["alt","",1,"h-[100px]","mg:h-[250px]","mx-auto","rounded-full",3,"src","alt"],[1,"font-bold","text-2xl","md:text-4xl","text-center"],[1,"font-extralight","text-sm","md:text-2xl","text-center"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"app-landing-page"),d.YNc(1,s6,14,5,"div",0),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.authService.userData))},directives:[WT,lr],styles:[""]}),n})(),nE=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["home"]),!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kl),d.LFG(mi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a6=[{path:"",component:SO,pathMatch:"full",canActivate:[nE]},{path:"home",component:OU},{path:"home/login",component:SU},{path:"register",component:AU},{path:"forgot-password",component:DU},{path:"landing-page",component:WT,canActivate:[nE]},{path:"dashboard",component:SO,canActivate:[nE]},{path:"order",component:i6,canActivate:[nE]},{path:"profile",component:o6,canActivate:[nE]},{path:"verify-email-address",component:RU}];let u6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Rf.forRoot(a6)],Rf]}),n})();const l6=function(n,e,t){return{left:n,opacity:e,transition:t}};function c6(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"div",3),d.qZA()()),2&n){const t=d.oxw();d.Q6J("ngStyle",d.kEZ(1,l6,t.windowWidth,t.opacityChange,t.splashTransition))}}let d6=(()=>{class n{constructor(){this.showSplash=!0,this.opacityChange=1,this.animationDuration=.5,this.duration=1}ngOnInit(){setTimeout(()=>{let t="";t="opacity "+this.animationDuration+"s",this.opacityChange=0,this.splashTransition=t,setTimeout(()=>{this.showSplash=!this.showSplash},1e3*this.animationDuration)},1e3*this.duration)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-splash-screen"]],decls:1,vars:1,consts:[["class","app-splash-screen",3,"ngStyle",4,"ngIf"],[1,"app-splash-screen",3,"ngStyle"],[1,"app-splash-inner"],[1,"app-logo"]],template:function(t,r){1&t&&d.YNc(0,c6,3,5,"div",0),2&t&&d.Q6J("ngIf",r.showSplash)},directives:[lr,td],styles:[".app-label[_ngcontent-%COMP%]{margin-top:32px;color:#fff;font-size:2.5em;font-family:Pacifico,cursive}.app-splash-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.app-logo[_ngcontent-%COMP%]{background:url(splashscreen.745a016a4d65f6c7.png);background-repeat:no-repeat;max-width:100%;background-position:center;background-size:contain;width:100px;height:100px}.app-splash-screen[_ngcontent-%COMP%]{background:#ffffff;position:fixed;inset:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;z-index:100;opacity:1}"]}),n})(),h6=(()=>{class n{constructor(){this.title="sipjkcd"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-splash-screen")(1,"router-outlet")},directives:[d6,Nd],styles:[""]}),n})();const AO="firebasestorage.googleapis.com",xO="storageBucket";class Mr extends L.ZR{constructor(e,t,r=0){super(K1(e),`Firebase Storage: ${t} (${K1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return K1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function K1(n){return"storage/"+n}function Y1(){return new Mr("unknown","An unknown error occurred, please check the error payload for server response.")}function RO(){return new Mr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function MO(){return new Mr("canceled","User canceled the upload/download.")}function kO(){return new Mr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function K_(n){return new Mr("invalid-argument",n)}function NO(){return new Mr("app-deleted","The Firebase app was deleted.")}function PO(n){return new Mr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rE(n,e){return new Mr("invalid-format","String does not match format '"+n+"': "+e)}function iE(n){throw new Mr("internal-error","Internal error: "+n)}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch(i){return new ys(e,"")}if(""===r.path)return r;throw function C6(n){return new Mr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(dt){dt.path_=decodeURIComponent(dt.path)}const S=t.replace(/[.]/g,"\\."),ct=[{regex:f,indices:{bucket:1,path:3},postModify:function a(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===AO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let dt=0;dt<ct.length;dt++){const xt=ct[dt],Ft=xt.regex.exec(e);if(Ft){let Ou=Ft[xt.indices.path];Ou||(Ou=""),r=new ys(Ft[xt.indices.bucket],Ou),xt.postModify(r);break}}if(null==r)throw function b6(n){return new Mr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class A6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ZT(n){return"string"==typeof n||n instanceof String}function OO(n){return Q1()&&n instanceof Blob}function Q1(){return"undefined"!=typeof Blob&&!(0,L.UG)()}function J1(n,e,t,r){if(r<e)throw K_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw K_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Qc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Yh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Yh||(Yh={})),Yh))();function LO(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class P6{constructor(e,t,r,i,a,l,f,m,v,T,S,k=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=S,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,z)=>{this.resolve_=U,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function M6(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=Y1();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?NO():MO():RO())};this.canceled_?t(0,new zT(!1,null,!0)):this.backoffId_=function x6(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function T(...Ie){v||(v=!0,e.apply(null,Ie))}function S(Ie){i=setTimeout(()=>{i=null,n(U,m())},Ie)}function k(){a&&clearTimeout(a)}function U(Ie,...lt){if(v)return void k();if(Ie)return k(),void T.call(null,Ie,...lt);if(m()||l)return k(),void T.call(null,Ie,...lt);let ct;r<64&&(r*=2),1===f?(f=2,ct=0):ct=1e3*(r+Math.random()),S(ct)}let z=!1;function ge(Ie){z||(z=!0,k(),!v&&(null!==i?(Ie||(f=2),clearTimeout(i),S(0)):Ie||(f=1)))}return S(0),a=setTimeout(()=>{l=!0,ge(!0)},t),ge}((r,i)=>{if(i)return void r(!1,new zT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===Yh.NO_ERROR,m=a.getStatus();if((!f||LO(m,this.additionalRetryCodes_))&&this.retry){const T=a.getErrorCode()===Yh.ABORT;return void r(!1,new zT(!1,null,T))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new zT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function R6(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function j6(...n){const e=function B6(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Q1())return new Blob(n);throw new Mr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class X1{constructor(e,t){this.data=e,this.contentType=t||null}}function eR(n,e){switch(n){case Zo.RAW:return new X1(UO(e));case Zo.BASE64:case Zo.BASE64URL:return new X1(VO(n,e));case Zo.DATA_URL:return new X1(function q6(n){const e=new BO(n);return e.base64?VO(Zo.BASE64,e.rest):function G6(n){let e;try{e=decodeURIComponent(n)}catch(t){throw rE(Zo.DATA_URL,"Malformed data URL.")}return UO(e)}(e.rest)}(e),function W6(n){return new BO(n).contentType}(e))}throw Y1()}function UO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function VO(n,e){switch(n){case Zo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw rE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Zo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw rE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function $6(n){if("undefined"==typeof atob)throw function S6(n){return new Mr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:rE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class BO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rE(Zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Z6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ul{constructor(e,t){let r=0,i="";OO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(OO(this.data_)){const i=function H6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ul(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ul(r,!0)}}static getBlob(...e){if(Q1()){const t=e.map(r=>r instanceof Ul?r.data_:r);return new Ul(j6.apply(null,t))}{const t=e.map(l=>ZT(l)?eR(Zo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new Ul(i,!0)}}uploadData(){return this.data_}}function tR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function N6(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function jO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Y6(n,e){return e}class Ws{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Y6}}let KT=null;function sE(){if(KT)return KT;const n=[];n.push(new Ws("bucket")),n.push(new Ws("generation")),n.push(new Ws("metageneration")),n.push(new Ws("name","fullPath",!0));const t=new Ws("name");t.xform=function e(a,l){return function Q6(n){return!ZT(n)||n.length<2?n:jO(n)}(l)},n.push(t);const i=new Ws("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ws("timeCreated")),n.push(new Ws("updated")),n.push(new Ws("md5Hash",null,!0)),n.push(new Ws("cacheControl",null,!0)),n.push(new Ws("contentDisposition",null,!0)),n.push(new Ws("contentEncoding",null,!0)),n.push(new Ws("contentLanguage",null,!0)),n.push(new Ws("contentType",null,!0)),n.push(new Ws("metadata","customMetadata",!0)),KT=n,KT}function HO(n,e,t){const r=tR(e);return null===r?null:function X6(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function J6(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ys(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function nR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const $O="prefixes";class Vl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bl(n){if(!n)throw Y1()}function YT(n,e){return function t(r,i){const a=HO(n,i,e);return Bl(null!==a),a}}function Y_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function w6(){return new Mr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function v6(){return new Mr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function y6(n){return new Mr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function E6(n){return new Mr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function oE(n){const e=Y_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function _6(n){return new Mr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function qO(n,e,t){const i=Qc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Vl(i,"GET",YT(n,t),l);return f.errorHandler=oE(e),f}function s4(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=Qc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,T=new Vl(f,"GET",function r4(n,e){return function t(r,i){const a=function n4(n,e,t){const r=tR(t);return null===r?null:function t4(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[$O])for(const i of t[$O]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ys(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ys(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Bl(null!==a),a}}(n,e.bucket),v);return T.urlParams=a,T.errorHandler=Y_(e),T}function ZO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function l4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function rR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Bl(!1)}return Bl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const f4={STATE_CHANGED:"state_changed"},Zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iR(n){switch(n){case"running":case"pausing":case"canceling":return Zs.RUNNING;case"paused":return Zs.PAUSED;case"success":return Zs.SUCCESS;case"canceled":return Zs.CANCELED;default:return Zs.ERROR}}class p4{constructor(e,t,r){if(function k6(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Q_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class m4 extends class g4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw iE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw iE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Pu(){return new m4}class QO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=sE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(LO(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=RO()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function c4(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=ZO(e,r,i),f={name:l.fullPath},m=Qc(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=nR(l,t),z=new Vl(m,"POST",function U(ge){let Ie;rR(ge);try{Ie=ge.getResponseHeader("X-Goog-Upload-URL")}catch(lt){Bl(!1)}return Bl(ZT(Ie)),Ie},n.maxUploadRetryTime);return z.urlParams=f,z.headers=T,z.body=S,z.errorHandler=Y_(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function d4(n,e,t,r){const m=new Vl(t,"POST",function a(v){const T=rR(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){Bl(!1)}S||Bl(!1);const k=Number(S);return Bl(!isNaN(k)),new QT(k,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Y_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Pu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function h4(n,e,t,r,i,a,l,f){const m=new QT(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function T6(){return new Mr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let T=v;i>0&&(T=Math.min(T,i));const S=m.current;let U="";U=0===T?"finalize":v===T?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${m.current}`},ge=r.slice(S,S+T);if(null===ge)throw kO();const ct=new Vl(t,"POST",function Ie(dt,xt){const Ft=rR(dt,["active","final"]),kr=m.current+T,Ou=r.size();let lR;return lR="final"===Ft?YT(e,a)(dt,xt):null,new QT(kr,Ou,"final"===Ft,lR)},e.maxUploadRetryTime);return ct.headers=z,ct.body=ge.uploadData(),ct.progressCallback=f||null,ct.errorHandler=Y_(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(l,Pu,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=qO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function zO(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let ct="";for(let dt=0;dt<2;dt++)ct+=Math.random().toString().slice(2);return ct}();l["Content-Type"]="multipart/related; boundary="+m;const v=ZO(e,r,i),T=nR(v,t),U=Ul.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===U)throw kO();const z={name:v.fullPath},ge=Qc(a,n.host,n._protocol),lt=n.maxUploadRetryTime,ht=new Vl(ge,"POST",YT(n,t),lt);return ht.urlParams=z,ht.headers=l,ht.body=U.uploadData(),ht.errorHandler=Y_(e),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=MO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=iR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new p4(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(iR(this._state)){case Zs.SUCCESS:Q_(this._resolve.bind(null,this.snapshot))();break;case Zs.CANCELED:case Zs.ERROR:Q_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(iR(this._state)){case Zs.RUNNING:case Zs.PAUSED:e.next&&Q_(e.next.bind(e,this.snapshot))();break;case Zs.SUCCESS:e.complete&&Q_(e.complete.bind(e))();break;default:e.error&&Q_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class hg{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hg(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jO(this._location.path)}get storage(){return this._service}get parent(){const e=function z6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new hg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw PO(e)}}function XO(n,e,t){return sR.apply(this,arguments)}function sR(){return sR=(0,_e.Z)(function*(n,e,t){const i=yield eF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield XO(n,e,i.nextPageToken))}),sR.apply(this,arguments)}function eF(n,e){null!=e&&"number"==typeof e.maxResults&&J1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=s4(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Pu)}function A4(n){n._throwIfRoot("getDownloadURL");const e=function o4(n,e,t){const i=Qc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Vl(i,"GET",function i4(n,e){return function t(r,i){const a=HO(n,i,e);return Bl(null!==a),function e4(n,e,t,r){const i=tR(e);if(null===i||!ZT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Qc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+FO({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=oE(e),f}(n.storage,n._location,sE());return n.storage.makeRequestWithTokens(e,Pu).then(t=>{if(null===t)throw function D6(){return new Mr("no-download-url","The given file does not have any download URLs.")}();return t})}function tF(n,e){const t=function K6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ys(n._location.bucket,t);return new hg(n.storage,r)}function nF(n,e){if(n instanceof oR){const t=n;if(null==t._bucket)throw function I6(){return new Mr("no-default-bucket","No default bucket found. Did you set the '"+xO+"' property when initializing the app?")}();const r=new hg(t,t._bucket);return null!=e?nF(r,e):r}return void 0!==e?tF(n,e):n}function k4(n,e){if(e&&function R4(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof oR)return function M4(n,e){return new hg(n,e)}(n,e);throw K_("To use ref(service, url), the first argument must be a Storage instance.")}return nF(n,e)}function rF(n,e){const t=null==e?void 0:e[xO];return null==t?null:ys.makeFromBucketSpec(t,n)}class oR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=AO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ys.makeFromBucketSpec(i,this._host):rF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):rF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){J1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){J1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new A6(NO());{const l=function V6(n,e,t,r,i,a,l=!0){const f=FO(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function L6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function O6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function F6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(v,a),function U6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new P6(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const iF="@firebase/storage";function aF(n,e){return k4(n=(0,L.m9)(n),e)}function H4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new oR(t,r,i,e,Wi.SDK_VERSION)}!function $4(){(0,Wi._registerComponent)(new io.wA("storage",H4,"PUBLIC").setMultipleInstances(!0)),(0,Wi.registerVersion)(iF,"0.9.14",""),(0,Wi.registerVersion)(iF,"0.9.14","esm2017")}();class JT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class lF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new JT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new JT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new JT(l,this,this._ref)):{next:t.next?l=>t.next(new JT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class cF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Jc(e,this._service))}get items(){return this._delegate.items.map(e=>new Jc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Jc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function j4(n,e){return tF(n,e)}(this._delegate,e);return new Jc(t,this.storage)}get root(){return new Jc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Jc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new lF(function P4(n,e,t){return function C4(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new QO(n,new Ul(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Zo.RAW,r){this._throwIfRoot("putString");const i=eR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new lF(new QO(this._delegate,new Ul(i.data,!0),a),this)}listAll(){return function U4(n){return function T4(n){const e={prefixes:[],items:[]};return XO(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new cF(e,this.storage))}list(e){return function L4(n,e){return eF(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new cF(t,this.storage))}getMetadata(){return function O4(n){return function D4(n){n._throwIfRoot("getMetadata");const e=qO(n.storage,n._location,sE());return n.storage.makeRequestWithTokens(e,Pu)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function F4(n,e){return function S4(n,e){n._throwIfRoot("updateMetadata");const t=function a4(n,e,t,r){const a=Qc(e.fullServerUrl(),n.host,n._protocol),f=nR(t,r),v=n.maxOperationRetryTime,T=new Vl(a,"PATCH",YT(n,r),v);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=oE(e),T}(n.storage,n._location,e,sE());return n.storage.makeRequestWithTokens(t,Pu)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function V4(n){return A4(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function B4(n){return function x4(n){n._throwIfRoot("deleteObject");const e=function u4(n,e){const r=Qc(e.fullServerUrl(),n.host,n._protocol),f=new Vl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=oE(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Pu)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw PO(e)}}class dF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(hF(e))throw K_("ref() expected a child path but got a URL, use refFromURL instead.");return new Jc(aF(this._delegate,e),this)}refFromURL(e){if(!hF(e))throw K_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ys.makeFromUrl(e,this._delegate.host)}catch(t){throw K_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jc(aF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function uF(n,e,t,r={}){!function N4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function hF(n){return/^[A-Za-z]+:\/\//.test(n)}function Z4(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new dF(t,r)}function fF(n){const e=function K4(n){return new yr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function f6(n,e=cc.z){return(0,Un.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,T=e.now();if(T<v)return i=this.schedule(void 0,v-T),void r.add(i);f()}t.subscribe((0,wn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function XT(n){return{getDownloadURL:()=>rt(void 0).pipe(pn.fc,xn(()=>n.getDownloadURL()),pn.iC),getMetadata:()=>rt(void 0).pipe(pn.fc,xn(()=>n.getMetadata()),pn.iC),delete:()=>(0,An.D)(n.delete()),child:e=>XT(n.child(e)),updateMetadata:e=>(0,An.D)(n.updateMetadata(e)),put:(e,t)=>fF(n.put(e,t)),putString:(e,t,r)=>fF(n.putString(e,t,r)),list:e=>(0,An.D)(n.list(e)),listAll:()=>(0,An.D)(n.listAll())}}!function z4(n){const e={TaskState:Zs,TaskEvent:f4,StringFormat:Zo,Storage:dF,Reference:Jc};n.INTERNAL.registerComponent(new io.wA("storage-compat",Z4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Sy.Z);const Y4=new d.OlP("angularfire2.storageBucket"),Q4=new d.OlP("angularfire2.storage.maxUploadRetryTime"),J4=new d.OlP("angularfire2.storage.maxOperationRetryTime"),X4=new d.OlP("angularfire2.storage.use-emulator");let e8=(()=>{class n{constructor(t,r,i,a,l,f,m,v,T,S){const k=(0,Lr.on)(t,l,r);this.storage=(0,Lr.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const U=l.runOutsideAngular(()=>k.storage(i||void 0)),z=T;return z&&U.useEmulator(...z),m&&U.setMaxUploadRetryTime(m),v&&U.setMaxOperationRetryTime(v),U},[m,v])}ref(t){return XT(this.storage.ref(t))}refFromURL(t){return XT(this.storage.refFromURL(t))}upload(t,r,i){return XT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lr.Dh),d.LFG(Lr.xv,8),d.LFG(Y4,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(Q4,8),d.LFG(J4,8),d.LFG(X4,8),d.LFG(Ew,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),t8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),n8=(()=>{class n{constructor(){ZI.Z.registerVersion("angularfire",pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[e8],imports:[t8]}),n})();const aR_firebase={apiKey:"AIzaSyAZKAGugfPU_FGYSYaJwOiiuTCUh07TRX8",authDomain:"sililis.firebaseapp.com",databaseURL:"https://sililis-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"sililis",storageBucket:"sililis.appspot.com",messagingSenderId:"189001838484",appId:"1:189001838484:web:4141c5c1188adc4052e981",measurementId:"G-HYF8YFSD4L"};var r8=O(1144);const i8=["addListener","removeListener"],s8=["addEventListener","removeEventListener"],o8=["on","off"];function eD(n,e,t,r){if((0,Or.m)(t)&&(r=t,t=void 0),r)return eD(n,e,t).pipe(qu(r));const[i,a]=function l8(n){return(0,Or.m)(n.addEventListener)&&(0,Or.m)(n.removeEventListener)}(n)?s8.map(l=>f=>n[l](e,f,t)):function a8(n){return(0,Or.m)(n.addListener)&&(0,Or.m)(n.removeListener)}(n)?i8.map(pF(n,e)):function u8(n){return(0,Or.m)(n.on)&&(0,Or.m)(n.off)}(n)?o8.map(pF(n,e)):[];if(!i&&(0,r8.z)(n))return(0,Vn.z)(l=>eD(l,e,t))((0,Gi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new yr.y(l=>{const f=(...m)=>l.next(1<m.length?m:m[0]);return i(f),()=>a(f)})}function pF(n,e){return t=>r=>n[t](e,r)}const Qh=new yr.y(Lx.Z),d8={connector:()=>new $i.x};function gF(n,e=d8){const{connector:t}=e;return(0,Un.e)((r,i)=>{const a=t();(0,Gi.Xf)(n(function c8(n){return new yr.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}function mF(n,e){return e?t=>la(e.pipe(Zr(1),function p8(){return(0,Un.e)((n,e)=>{n.subscribe((0,wn.x)(e,Lx.Z))})}()),t.pipe(mF(n))):(0,Vn.z)((t,r)=>n(t,r).pipe(Zr(1),function g8(n){return(0,gt.U)(()=>n)}(t)))}var m8=O(3532);const aE="Service workers are disabled or not supported by this browser";class tD{constructor(e){if(this.serviceWorker=e,e){const r=eD(e,"controllerchange").pipe((0,gt.U)(()=>e.controller)),a=la(So(()=>rt(e.controller)),r);this.worker=a.pipe(En(T=>!!T)),this.registration=this.worker.pipe(xn(()=>e.getRegistration()));const v=eD(e,"message").pipe((0,gt.U)(T=>T.data)).pipe(En(T=>T&&T.type)).pipe(function f8(n){return n?e=>gF(n)(e):e=>function h8(n,e){const t=(0,Or.m)(n)?n:()=>n;return(0,Or.m)(e)?gF(e,{connector:t}):r=>new ci(r,t)}(new $i.x)(e)}());v.connect(),this.events=v}else this.worker=this.events=this.registration=function w8(n){return So(()=>Do(new Error(n)))}(aE)}postMessage(e,t){return this.worker.pipe(Zr(1),(0,fi.b)(r=>{r.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(En(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Zr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(En(t=>t.nonce===e),Zr(1),(0,gt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let E8=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new $i.x,!t.isEnabled)return this.messages=Qh,this.notificationClicks=Qh,void(this.subscription=Qh);this.messages=this.sw.eventsOfType("PUSH").pipe((0,gt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,gt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,gt.U)(i=>i.pushManager));const r=this.pushManager.pipe(xn(i=>i.getSubscription()));this.subscription=(0,yw.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(aE));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return r.applicationServerKey=a,this.pushManager.pipe(xn(l=>l.subscribe(r)),Zr(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Zr(1),xn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(aE))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),b8=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Qh,this.available=Qh,this.activated=Qh,void(this.unrecoverable=Qh);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(En(r=>"VERSION_READY"===r.type),(0,gt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(aE));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(aE));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class uR{}const _F=new d.OlP("NGSW_REGISTER_SCRIPT");function C8(n,e,t,r){return()=>{if(!Ir(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let a;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)a=t.registrationStrategy();else{const[f,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(f){case"registerImmediately":a=rt(null);break;case"registerWithDelay":a=yF(+m[0]||0);break;case"registerWhenStable":a=m[0]?(0,yw.T)(vF(n),yF(+m[0])):vF(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(d.R0b).runOutsideAngular(()=>a.pipe(Zr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(f=>console.error("Service worker registration failed with:",f))))}}function yF(n){return rt(null).pipe(function v8(n,e=cc.z){const t=function y8(n=0,e,t=cc.P){let r=-1;return null!=e&&((0,m8.K)(e)?t=e:r=e),new yr.y(i=>{let a=function _8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e);return mF(()=>t)}(n))}function vF(n){return n.get(d.z2F).isStable.pipe(En(t=>t))}function I8(n,e){return new tD(Ir(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let T8=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:_F,useValue:t},{provide:uR,useValue:r},{provide:tD,useFactory:I8,deps:[uR,d.Lbi]},{provide:d.ip1,useFactory:C8,deps:[d.zs3,_F,uR,d.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[E8,b8]}),n})(),D8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[h6]}),n.\u0275inj=d.cJS({providers:[kl,qT],imports:[[Lr.hO.initializeApp(aR_firebase),w2,A2,n8,$j,zl,u6,CU,rN,T8.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();(0,d.G48)(),md().bootstrapModule(D8).catch(n=>console.error(n))},5867:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=O(9681);(0,d.registerVersion)("firebase","9.14.0","app")},127:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Z:()=>d.Z});var d=O(3942);d.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(Ke,Ee,O)=>{"use strict";O.r(Ee);var d=O(5861),$=O(3942),N=O(8247),oe=O(2090),X=(O(9681),O(1877),O(4859));function ee(){return window}function q(){return(q=(0,d.Z)(function*(H,P,B){var de;const{BuildInfo:Fe}=ee();(0,N.ap)(P.sessionId,"AuthEvent did not contain a session ID");const tt=yield De(P.sessionId),ut={};return(0,N.aq)()?ut.ibi=Fe.packageName:(0,N.ar)()?ut.apn=Fe.packageName:(0,N.as)(H,"operation-not-supported-in-this-environment"),Fe.displayName&&(ut.appDisplayName=Fe.displayName),ut.sessionId=tt,(0,N.at)(H,B,P.type,void 0,null!==(de=P.eventId)&&void 0!==de?de:void 0,ut)})).apply(this,arguments)}function Be(){return(Be=(0,d.Z)(function*(H){const{BuildInfo:P}=ee(),B={};(0,N.aq)()?B.iosBundleId=P.packageName:(0,N.ar)()?B.androidPackageName=P.packageName:(0,N.as)(H,"operation-not-supported-in-this-environment"),yield(0,N.au)(H,B)})).apply(this,arguments)}function $e(){return($e=(0,d.Z)(function*(H,P,B){const{cordova:de}=ee();let Fe=()=>{};try{yield new Promise((tt,ut)=>{let Mt=null;function st(){var Ut;tt();const Gr=null===(Ut=de.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof Gr&&Gr(),"function"==typeof(null==B?void 0:B.close)&&B.close()}function ln(){Mt||(Mt=window.setTimeout(()=>{ut((0,N.aw)(H,"redirect-cancelled-by-user"))},2e3))}function mr(){"visible"===(null==document?void 0:document.visibilityState)&&ln()}P.addPassiveListener(st),document.addEventListener("resume",ln,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",mr,!1),Fe=()=>{P.removePassiveListener(st),document.removeEventListener("resume",ln,!1),document.removeEventListener("visibilitychange",mr,!1),Mt&&window.clearTimeout(Mt)}})}finally{Fe()}})).apply(this,arguments)}function De(H){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(H){const P=Ge(H),B=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(B)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ge(H){if((0,N.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(H);const P=new ArrayBuffer(H.length),B=new Uint8Array(P);for(let de=0;de<H.length;de++)B[de]=H.charCodeAt(de);return B}class Re extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(P)),super.onEvent(P)}initialized(){var P=this;return(0,d.Z)(function*(){yield P.initPromise})()}}function se(H){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(H){const P=yield re()._get(ue(H));return P&&(yield re()._remove(ue(H))),P})).apply(this,arguments)}function Q(){const H=[],P="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const de=Math.floor(Math.random()*P.length);H.push(P.charAt(de))}return H.join("")}function re(){return(0,N.az)(N.b)}function ue(H){return(0,N.aA)("authEvent",H.config.apiKey,H.name)}function Ue(H){if(!(null==H?void 0:H.includes("?")))return{};const[P,...B]=H.split("?");return(0,oe.zd)(B.join("?"))}function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Ht(){var H;return(null===(H=null==self?void 0:self.location)||void 0===H?void 0:H.protocol)||null}function kn(H=(0,oe.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ti(){try{const H=self.localStorage,P=N.aI();if(H)return H.setItem(P,"1"),H.removeItem(P),!function ns(H=(0,oe.z$)()){return function oi(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Fn(H=(0,oe.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,oe.hl)()}catch(H){return Di()&&(0,oe.hl)()}return!1}function Di(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $n(){return(function Yt(){return"http:"===Ht()||"https:"===Ht()}()||(0,oe.ru)()||kn())&&!function ei(){return(0,oe.b$)()||(0,oe.UG)()}()&&Ti()&&!Di()}function rs(){return kn()&&"undefined"!=typeof document}function Nr(){return(Nr=(0,d.Z)(function*(){return!!rs()&&new Promise(H=>{const P=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),H(!0)})})})).apply(this,arguments)}const hn={LOCAL:"local",NONE:"none",SESSION:"session"},Pr=N.ax,jr="persistence";function Sn(H){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(H){yield H._initializationPromise;const P=zt(),B=N.aA(jr,H.config.apiKey,H.name);P&&P.setItem(B,H._getPersistence())})).apply(this,arguments)}function zt(){var H;try{return(null===(H=function bn(){return"undefined"!=typeof window?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch(P){return null}}const pt=N.ax;class it{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class nn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(P){var B=this;return(0,d.Z)(function*(){const de=P._key();let Fe=B.eventManagers.get(de);return Fe||(Fe=new Re(P),B.eventManagers.set(de,Fe),B.attachCallbackListeners(P,Fe)),Fe})()}_openPopup(P){(0,N.as)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,B,de,Fe){var tt=this;return(0,d.Z)(function*(){!function ve(H){var P,B,de,Fe,tt,ut,Mt,st,ln,mr;const Ut=ee();(0,N.ax)("function"==typeof(null===(P=null==Ut?void 0:Ut.universalLinks)||void 0===P?void 0:P.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(B=null==Ut?void 0:Ut.BuildInfo)||void 0===B?void 0:B.packageName),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(tt=null===(Fe=null===(de=null==Ut?void 0:Ut.cordova)||void 0===de?void 0:de.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===tt?void 0:tt.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(st=null===(Mt=null===(ut=null==Ut?void 0:Ut.cordova)||void 0===ut?void 0:ut.plugins)||void 0===Mt?void 0:Mt.browsertab)||void 0===st?void 0:st.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(mr=null===(ln=null==Ut?void 0:Ut.cordova)||void 0===ln?void 0:ln.InAppBrowser)||void 0===mr?void 0:mr.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const ut=yield tt._initialize(P);yield ut.initialized(),ut.resetRedirect(),(0,N.aD)(),yield tt._originValidation(P);const Mt=function Te(H,P,B=null){return{type:P,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:H.tenantId,error:(0,N.aw)(H,"no-auth-event")}}(P,de,Fe);yield function qe(H,P){return re()._set(ue(H),P)}(P,Mt);const st=yield function W(H,P,B){return q.apply(this,arguments)}(P,Mt,B),ln=yield function Ae(H){const{cordova:P}=ee();return new Promise(B=>{P.plugins.browsertab.isAvailable(de=>{let Fe=null;de?P.plugins.browsertab.openUrl(H):Fe=P.InAppBrowser.open(H,(0,N.av)()?"_blank":"_system","location=yes"),B(Fe)})})}(st);return function Le(H,P,B){return $e.apply(this,arguments)}(P,ut,ln)})()}_isIframeWebStorageSupported(P,B){throw new Error("Method not implemented.")}_originValidation(P){const B=P._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function ie(H){return Be.apply(this,arguments)}(P)),this.originValidationPromises[B]}attachCallbackListeners(P,B){const{universalLinks:de,handleOpenURL:Fe,BuildInfo:tt}=ee(),ut=setTimeout((0,d.Z)(function*(){yield se(P),B.onEvent(Je())}),500),Mt=function(){var mr=(0,d.Z)(function*(Ut){clearTimeout(ut);const Gr=yield se(P);let is=null;Gr&&(null==Ut?void 0:Ut.url)&&(is=function be(H,P){var B,de;const Fe=function fe(H){const P=Ue(H),B=P.link?decodeURIComponent(P.link):void 0,de=Ue(B).link,Fe=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return Ue(Fe).link||Fe||de||B||H}(P);if(Fe.includes("/__/auth/callback")){const tt=Ue(Fe),ut=tt.firebaseError?function we(H){try{return JSON.parse(H)}catch(P){return null}}(decodeURIComponent(tt.firebaseError)):null,Mt=null===(de=null===(B=null==ut?void 0:ut.code)||void 0===B?void 0:B.split("auth/"))||void 0===de?void 0:de[1],st=Mt?(0,N.aw)(Mt):null;return st?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:st,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Fe,postBody:null}}return null}(Gr,Ut.url)),B.onEvent(is||Je())});return function(Gr){return mr.apply(this,arguments)}}();void 0!==de&&"function"==typeof de.subscribe&&de.subscribe(null,Mt);const st=Fe,ln=`${tt.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var mr=(0,d.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(ln)&&Mt({url:Ut}),"function"==typeof st)try{st(Ut)}catch(Gr){console.error(Gr)}});return function(Ut){return mr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(P){var B=this;return(0,d.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,B,de,Fe){var tt=this;return(0,d.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openPopup(P,B,de,Fe)})()}_openRedirect(P,B,de,Fe){var tt=this;return(0,d.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openRedirect(P,B,de,Fe)})()}_isIframeWebStorageSupported(P,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,B)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return rs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,d.Z)(function*(){if(P.underlyingResolver)return;const B=yield function Et(){return Nr.apply(this,arguments)}();P.underlyingResolver=B?P.cordovaResolver:P.browserResolver})()}}function Si(H){return H.unwrap()}function Kt(H){return Gn(H)}function Gn(H){const{_tokenResponse:P}=H instanceof oe.ZR?H.customData:H;if(!P)return null;if(!(H instanceof oe.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return N.P.credentialFromResult(H);const B=P.providerId;if(!B||B===N.o.PASSWORD)return null;let de;switch(B){case N.o.GOOGLE:de=N.Q;break;case N.o.FACEBOOK:de=N.N;break;case N.o.GITHUB:de=N.T;break;case N.o.TWITTER:de=N.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:tt,oauthTokenSecret:ut,pendingToken:Mt,nonce:st}=P;return tt||ut||Fe||Mt?Mt?B.startsWith("saml.")?N.aL._create(B,Mt):N.J._fromParams({providerId:B,signInMethod:B,pendingToken:Mt,idToken:Fe,accessToken:tt}):new N.U(B).credential({idToken:Fe,accessToken:tt,rawNonce:st}):null}return H instanceof oe.ZR?de.credentialFromError(H):de.credentialFromResult(H)}function gn(H,P){return P.catch(B=>{throw B instanceof oe.ZR&&function Vi(H,P){var B,de;const Fe=null===(B=P.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(de=P)||void 0===de?void 0:de.code))P.resolver=new $t(H,N.an(H,P));else if(Fe){const tt=Gn(P),ut=P;tt&&(ut.credential=tt,ut.tenantId=Fe.tenantId||void 0,ut.email=Fe.email||void 0,ut.phoneNumber=Fe.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Fe=B.user;return{operationType:B.operationType,credential:Kt(B),additionalUserInfo:N.al(B),user:ar.getOrCreate(Fe)}})}function _t(H,P){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(H,P){const B=yield P;return{verificationId:B.verificationId,confirm:de=>gn(H,B.confirm(de))}})).apply(this,arguments)}class $t{constructor(P,B){this.resolver=B,this.auth=function $r(H){return H.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return gn(Si(this.auth),this.resolver.resolveSignIn(P))}}class ar{constructor(P){this._delegate=P,this.multiFactor=N.ao(P)}static getOrCreate(P){return ar.USER_MAP.has(P)||ar.USER_MAP.set(P,new ar(P)),ar.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var B=this;return(0,d.Z)(function*(){return gn(B.auth,N.Z(B._delegate,P))})()}linkWithPhoneNumber(P,B){var de=this;return(0,d.Z)(function*(){return _t(de.auth,N.l(de._delegate,P,B))})()}linkWithPopup(P){var B=this;return(0,d.Z)(function*(){return gn(B.auth,N.d(B._delegate,P,it))})()}linkWithRedirect(P){var B=this;return(0,d.Z)(function*(){return yield Sn(N.aE(B.auth)),N.g(B._delegate,P,it)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var B=this;return(0,d.Z)(function*(){return gn(B.auth,N._(B._delegate,P))})()}reauthenticateWithPhoneNumber(P,B){return _t(this.auth,N.r(this._delegate,P,B))}reauthenticateWithPopup(P){return gn(this.auth,N.e(this._delegate,P,it))}reauthenticateWithRedirect(P){var B=this;return(0,d.Z)(function*(){return yield Sn(N.aE(B.auth)),N.h(B._delegate,P,it)})()}sendEmailVerification(P){return N.ab(this._delegate,P)}unlink(P){var B=this;return(0,d.Z)(function*(){return yield N.ak(B._delegate,P),B})()}updateEmail(P){return N.ag(this._delegate,P)}updatePassword(P){return N.ah(this._delegate,P)}updatePhoneNumber(P){return N.u(this._delegate,P)}updateProfile(P){return N.af(this._delegate,P)}verifyBeforeUpdateEmail(P,B){return N.ac(this._delegate,P,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ar.USER_MAP=new WeakMap;const Xe=N.ax;let Se=(()=>{class H{constructor(B,de){if(this.app=B,de.isInitialized())return this._delegate=de.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=B.options;Xe(Fe,"invalid-api-key",{appName:B.name}),Xe(Fe,"invalid-api-key",{appName:B.name});const tt="undefined"!=typeof window?it:void 0;this._delegate=de.initialize({options:{persistence:It(Fe,B.name),popupRedirectResolver:tt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ar.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,de){N.G(this._delegate,B,de)}applyActionCode(B){return N.a2(this._delegate,B)}checkActionCode(B){return N.a3(this._delegate,B)}confirmPasswordReset(B,de){return N.a1(this._delegate,B,de)}createUserWithEmailAndPassword(B,de){var Fe=this;return(0,d.Z)(function*(){return gn(Fe._delegate,N.a5(Fe._delegate,B,de))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return N.aa(this._delegate,B)}isSignInWithEmailLink(B){return N.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,d.Z)(function*(){Xe($n(),B._delegate,"operation-not-supported-in-this-environment");const de=yield N.j(B._delegate,it);return de?gn(B._delegate,Promise.resolve(de)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function cn(H,P){(0,N.aE)(H)._logFramework(P)}(this._delegate,B)}onAuthStateChanged(B,de,Fe){const{next:tt,error:ut,complete:Mt}=ze(B,de,Fe);return this._delegate.onAuthStateChanged(tt,ut,Mt)}onIdTokenChanged(B,de,Fe){const{next:tt,error:ut,complete:Mt}=ze(B,de,Fe);return this._delegate.onIdTokenChanged(tt,ut,Mt)}sendSignInLinkToEmail(B,de){return N.a7(this._delegate,B,de)}sendPasswordResetEmail(B,de){return N.a0(this._delegate,B,de||void 0)}setPersistence(B){var de=this;return(0,d.Z)(function*(){let Fe;switch(function Hr(H,P){Pr(Object.values(hn).includes(P),H,"invalid-persistence-type"),(0,oe.b$)()?Pr(P!==hn.SESSION,H,"unsupported-persistence-type"):(0,oe.UG)()?Pr(P===hn.NONE,H,"unsupported-persistence-type"):Di()?Pr(P===hn.NONE||P===hn.LOCAL&&(0,oe.hl)(),H,"unsupported-persistence-type"):Pr(P===hn.NONE||Ti(),H,"unsupported-persistence-type")}(de._delegate,B),B){case hn.SESSION:Fe=N.a;break;case hn.LOCAL:Fe=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case hn.NONE:Fe=N.L;break;default:return N.as("argument-error",{appName:de._delegate.name})}return de._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return gn(this._delegate,N.X(this._delegate))}signInWithCredential(B){return gn(this._delegate,N.Y(this._delegate,B))}signInWithCustomToken(B){return gn(this._delegate,N.$(this._delegate,B))}signInWithEmailAndPassword(B,de){return gn(this._delegate,N.a6(this._delegate,B,de))}signInWithEmailLink(B,de){return gn(this._delegate,N.a9(this._delegate,B,de))}signInWithPhoneNumber(B,de){return _t(this._delegate,N.s(this._delegate,B,de))}signInWithPopup(B){var de=this;return(0,d.Z)(function*(){return Xe($n(),de._delegate,"operation-not-supported-in-this-environment"),gn(de._delegate,N.c(de._delegate,B,it))})()}signInWithRedirect(B){var de=this;return(0,d.Z)(function*(){return Xe($n(),de._delegate,"operation-not-supported-in-this-environment"),yield Sn(de._delegate),N.f(de._delegate,B,it)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return N.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=hn,H})();function ze(H,P,B){let de=H;"function"!=typeof H&&({next:de,error:P,complete:B}=H);const Fe=de;return{next:ut=>Fe(ut&&ar.getOrCreate(ut)),error:P,complete:B}}function It(H,P){const B=function vs(H,P){const B=zt();if(!B)return[];const de=N.aA(jr,H,P);switch(B.getItem(de)){case hn.NONE:return[N.L];case hn.LOCAL:return[N.i,N.a];case hn.SESSION:return[N.a];default:return[]}}(H,P);if("undefined"!=typeof self&&!B.includes(N.i)&&B.push(N.i),"undefined"!=typeof window)for(const de of[N.b,N.a])B.includes(de)||B.push(de);return B.includes(N.L)||B.push(N.L),B}class Ct{constructor(){this.providerId="phone",this._delegate=new N.P(Si($.Z.auth()))}static credential(P,B){return N.P.credential(P,B)}verifyPhoneNumber(P,B){return this._delegate.verifyPhoneNumber(P,B)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=N.P.PROVIDER_ID;const sn=N.ax;class Z{constructor(P,B,de=$.Z.app()){var Fe;sn(null===(Fe=de.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:de.name}),this._delegate=new N.R(P,B,de.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(H){H.INTERNAL.registerComponent(new X.wA("auth-compat",P=>{const B=P.getProvider("app-compat").getImmediate(),de=P.getProvider("auth");return new Se(B,de)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:Z,TwitterAuthProvider:N.W,Auth:Se,AuthCredential:N.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},8306:(Ke,Ee,O)=>{"use strict";O.d(Ee,{y:()=>W});var d=O(930),$=O(727),N=O(8822),oe=O(4671);var X=O(2416),ee=O(576),pe=O(2806);let W=(()=>{class Ae{constructor($e){$e&&(this._subscribe=$e)}lift($e){const ve=new Ae;return ve.source=this,ve.operator=$e,ve}subscribe($e,ve,De){const We=function Be(Ae){return Ae&&Ae instanceof d.Lv||function ie(Ae){return Ae&&(0,ee.m)(Ae.next)&&(0,ee.m)(Ae.error)&&(0,ee.m)(Ae.complete)}(Ae)&&(0,$.Nn)(Ae)}($e)?$e:new d.Hp($e,ve,De);return(0,pe.x)(()=>{const{operator:Ge,source:Pe}=this;We.add(Ge?Ge.call(We,Pe):Pe?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe($e){try{return this._subscribe($e)}catch(ve){$e.error(ve)}}forEach($e,ve){return new(ve=q(ve))((De,We)=>{const Ge=new d.Hp({next:Pe=>{try{$e(Pe)}catch(Re){We(Re),Ge.unsubscribe()}},error:We,complete:De});this.subscribe(Ge)})}_subscribe($e){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe($e)}[N.L](){return this}pipe(...$e){return function ae(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function($e){return Ae.reduce((ve,De)=>De(ve),$e)}}($e)(this)}toPromise($e){return new($e=q($e))((ve,De)=>{let We;this.subscribe(Ge=>We=Ge,Ge=>De(Ge),()=>ve(We))})}}return Ae.create=Le=>new Ae(Le),Ae})();function q(Ae){var Le;return null!==(Le=null!=Ae?Ae:X.v.Promise)&&void 0!==Le?Le:Promise}},7579:(Ke,Ee,O)=>{"use strict";O.d(Ee,{x:()=>X});var d=O(8306),$=O(727);const oe=(0,O(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=O(8737),ae=O(2806);let X=(()=>{class pe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ie=new ee(this,this);return ie.operator=q,ie}_throwIfClosed(){if(this.closed)throw new oe}next(q){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(q)}})}error(q){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(q)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ie,isStopped:Be,observers:Ae}=this;return ie||Be?$.Lc:(this.currentObservers=null,Ae.push(q),new $.w0(()=>{this.currentObservers=null,(0,ce.P)(Ae,q)}))}_checkFinalizedStatuses(q){const{hasError:ie,thrownError:Be,isStopped:Ae}=this;ie?q.error(Be):Ae&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return pe.create=(W,q)=>new ee(W,q),pe})();class ee extends X{constructor(W,q){super(),this.destination=W,this.source=q}next(W){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ie||ie.call(q,W)}error(W){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ie||ie.call(q,W)}complete(){var W,q;null===(q=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===q||q.call(W)}_subscribe(W){var q,ie;return null!==(ie=null===(q=this.source)||void 0===q?void 0:q.subscribe(W))&&void 0!==ie?ie:$.Lc}}},930:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Hp:()=>$e,Lv:()=>ie});var d=O(576),$=O(727),N=O(2416),oe=O(7849),ce=O(5032);const ae=pe("C",void 0,void 0);function pe(Pe,Re,Te){return{kind:Pe,value:Re,error:Te}}var W=O(3410),q=O(2806);class ie extends $.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,$.Nn)(Re)&&Re.add(this)):this.destination=Ge}static create(Re,Te,qe){return new $e(Re,Te,qe)}next(Re){this.isStopped?We(function ee(Pe){return pe("N",Pe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?We(function X(Pe){return pe("E",void 0,Pe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?We(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Ae(Pe,Re){return Be.call(Pe,Re)}class Le{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Re)}catch(qe){ve(qe)}}error(Re){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Re)}catch(qe){ve(qe)}else ve(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Te){ve(Te)}}}class $e extends ie{constructor(Re,Te,qe){let se;if(super(),(0,d.m)(Re)||!Re)se={next:null!=Re?Re:void 0,error:null!=Te?Te:void 0,complete:null!=qe?qe:void 0};else{let ye;this&&N.v.useDeprecatedNextContext?(ye=Object.create(Re),ye.unsubscribe=()=>this.unsubscribe(),se={next:Re.next&&Ae(Re.next,ye),error:Re.error&&Ae(Re.error,ye),complete:Re.complete&&Ae(Re.complete,ye)}):se=Re}this.destination=new Le(se)}}function ve(Pe){N.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Pe):(0,oe.h)(Pe)}function We(Pe,Re){const{onStoppedNotification:Te}=N.v;Te&&W.z.setTimeout(()=>Te(Pe,Re))}const Ge={closed:!0,next:ce.Z,error:function De(Pe){throw Pe},complete:ce.Z}},727:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Lc:()=>ae,w0:()=>ce,Nn:()=>X});var d=O(576);const N=(0,O(3888).d)(pe=>function(q){pe(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ie,Be)=>`${Be+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var oe=O(8737);class ce{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ae of q)Ae.remove(this);else q.remove(this);const{initialTeardown:ie}=this;if((0,d.m)(ie))try{ie()}catch(Ae){W=Ae instanceof N?Ae.errors:[Ae]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Ae of Be)try{ee(Ae)}catch(Le){W=null!=W?W:[],Le instanceof N?W=[...W,...Le.errors]:W.push(Le)}}if(W)throw new N(W)}}add(W){var q;if(W&&W!==this)if(this.closed)ee(W);else{if(W instanceof ce){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(W)}}_hasParent(W){const{_parentage:q}=this;return q===W||Array.isArray(q)&&q.includes(W)}_addParent(W){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(W),q):q?[q,W]:W}_removeParent(W){const{_parentage:q}=this;q===W?this._parentage=null:Array.isArray(q)&&(0,oe.P)(q,W)}remove(W){const{_finalizers:q}=this;q&&(0,oe.P)(q,W),W instanceof ce&&W._removeParent(this)}}ce.EMPTY=(()=>{const pe=new ce;return pe.closed=!0,pe})();const ae=ce.EMPTY;function X(pe){return pe instanceof ce||pe&&"closed"in pe&&(0,d.m)(pe.remove)&&(0,d.m)(pe.add)&&(0,d.m)(pe.unsubscribe)}function ee(pe){(0,d.m)(pe)?pe():pe.unsubscribe()}},2416:(Ke,Ee,O)=>{"use strict";O.d(Ee,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ke,Ee,O)=>{"use strict";O.d(Ee,{E:()=>$});const $=new(O(8306).y)(ce=>ce.complete())},8996:(Ke,Ee,O)=>{"use strict";O.d(Ee,{D:()=>Re});var d=O(8421),$=O(5363),N=O(9468),ae=O(8306),ee=O(2202),pe=O(576),W=O(9672);function ie(Te,qe){if(!Te)throw new Error("Iterable cannot be null");return new ae.y(se=>{(0,W.f)(se,qe,()=>{const ye=Te[Symbol.asyncIterator]();(0,W.f)(se,qe,()=>{ye.next().then(be=>{be.done?se.complete():se.next(be.value)})},0,!0)})})}var Be=O(3670),Ae=O(8239),Le=O(1144),$e=O(6495),ve=O(2206),De=O(4532),We=O(3260);function Re(Te,qe){return qe?function Pe(Te,qe){if(null!=Te){if((0,Be.c)(Te))return function oe(Te,qe){return(0,d.Xf)(Te).pipe((0,N.R)(qe),(0,$.Q)(qe))}(Te,qe);if((0,Le.z)(Te))return function X(Te,qe){return new ae.y(se=>{let ye=0;return qe.schedule(function(){ye===Te.length?se.complete():(se.next(Te[ye++]),se.closed||this.schedule())})})}(Te,qe);if((0,Ae.t)(Te))return function ce(Te,qe){return(0,d.Xf)(Te).pipe((0,N.R)(qe),(0,$.Q)(qe))}(Te,qe);if((0,ve.D)(Te))return ie(Te,qe);if((0,$e.T)(Te))return function q(Te,qe){return new ae.y(se=>{let ye;return(0,W.f)(se,qe,()=>{ye=Te[ee.h](),(0,W.f)(se,qe,()=>{let be,Q;try{({value:be,done:Q}=ye.next())}catch(re){return void se.error(re)}Q?se.complete():se.next(be)},0,!0)}),()=>(0,pe.m)(null==ye?void 0:ye.return)&&ye.return()})}(Te,qe);if((0,We.L)(Te))return function Ge(Te,qe){return ie((0,We.Q)(Te),qe)}(Te,qe)}throw(0,De.z)(Te)}(Te,qe):(0,d.Xf)(Te)}},8421:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Xf:()=>Be});var d=O(655),$=O(1144),N=O(8239),oe=O(8306),ce=O(3670),ae=O(2206),X=O(4532),ee=O(6495),pe=O(3260),W=O(576),q=O(7849),ie=O(8822);function Be(Pe){if(Pe instanceof oe.y)return Pe;if(null!=Pe){if((0,ce.c)(Pe))return function Ae(Pe){return new oe.y(Re=>{const Te=Pe[ie.L]();if((0,W.m)(Te.subscribe))return Te.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,$.z)(Pe))return function Le(Pe){return new oe.y(Re=>{for(let Te=0;Te<Pe.length&&!Re.closed;Te++)Re.next(Pe[Te]);Re.complete()})}(Pe);if((0,N.t)(Pe))return function $e(Pe){return new oe.y(Re=>{Pe.then(Te=>{Re.closed||(Re.next(Te),Re.complete())},Te=>Re.error(Te)).then(null,q.h)})}(Pe);if((0,ae.D)(Pe))return De(Pe);if((0,ee.T)(Pe))return function ve(Pe){return new oe.y(Re=>{for(const Te of Pe)if(Re.next(Te),Re.closed)return;Re.complete()})}(Pe);if((0,pe.L)(Pe))return function We(Pe){return De((0,pe.Q)(Pe))}(Pe)}throw(0,X.z)(Pe)}function De(Pe){return new oe.y(Re=>{(function Ge(Pe,Re){var Te,qe,se,ye;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Te=(0,d.KL)(Pe);!(qe=yield Te.next()).done;)if(Re.next(qe.value),Re.closed)return}catch(be){se={error:be}}finally{try{qe&&!qe.done&&(ye=Te.return)&&(yield ye.call(Te))}finally{if(se)throw se.error}}Re.complete()})})(Pe,Re).catch(Te=>Re.error(Te))})}},6451:(Ke,Ee,O)=>{"use strict";O.d(Ee,{T:()=>ae});var d=O(8189),$=O(8421),N=O(515),oe=O(3269),ce=O(8996);function ae(...X){const ee=(0,oe.yG)(X),pe=(0,oe._6)(X,1/0),W=X;return W.length?1===W.length?(0,$.Xf)(W[0]):(0,d.J)(pe)((0,ce.D)(W,ee)):N.E}},5403:(Ke,Ee,O)=>{"use strict";O.d(Ee,{x:()=>$});var d=O(930);function $(oe,ce,ae,X,ee){return new N(oe,ce,ae,X,ee)}class N extends d.Lv{constructor(ce,ae,X,ee,pe,W){super(ce),this.onFinalize=pe,this.shouldUnsubscribe=W,this._next=ae?function(q){try{ae(q)}catch(ie){ce.error(ie)}}:super._next,this._error=ee?function(q){try{ee(q)}catch(ie){ce.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=X?function(){try{X()}catch(q){ce.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(Ke,Ee,O)=>{"use strict";O.d(Ee,{U:()=>N});var d=O(4482),$=O(5403);function N(oe,ce){return(0,d.e)((ae,X)=>{let ee=0;ae.subscribe((0,$.x)(X,pe=>{X.next(oe.call(ce,pe,ee++))}))})}},8189:(Ke,Ee,O)=>{"use strict";O.d(Ee,{J:()=>N});var d=O(5577),$=O(4671);function N(oe=1/0){return(0,d.z)($.y,oe)}},5577:(Ke,Ee,O)=>{"use strict";O.d(Ee,{z:()=>ee});var d=O(4004),$=O(8421),N=O(4482),oe=O(9672),ce=O(5403),X=O(576);function ee(pe,W,q=1/0){return(0,X.m)(W)?ee((ie,Be)=>(0,d.U)((Ae,Le)=>W(ie,Ae,Be,Le))((0,$.Xf)(pe(ie,Be))),q):("number"==typeof W&&(q=W),(0,N.e)((ie,Be)=>function ae(pe,W,q,ie,Be,Ae,Le,$e){const ve=[];let De=0,We=0,Ge=!1;const Pe=()=>{Ge&&!ve.length&&!De&&W.complete()},Re=qe=>De<ie?Te(qe):ve.push(qe),Te=qe=>{Ae&&W.next(qe),De++;let se=!1;(0,$.Xf)(q(qe,We++)).subscribe((0,ce.x)(W,ye=>{null==Be||Be(ye),Ae?Re(ye):W.next(ye)},()=>{se=!0},void 0,()=>{if(se)try{for(De--;ve.length&&De<ie;){const ye=ve.shift();Le?(0,oe.f)(W,Le,()=>Te(ye)):Te(ye)}Pe()}catch(ye){W.error(ye)}}))};return pe.subscribe((0,ce.x)(W,Re,()=>{Ge=!0,Pe()})),()=>{null==$e||$e()}}(ie,Be,pe,q)))}},5363:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Q:()=>oe});var d=O(9672),$=O(4482),N=O(5403);function oe(ce,ae=0){return(0,$.e)((X,ee)=>{X.subscribe((0,N.x)(ee,pe=>(0,d.f)(ee,ce,()=>ee.next(pe),ae),()=>(0,d.f)(ee,ce,()=>ee.complete(),ae),pe=>(0,d.f)(ee,ce,()=>ee.error(pe),ae)))})}},3099:(Ke,Ee,O)=>{"use strict";O.d(Ee,{B:()=>ce});var d=O(8421),$=O(7579),N=O(930),oe=O(4482);function ce(X={}){const{connector:ee=(()=>new $.x),resetOnError:pe=!0,resetOnComplete:W=!0,resetOnRefCountZero:q=!0}=X;return ie=>{let Be,Ae,Le,$e=0,ve=!1,De=!1;const We=()=>{null==Ae||Ae.unsubscribe(),Ae=void 0},Ge=()=>{We(),Be=Le=void 0,ve=De=!1},Pe=()=>{const Re=Be;Ge(),null==Re||Re.unsubscribe()};return(0,oe.e)((Re,Te)=>{$e++,!De&&!ve&&We();const qe=Le=null!=Le?Le:ee();Te.add(()=>{$e--,0===$e&&!De&&!ve&&(Ae=ae(Pe,q))}),qe.subscribe(Te),!Be&&$e>0&&(Be=new N.Hp({next:se=>qe.next(se),error:se=>{De=!0,We(),Ae=ae(Ge,pe,se),qe.error(se)},complete:()=>{ve=!0,We(),Ae=ae(Ge,W),qe.complete()}}),(0,d.Xf)(Re).subscribe(Be))})(ie)}}function ae(X,ee,...pe){if(!0===ee)return void X();if(!1===ee)return;const W=new N.Hp({next:()=>{W.unsubscribe(),X()}});return ee(...pe).subscribe(W)}},9468:(Ke,Ee,O)=>{"use strict";O.d(Ee,{R:()=>$});var d=O(4482);function $(N,oe=0){return(0,d.e)((ce,ae)=>{ae.add(N.schedule(()=>ce.subscribe(ae),oe))})}},8505:(Ke,Ee,O)=>{"use strict";O.d(Ee,{b:()=>ce});var d=O(576),$=O(4482),N=O(5403),oe=O(4671);function ce(ae,X,ee){const pe=(0,d.m)(ae)||X||ee?{next:ae,error:X,complete:ee}:ae;return pe?(0,$.e)((W,q)=>{var ie;null===(ie=pe.subscribe)||void 0===ie||ie.call(pe);let Be=!0;W.subscribe((0,N.x)(q,Ae=>{var Le;null===(Le=pe.next)||void 0===Le||Le.call(pe,Ae),q.next(Ae)},()=>{var Ae;Be=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),q.complete()},Ae=>{var Le;Be=!1,null===(Le=pe.error)||void 0===Le||Le.call(pe,Ae),q.error(Ae)},()=>{var Ae,Le;Be&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(Le=pe.finalize)||void 0===Le||Le.call(pe)}))}):oe.y}},4408:(Ke,Ee,O)=>{"use strict";O.d(Ee,{o:()=>ce});var d=O(727);class $ extends d.w0{constructor(X,ee){super()}schedule(X,ee=0){return this}}const N={setInterval(ae,X,...ee){const{delegate:pe}=N;return(null==pe?void 0:pe.setInterval)?pe.setInterval(ae,X,...ee):setInterval(ae,X,...ee)},clearInterval(ae){const{delegate:X}=N;return((null==X?void 0:X.clearInterval)||clearInterval)(ae)},delegate:void 0};var oe=O(8737);class ce extends ${constructor(X,ee){super(X,ee),this.scheduler=X,this.work=ee,this.pending=!1}schedule(X,ee=0){var pe;if(this.closed)return this;this.state=X;const W=this.id,q=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(q,W,ee)),this.pending=!0,this.delay=ee,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(q,this.id,ee),this}requestAsyncId(X,ee,pe=0){return N.setInterval(X.flush.bind(X,this),pe)}recycleAsyncId(X,ee,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ee;null!=ee&&N.clearInterval(ee)}execute(X,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(X,ee);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(X,ee){let W,pe=!1;try{this.work(X)}catch(q){pe=!0,W=q||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:X,scheduler:ee}=this,{actions:pe}=ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=X&&(this.id=this.recycleAsyncId(ee,X,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ke,Ee,O)=>{"use strict";O.d(Ee,{v:()=>N});var d=O(6063);class ${constructor(ce,ae=$.now){this.schedulerActionCtor=ce,this.now=ae}schedule(ce,ae=0,X){return new this.schedulerActionCtor(this,ce).schedule(X,ae)}}$.now=d.l.now;class N extends ${constructor(ce,ae=$.now){super(ce,ae),this.actions=[],this._active=!1}flush(ce){const{actions:ae}=this;if(this._active)return void ae.push(ce);let X;this._active=!0;do{if(X=ce.execute(ce.state,ce.delay))break}while(ce=ae.shift());if(this._active=!1,X){for(;ce=ae.shift();)ce.unsubscribe();throw X}}}},4986:(Ke,Ee,O)=>{"use strict";O.d(Ee,{z:()=>N,P:()=>oe});var d=O(4408);const N=new(O(7565).v)(d.o),oe=N},6063:(Ke,Ee,O)=>{"use strict";O.d(Ee,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Ke,Ee,O)=>{"use strict";O.d(Ee,{z:()=>d});const d={setTimeout($,N,...oe){const{delegate:ce}=d;return(null==ce?void 0:ce.setTimeout)?ce.setTimeout($,N,...oe):setTimeout($,N,...oe)},clearTimeout($){const{delegate:N}=d;return((null==N?void 0:N.clearTimeout)||clearTimeout)($)},delegate:void 0}},2202:(Ke,Ee,O)=>{"use strict";O.d(Ee,{h:()=>$});const $=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ke,Ee,O)=>{"use strict";O.d(Ee,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ke,Ee,O)=>{"use strict";O.d(Ee,{jO:()=>oe,yG:()=>ce,_6:()=>ae});var d=O(576),$=O(3532);function N(X){return X[X.length-1]}function oe(X){return(0,d.m)(N(X))?X.pop():void 0}function ce(X){return(0,$.K)(N(X))?X.pop():void 0}function ae(X,ee){return"number"==typeof N(X)?X.pop():ee}},8737:(Ke,Ee,O)=>{"use strict";function d($,N){if($){const oe=$.indexOf(N);0<=oe&&$.splice(oe,1)}}O.d(Ee,{P:()=>d})},3888:(Ke,Ee,O)=>{"use strict";function d($){const oe=$(ce=>{Error.call(ce),ce.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Ee,{d:()=>d})},2806:(Ke,Ee,O)=>{"use strict";O.d(Ee,{x:()=>N,O:()=>oe});var d=O(2416);let $=null;function N(ce){if(d.v.useDeprecatedSynchronousErrorHandling){const ae=!$;if(ae&&($={errorThrown:!1,error:null}),ce(),ae){const{errorThrown:X,error:ee}=$;if($=null,X)throw ee}}else ce()}function oe(ce){d.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ce)}},9672:(Ke,Ee,O)=>{"use strict";function d($,N,oe,ce=0,ae=!1){const X=N.schedule(function(){oe(),ae?$.add(this.schedule(null,ce)):this.unsubscribe()},ce);if($.add(X),!ae)return X}O.d(Ee,{f:()=>d})},4671:(Ke,Ee,O)=>{"use strict";function d($){return $}O.d(Ee,{y:()=>d})},1144:(Ke,Ee,O)=>{"use strict";O.d(Ee,{z:()=>d});const d=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(Ke,Ee,O)=>{"use strict";O.d(Ee,{D:()=>$});var d=O(576);function $(N){return Symbol.asyncIterator&&(0,d.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Ke,Ee,O)=>{"use strict";function d($){return"function"==typeof $}O.d(Ee,{m:()=>d})},3670:(Ke,Ee,O)=>{"use strict";O.d(Ee,{c:()=>N});var d=O(8822),$=O(576);function N(oe){return(0,$.m)(oe[d.L])}},6495:(Ke,Ee,O)=>{"use strict";O.d(Ee,{T:()=>N});var d=O(2202),$=O(576);function N(oe){return(0,$.m)(null==oe?void 0:oe[d.h])}},8239:(Ke,Ee,O)=>{"use strict";O.d(Ee,{t:()=>$});var d=O(576);function $(N){return(0,d.m)(null==N?void 0:N.then)}},3260:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Q:()=>N,L:()=>oe});var d=O(655),$=O(576);function N(ce){return(0,d.FC)(this,arguments,function*(){const X=ce.getReader();try{for(;;){const{value:ee,done:pe}=yield(0,d.qq)(X.read());if(pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ee)}}finally{X.releaseLock()}})}function oe(ce){return(0,$.m)(null==ce?void 0:ce.getReader)}},3532:(Ke,Ee,O)=>{"use strict";O.d(Ee,{K:()=>$});var d=O(576);function $(N){return N&&(0,d.m)(N.schedule)}},4482:(Ke,Ee,O)=>{"use strict";O.d(Ee,{A:()=>$,e:()=>N});var d=O(576);function $(oe){return(0,d.m)(null==oe?void 0:oe.lift)}function N(oe){return ce=>{if($(ce))return ce.lift(function(ae){try{return oe(ae,this)}catch(X){this.error(X)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ke,Ee,O)=>{"use strict";function d(){}O.d(Ee,{Z:()=>d})},7849:(Ke,Ee,O)=>{"use strict";O.d(Ee,{h:()=>N});var d=O(2416),$=O(3410);function N(oe){$.z.setTimeout(()=>{const{onUnhandledError:ce}=d.v;if(!ce)throw oe;ce(oe)})}},4532:(Ke,Ee,O)=>{"use strict";function d($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>d})},9375:(Ke,Ee,O)=>{O(3697),O(4470);const N=O(4684),oe=["one","two","three","four","five","six","seven","eight","nine","zero","ten","eleven"];Ke.exports=class ce{constructor(X,ee,pe,W,q,ie,Be,Ae,Le){this.color=X,this.icon=ee,this.duration=pe,this.positionX=W,this.positionY=q,this.fontColor=ie,this.fontTone=Be,this.shape=Ae,this.speed=Le,this.buttons=[]}as(X){return this.shape=X,this}for(X){return this.duration=X,this}from(X,ee=this.positionX){return this.positionY=X,this.positionX=ee,this}with(X){return Object.keys(X).forEach(ee=>{let pe=X;N.includes(ee)&&(this[ee]=pe[ee])}),this}default(X,ee){return this.title=X,this.message=ee,this}danger(X,ee){return this.title=X,this.message=ee,this.color="red",this.fontColor="gray",this.icon="fas fa-hand-paper",this}success(X,ee){return this.title=X,this.message=ee,this.color="green",this.fontColor="gray",this.icon="fas fa-check",this}warning(X,ee){return this.title=X,this.message=ee,this.color="yellow",this.fontColor="gray",this.icon="fas fa-exclamation-triangle",this}addButtons(...X){return this.buttons=X,this}hide(){let X=document.querySelector("#"+this.id);X.classList.remove("top"===this.positionY?"translate-y-36":"-translate-y-36"),X.classList.add("top"===this.positionY?"-translate-y-36":"translate-y-36"),setTimeout(()=>{X.remove()},this.speed+100)}show(){this.shape="pill"===this.shape?"rounded-full":"rounded";let X=document.createElement("DIV");X.classList=`z-10 fixed ease-in-out transform duration-${this.speed} -${this.positionY}-24 flex justify-${this.positionX} w-full`,X.innerHTML=`<div class="twsnackbar mx-4 text-${this.fontColor}-${this.fontTone} px-6 py-4 border-0 ${this.shape} relative mb-4 ${this.color} flex items-center justify-center">\n              <span class="text-xl inline-block mr-5">\n                <i class="${this.icon}"></i>\n              </span>\n              <span class="inline-block mr-8">\n                <b class="title">${this.title}</b> ${this.message}\n              </span>\n              <div id="buttons" class="flex justify-center items-center">\n              </div>\n            </div>`,this.id=`tawilwind-snackbar-${oe[Math.floor(Math.random()*Math.floor(11))]}`,X.id=this.id;let ee=X.querySelector(".twsnackbar").querySelector("#buttons");this.buttons.forEach(W=>{let q=document.createElement("DIV");q.classList="cursor-pointer p-2 rounded flex justify-center items-center",q.innerHTML=`<b class="uppercase"> ${Object.keys(W)[0]}</b>`,q.onclick=Object.values(W)[0],ee.append(q)}),document.body.prepend(X);let pe=document.querySelector("#"+this.id);console.log(pe),setTimeout(()=>{document.querySelector("#"+this.id).classList.add("top"===this.positionY?"translate-y-36":"-translate-y-36")},1),setTimeout(()=>{let W=document.querySelector("#"+this.id);W.classList.remove("top"===this.positionY?"-translate-y-36":"translate-y-36"),W.classList.add("top"===this.positionY?"translate-y-36":"-translate-y-36")},this.duration),setTimeout(()=>{pe.remove()},this.duration+this.speed+100)}}},8985:(Ke,Ee,O)=>{O(4470);const $=O(4684),N=["one","two","three","four","five","six","seven","eight","nine","zero","ten","eleven"];Ke.exports=class oe{constructor(ae,X,ee,pe,W,q,ie,Be,Ae){this.color=ae,this.icon=X,this.duration=ee,this.positionX=pe,this.positionY=W,this.fontColor=q,this.fontTone=ie,this.shape=Be,this.speed=Ae,this.buttons=[]}as(ae){return this.shape=ae,this}for(ae){return this.duration=ae,this}from(ae,X=this.positionX){return this.positionY=ae,this.positionX=X,this}with(ae){return Object.keys(ae).forEach(X=>{let ee=ae;$.includes(X)&&(this[X]=ee[X])}),this}default(ae,X){return this.title=ae,this.message=X,this}danger(ae,X){return this.title=ae,this.message=X,this.color="red",this.fontColor="gray",this.icon="fas fa-hand-paper",this}success(ae,X){return this.title=ae,this.message=X,this.color="green",this.fontColor="gray",this.icon="fas fa-check",this}warning(ae,X){return this.title=ae,this.message=X,this.color="yellow",this.fontColor="gray",this.icon="fas fa-exclamation-triangle",this}show(){this.shape="pill"===this.shape?"rounded-full":"rounded";let ae=document.createElement("DIV");ae.classList=`z-50 fixed ease-in-out transform duration-${this.speed} -${this.positionY}-24 flex justify-${this.positionX} w-full`,ae.innerHTML=`<div class="twthis mx-4 text-${this.fontColor}-${this.fontTone} px-6 py-4 border-0 ${this.shape} relative mb-4 ${this.color}">\n      <span class="text-xl inline-block mr-5 align-middle">\n        <i class="${this.icon}"></i>\n      </span>\n      <span class="inline-block align-middle mr-8">\n        <b class="title">${this.title}</b> ${this.message}\n      </span>\n    </div>`,this.id=`tawilwind-toast-${N[Math.floor(Math.random()*Math.floor(11))]}`,ae.id=this.id,document.body.prepend(ae);let X=document.querySelector("#"+this.id);setTimeout(()=>{X.classList.add("top"===this.positionY?"translate-y-36":"-translate-y-36")},1),setTimeout(()=>{let ee=document.querySelector("#"+this.id);ee.classList.remove("top"===this.positionY?"-translate-y-36":"translate-y-36"),ee.classList.add("top"===this.positionY?"translate-y-36":"-translate-y-36")},this.duration),setTimeout(()=>{X.remove()},this.duration+this.speed+100)}}},6965:()=>{},3697:(module,__unused_webpack_exports,__webpack_require__)=>{const config=__webpack_require__(6965),Toast=__webpack_require__(8985),Snackbar=__webpack_require__(9375);config.methods&&config.methods.forEach(method=>{eval("Toast.prototype."+Object.keys(method)[0]+" = "+Object.values(method)),eval("Snackbar.prototype."+Object.keys(method)[0]+" = "+Object.values(method))}),module.exports={toast:()=>new Toast(config.color?config.color:"blue-500",config.icon?config.icon:"fas fa-bell",config.duration?config.duration:3e3,config.positionX?config.positionX:"center",config.positionY?config.positionY:"top",config.fontColor?config.fontColor:"grey",config.fontTone?config.fontTone:100,config.shape?config.shape:"square",config.speed?config.speed:500),snackbar:()=>new Snackbar(config.color?config.color:"blue-500",config.icon?config.icon:"fas fa-bell",config.duration?config.duration:3e3,config.positionX?config.positionX:"center",config.positionY?config.positionY:"top",config.fontColor?config.fontColor:"grey",config.fontTone?config.fontTone:100,config.shape?config.shape:"square",config.speed?config.speed:500)}},4470:Ke=>{Ke.exports={getFile:function Ee(O){var d=new XMLHttpRequest;return d.open("GET",O,!1),d.send(),d.responseText}}},655:(Ke,Ee,O)=>{"use strict";function oe(Q,re){var ue={};for(var we in Q)Object.prototype.hasOwnProperty.call(Q,we)&&re.indexOf(we)<0&&(ue[we]=Q[we]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(we=Object.getOwnPropertySymbols(Q);fe<we.length;fe++)re.indexOf(we[fe])<0&&Object.prototype.propertyIsEnumerable.call(Q,we[fe])&&(ue[we[fe]]=Q[we[fe]])}return ue}function ee(Q,re,ue,we){return new(ue||(ue=Promise))(function(Ue,ft){function nn(cn){try{Je(we.next(cn))}catch(Dn){ft(Dn)}}function Lt(cn){try{Je(we.throw(cn))}catch(Dn){ft(Dn)}}function Je(cn){cn.done?Ue(cn.value):function fe(Ue){return Ue instanceof ue?Ue:new ue(function(ft){ft(Ue)})}(cn.value).then(nn,Lt)}Je((we=we.apply(Q,re||[])).next())})}function ve(Q){return this instanceof ve?(this.v=Q,this):new ve(Q)}function De(Q,re,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,we=ue.apply(Q,re||[]),Ue=[];return fe={},ft("next"),ft("throw"),ft("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function ft(dn){we[dn]&&(fe[dn]=function(rn){return new Promise(function(Ht,Yt){Ue.push([dn,rn,Ht,Yt])>1||nn(dn,rn)})})}function nn(dn,rn){try{!function Lt(dn){dn.value instanceof ve?Promise.resolve(dn.value.v).then(Je,cn):Dn(Ue[0][2],dn)}(we[dn](rn))}catch(Ht){Dn(Ue[0][3],Ht)}}function Je(dn){nn("next",dn)}function cn(dn){nn("throw",dn)}function Dn(dn,rn){dn(rn),Ue.shift(),Ue.length&&nn(Ue[0][0],Ue[0][1])}}function Ge(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,re=Q[Symbol.asyncIterator];return re?re.call(Q):(Q=function ie(Q){var re="function"==typeof Symbol&&Symbol.iterator,ue=re&&Q[re],we=0;if(ue)return ue.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&we>=Q.length&&(Q=void 0),{value:Q&&Q[we++],done:!Q}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ue={},we("next"),we("throw"),we("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function we(Ue){ue[Ue]=Q[Ue]&&function(ft){return new Promise(function(nn,Lt){!function fe(Ue,ft,nn,Lt){Promise.resolve(Lt).then(function(Je){Ue({value:Je,done:nn})},ft)}(nn,Lt,(ft=Q[Ue](ft)).done,ft.value)})}}}O.d(Ee,{_T:()=>oe,mG:()=>ee,qq:()=>ve,FC:()=>De,KL:()=>Ge})},5e3:(Ke,Ee,O)=>{"use strict";O.d(Ee,{deG:()=>uf,tb:()=>m_,AFp:()=>h_,ip1:()=>d_,CZH:()=>L0,hGG:()=>S_,z2F:()=>Q0,sBO:()=>vA,Sil:()=>V0,_Vd:()=>Ep,EJc:()=>Rh,SBq:()=>Ch,qLn:()=>Og,vpe:()=>uo,tBr:()=>Tt,XFs:()=>Et,OlP:()=>Kn,zs3:()=>Ls,ZZ4:()=>D_,aQg:()=>lo,soG:()=>Al,YKP:()=>Tp,h0i:()=>Ma,PXZ:()=>K0,R0b:()=>Vs,FiY:()=>kt,Lbi:()=>g_,g9A:()=>p_,Qsj:()=>DC,FYo:()=>n0,JOm:()=>wa,tp0:()=>tr,Rgc:()=>xp,dDg:()=>lI,q4F:()=>r0,GfV:()=>SC,s_b:()=>Vc,ifc:()=>zt,eFA:()=>y_,G48:()=>yA,Gpc:()=>q,X6Q:()=>ew,_c5:()=>SI,VLi:()=>mA,c2e:()=>xu,zSh:()=>Gd,wAp:()=>St,vHH:()=>Le,cg1:()=>Uv,kL8:()=>kc,dqk:()=>Kt,sIi:()=>Kd,CqO:()=>Tv,QGY:()=>Tm,F4k:()=>fl,RDi:()=>jl,AaK:()=>ee,qOj:()=>gm,TTD:()=>$a,_Bn:()=>CC,xp6:()=>ME,uIk:()=>Ki,ekj:()=>Mm,Suo:()=>E0,Xpm:()=>Ct,lG2:()=>de,Yz7:()=>rn,cJS:()=>Yt,oAB:()=>H,Yjl:()=>Fe,Y36:()=>Dc,_UZ:()=>Cv,qZA:()=>Ho,TgZ:()=>hl,EpF:()=>Qi,n5z:()=>ci,LFG:()=>D,$8M:()=>Zr,$Z:()=>he,NdJ:()=>rr,CRH:()=>b0,kcU:()=>X_,O4$:()=>wg,oxw:()=>fs,ALo:()=>FC,xi3:()=>Dh,Hsn:()=>xb,F$t:()=>Vr,Q6J:()=>nh,s9C:()=>Ia,MGl:()=>Qn,kEZ:()=>MC,iGM:()=>Xm,MAs:()=>wm,CHM:()=>Qa,LSH:()=>va,YNc:()=>wr,_uU:()=>xc,Oqu:()=>xv,hij:()=>ap,AsE:()=>Om});var d=O(7579),$=O(727),N=O(8306),oe=O(6451),ce=O(3099);function ae(s){for(let o in s)if(s[o]===ae)return o;throw Error("Could not find renamed property on target object.")}function X(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=ae({__forward_ref__:ae});function q(s){return s.__forward_ref__=q,s.toString=function(){return ee(this())},s}function ie(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===q}class Le extends Error{constructor(o,u){super(function $e(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}function Re(s,o){const u=o?` in ${o}`:"";throw new Le(-201,`No provider for ${De(s)} found${u}`)}function Lt(s,o){null==s&&function Je(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Yt(s){return{providers:s.providers||[],imports:s.imports||[]}}function kn(s){return ei(s,Ti)||ei(s,$n)}function ei(s,o){return s.hasOwnProperty(o)?s[o]:null}function ns(s){return s&&(s.hasOwnProperty(Di)||s.hasOwnProperty(rs))?s[Di]:null}const Ti=ae({\u0275prov:ae}),Di=ae({\u0275inj:ae}),$n=ae({ngInjectableDef:ae}),rs=ae({ngInjectorDef:ae});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let Nr;function hn(s){const o=Nr;return Nr=s,o}function Pr(s,o,u){const c=kn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Et.Optional?null:void 0!==o?o:void Re(ee(s),"Injector")}function Hr(s){return{toString:s}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const pt="undefined"!=typeof globalThis&&globalThis,it="undefined"!=typeof window&&window,Si="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Kt=pt||"undefined"!=typeof global&&global||it||Si,gn={},_t=[],ai=ae({\u0275cmp:ae}),$t=ae({\u0275dir:ae}),ar=ae({\u0275pipe:ae}),Xe=ae({\u0275mod:ae}),Se=ae({\u0275fac:ae}),ze=ae({__NG_ELEMENT_ID__:ae});let It=0;function Ct(s){return Hr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||_t,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||_t,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,y=s.pipes;return c.id+=It++,c.inputs=B(s.inputs,u),c.outputs=B(s.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Z):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(G):null,c})}function Z(s){return tt(s)||function ut(s){return s[$t]||null}(s)}function G(s){return function Mt(s){return s[ar]||null}(s)}const Y={};function H(s){return Hr(()=>{const o={type:s.type,bootstrap:s.bootstrap||_t,declarations:s.declarations||_t,imports:s.imports||_t,exports:s.exports||_t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Y[s.id]=s.type),o})}function B(s,o){if(null==s)return gn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const de=Ct;function Fe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function tt(s){return s[ai]||null}function st(s,o){const u=s[Xe]||null;if(!u&&!0===o)throw new Error(`Type ${ee(s)} does not have '\u0275mod' property.`);return u}function Bi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ai(s){return Array.isArray(s)&&!0===s[1]}function ed(s){return 0!=(8&s.flags)}function Fu(s){return 2==(2&s.flags)}function Ks(s){return 1==(1&s.flags)}function xi(s){return null!==s.template}function td(s){return 0!=(512&s[2])}function Ri(s,o){return s.hasOwnProperty(Se)?s[Se]:null}class ea{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function $a(){return Ga}function Ga(s){return s.type.prototype.ngOnChanges&&(s.setInput=yg),Xh}function Xh(){const s=ud(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===gn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function yg(s,o,u,c){const h=ud(s)||function Is(s,o){return s[mo]=o}(s,{previous:gn,current:null}),p=h.current||(h.current={}),y=h.previous,E=this.declaredInputs[u],I=y[E];p[E]=new ea(I&&I.currentValue,o,y===gn),s[c]=o}$a.ngInherit=!0;const mo="__ngSimpleChanges__";function ud(s){return s[mo]||null}let Bu;function jl(s){Bu=s}function Cn(s){return!!s.listen}const qa={createRenderer:(s,o)=>function Ts(){return void 0!==Bu?Bu:"undefined"!=typeof document?document:void 0}()};function _n(s){for(;Array.isArray(s);)s=s[0];return s}function _o(s,o){return _n(o[s])}function Tr(s,o){return _n(o[s.index])}function Wn(s,o){return s.data[o]}function Ds(s,o){return s[o]}function Dr(s,o){const u=o[s];return Bi(u)?u:u[0]}function ta(s){return 4==(4&s[2])}function ss(s){return 128==(128&s[2])}function li(s,o){return null==o?null:s[o]}function Js(s){s[18]=0}function Xs(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const bt={lFrame:wo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gl(){return bt.bindingsEnabled}function Me(){return bt.lFrame.lView}function Gt(){return bt.lFrame.tView}function Qa(s){return bt.lFrame.contextLView=s,s[8]}function Zn(){let s=eo();for(;null!==s&&64===s.type;)s=s.parent;return s}function eo(){return bt.lFrame.currentTNode}function ni(s,o){const u=bt.lFrame;u.currentTNode=s,u.isParent=o}function ql(){return bt.lFrame.isParent}function Wl(){bt.lFrame.isParent=!1}function Xa(){return bt.isInCheckNoChangesMode}function na(s){bt.isInCheckNoChangesMode=s}function _r(){const s=bt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function os(){return bt.lFrame.bindingIndex++}function Ss(s){const o=bt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function tu(s,o){const u=bt.lFrame;u.bindingIndex=u.bindingRootIndex=s,yo(o)}function yo(s){bt.lFrame.currentDirectiveIndex=s}function nu(){return bt.lFrame.currentQueryIndex}function Kl(s){bt.lFrame.currentQueryIndex=s}function vg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function $u(s,o,u){if(u&Et.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&Et.Host||(h=vg(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=bt.lFrame=Yl();return c.currentTNode=o,c.lView=s,!0}function vo(s){const o=Yl(),u=s[1];bt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Yl(){const s=bt.lFrame,o=null===s?null:s.child;return null===o?wo(s):o}function wo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function _d(){const s=bt.lFrame;return bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const tf=_d;function ra(){const s=_d();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Sr(){return bt.lFrame.selectedIndex}function As(s){bt.lFrame.selectedIndex=s}function Ln(){const s=bt.lFrame;return Wn(s.tView,s.selectedIndex)}function wg(){bt.lFrame.currentNamespace="svg"}function X_(){!function ey(){bt.lFrame.currentNamespace=null}()}function ru(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function xs(s,o,u){Ar(s,o,3,u)}function iu(s,o,u,c){(3&s[2])===u&&Ar(s,o,u,c)}function Gu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Ar(s,o,u,c){const p=null!=c?c:-1,y=o.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(s[18]+=65536),(E<p||-1==p)&&(sf(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function sf(s,o,u,c){const h=u[c]<0,p=u[c+1],E=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ia{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function rt(s,o,u){const c=Cn(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const y=u[h++],E=u[h++],I=u[h++];c?s.setAttribute(o,E,I,y):o.setAttributeNS(y,E,I)}else{const y=p,E=u[++h];Wr(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),h++}}return h}function $i(s){return 3===s||4===s||6===s}function Wr(s){return 64===s.charCodeAt(0)}function yr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Ql(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Ql(s,o,u,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function sa(s){return-1!==s}function oa(s){return 32767&s}function Co(s,o){let u=function zn(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Io=!0;function us(s){const o=Io;return Io=s,o}let qu=0;function wn(s,o){const u=To(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,aa(c.data,s),aa(o,null),aa(c.blueprint,null));const h=Rs(s,o),p=s.injectorIndex;if(sa(h)){const y=oa(h),E=Co(h,o),I=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|I[y+A]}return o[p+8]=h,p}function aa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function To(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Rs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],y=p.type;if(c=2===y?p.declTNode:1===y?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function au(s,o,u){!function Wu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ze)&&(c=u[ze]),null==c&&(c=u[ze]=qu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Do(s,o,u){if(u&Et.Optional)return s;Re(o,"NodeInjector")}function ua(s,o,u,c){if(u&Et.Optional&&void 0===c&&(c=null),0==(u&(Et.Self|Et.Host))){const h=s[9],p=hn(void 0);try{return h?h.get(o,c,u&Et.Optional):Pr(o,c,u&Et.Optional)}finally{hn(p)}}return Do(c,o,u)}function uu(s,o,u,c=Et.Default,h){if(null!==s){const p=function ls(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ze)?s[ze]:void 0;return"number"==typeof o?o>=0?255&o:Zu:o}(u);if("function"==typeof p){if(!$u(o,s,c))return c&Et.Host?Do(h,u,c):ua(o,u,c,h);try{const y=p(c);if(null!=y||c&Et.Optional)return y;Re(u)}finally{tf()}}else if("number"==typeof p){let y=null,E=To(s,o),I=-1,A=c&Et.Host?o[16][6]:null;for((-1===E||c&Et.SkipSelf)&&(I=-1===E?Rs(s,o):o[E+8],-1!==I&&Un(c,!1)?(y=o[1],E=oa(I),o=Co(I,o)):E=-1);-1!==E;){const R=o[1];if(Jl(p,E,R.data)){const V=la(E,o,u,y,c,A);if(V!==Ms)return V}I=o[E+8],-1!==I&&Un(c,o[1].data[E+8]===A)&&Jl(p,E,o)?(y=R,E=oa(I),o=Co(I,o)):E=-1}}}return ua(o,u,c,h)}const Ms={};function Zu(){return new Ao(Zn(),Me())}function la(s,o,u,c,h,p){const y=o[1],E=y.data[s+8],R=Gi(E,y,u,null==c?Fu(E)&&Io:c!=y&&0!=(3&E.type),h&Et.Host&&p===E);return null!==R?So(o,y,R,E):Ms}function Gi(s,o,u,c,h){const p=s.providerIndexes,y=o.data,E=1048575&p,I=s.directiveStart,R=p>>20,K=h?E+R:s.directiveEnd;for(let ne=c?E:E+R;ne<K;ne++){const Ce=y[ne];if(ne<I&&u===Ce||ne>=I&&Ce.type===u)return ne}if(h){const ne=y[I];if(ne&&xi(ne)&&ne.type===u)return I}return null}function So(s,o,u,c){let h=s[u];const p=o.data;if(function vd(s){return s instanceof ia}(h)){const y=h;y.resolving&&function We(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${u}`)}(De(p[u]));const E=us(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?hn(y.injectImpl):null;$u(s,c,Et.Default);try{h=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Eg(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=Ga(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&hn(I),us(E),y.resolving=!1,tf()}}return h}function Jl(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Un(s,o){return!(s&Et.Self||s&Et.Host&&o)}class Ao{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return uu(this._tNode,this._lView,o,c,u)}}function ci(s){return Hr(()=>{const o=s.prototype.constructor,u=o[Se]||xn(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Se]||xn(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function xn(s){return Be(s)?()=>{const o=xn(ie(s));return o&&o()}:Ri(s)}function Zr(s){return function Or(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if($i(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(Zn(),s)}const xo="__parameters__";function Vn(s,o,u){return Hr(()=>{const c=function Mi(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return E.annotation=y,E;function E(I,A,R){const V=I.hasOwnProperty(xo)?I[xo]:Object.defineProperty(I,xo,{value:[]})[xo];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(y),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Kn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uf=new Kn("AnalyzeForEntryComponents");function ri(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),ri(c,o)):o!==s&&o.push(c)}return o}function pi(s,o){s.forEach(u=>Array.isArray(u)?pi(u,o):o(u))}function du(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function hu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function pa(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function Bn(s,o,u){let c=cs(s,o);return c>=0?s[1|c]=u:(c=~c,function Ku(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ko(s,o){const u=cs(s,o);if(u>=0)return s[1|u]}function cs(s,o){return function ga(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const No={},ki="__NG_DI_FLAG__",Po="ngTempTokenPath",tc=/\n/gm,fu="__source",Sd=ae({provide:String,useValue:ae});let to;function ks(s){const o=to;return to=s,o}function C(s,o=Et.Default){if(void 0===to)throw new Le(203,"");return null===to?Pr(s,void 0,o):to.get(s,o&Et.Optional?null:void 0,o)}function D(s,o=Et.Default){return(function bn(){return Nr}()||C)(ie(s),o)}const j=D;function J(s){const o=[];for(let u=0;u<s.length;u++){const c=ie(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Le(900,"");let h,p=Et.Default;for(let y=0;y<c.length;y++){const E=c[y],I=Ne(E);"number"==typeof I?-1===I?h=E.token:p|=I:h=E}o.push(D(h,p))}else o.push(D(c))}return o}function le(s,o){return s[ki]=o,s.prototype[ki]=o,s}function Ne(s){return s[ki]}const Tt=le(Vn("Inject",s=>({token:s})),-1),kt=le(Vn("Optional"),8),tr=le(Vn("SkipSelf"),4);class Rd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function no(s){return s instanceof Rd?s.changingThisBreaksApplicationSecurity:s}const kd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,vf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var an=(()=>((an=an||{})[an.NONE=0]="NONE",an[an.HTML=1]="HTML",an[an.STYLE=2]="STYLE",an[an.SCRIPT=3]="SCRIPT",an[an.URL=4]="URL",an[an.RESOURCE_URL=5]="RESOURCE_URL",an))();function va(s){const o=function il(){const s=Me();return s&&s[12]}();return o?o.sanitize(an.URL,s)||"":function ma(s,o){const u=function _u(s){return s instanceof Rd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?no(s):function ic(s){return(s=String(s)).match(kd)||s.match(vf)?s:"unsafe:"+s}(ve(s))}const cE="__ngContext__";function Pi(s,o){s[cE]=o}function dy(s){const o=function If(s){return s[cE]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function uc(s){return s.ngOriginalError}function pD(s,...o){s.error(...o)}class Og{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function fD(s){return s&&s.ngErrorLogger||pD}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&uc(o);for(;u&&uc(u);)u=uc(u);return u||null}}const CD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Kt))();function Uo(s){return s instanceof Function?s():s}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function Fg(s,o){return undefined(s,o)}function Df(s){const o=s[3];return Ai(o)?o[3]:o}function Sf(s){return wE(s[13])}function Ug(s){return wE(s[4])}function wE(s){for(;null!==s&&!Ai(s);)s=s[4];return s}function Ld(s,o,u,c,h){if(null!=c){let p,y=!1;Ai(c)?p=c:Bi(c)&&(y=!0,c=c[0]);const E=_n(c);0===s&&null!==u?null==h?wy(o,u,E):Os(o,u,E,h||null,!0):1===s&&null!==u?Os(o,u,E,h||null,!0):2===s?function Iy(s,o,u){const c=Rf(s,o);c&&function MD(s,o,u,c){Cn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function Wi(s,o,u,c,h){const p=u[7];p!==_n(u)&&Ld(o,s,c,p,h);for(let E=10;E<u.length;E++){const I=u[E];jg(I[1],I,s,o,c,p)}}(o,s,p,u,h)}}function my(s,o,u){if(Cn(s))return s.createElement(o,u);{const c=null!==u?function Vu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function bE(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Xs(h,-1)),u.splice(c,1)}function _y(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&bE(h,c),o>0&&(s[u-1][4]=c[4]);const p=hu(s,10+o);!function mi(s,o){jg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function yy(s,o){if(!(256&o[2])){const u=o[11];Cn(u)&&u.destroyNode&&jg(s,o,u,3,null,null),function Af(s){let o=s[13];if(!o)return vy(s[1],s);for(;o;){let u=null;if(Bi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Bi(o)&&vy(o[1],o),o=o[3];null===o&&(o=s),Bi(o)&&vy(o[1],o),u=o&&o[4]}o=u}}(o)}}function vy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function IE(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof ia)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=h[p[y]],I=p[y+1];try{I.call(E)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function CE(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):_n(o[y]),I=c[h=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],I,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),p+=2}else{const y=c[h=u[p+1]];u[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Cn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Ai(o[3])){u!==o[3]&&bE(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Vg(s,o,u){return function RD(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===zt.None||h===zt.Emulated)return null}return Tr(c,u)}(s,o.parent,u)}function Os(s,o,u,c,h){Cn(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function wy(s,o,u){Cn(s)?s.appendChild(o,u):o.appendChild(u)}function TE(s,o,u,c,h){null!==c?Os(s,o,u,c,h):wy(s,o,u)}function Rf(s,o){return Cn(s)?s.parentNode(o):o.parentNode}function DE(s,o,u){return Ey(s,o,u)}let Ey=function SE(s,o,u){return 40&s.type?Tr(s,u):null};function Bg(s,o,u,c){const h=Vg(s,c,o),p=o[11],E=DE(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)TE(p,h,u[I],E,!1);else TE(p,h,u,E,!1)}function Vd(s,o){if(null!==o){const u=o.type;if(3&u)return Tr(o,s);if(4&u)return Cy(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Vd(s,c);{const h=s[o.index];return Ai(h)?Cy(-1,h):_n(h)}}if(32&u)return Fg(o,s)()||_n(s[o.index]);{const c=xE(s,o);return null!==c?Array.isArray(c)?c[0]:Vd(Df(s[16]),c):Vd(s,o.next)}}return null}function xE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Cy(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Vd(c,h)}return o[7]}function Ty(s,o,u,c,h,p,y){for(;null!=u;){const E=c[u.index],I=u.type;if(y&&0===o&&(E&&Pi(_n(E),c),u.flags|=4),64!=(64&u.flags))if(8&I)Ty(s,o,u.child,c,h,p,!1),Ld(o,s,h,E,p);else if(32&I){const A=Fg(u,c);let R;for(;R=A();)Ld(o,s,h,R,p);Ld(o,s,h,E,p)}else 16&I?L(s,o,c,u,h,p):Ld(o,s,h,E,p);u=y?u.projectionNext:u.next}}function jg(s,o,u,c,h,p){Ty(u,c,s.firstChild,o,h,p,!1)}function L(s,o,u,c,h,p){const y=u[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Ld(o,s,h,I[A],p);else Ty(s,o,I,y[3],h,p,!0)}function io(s,o,u){Cn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function cc(s,o,u){Cn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function pn(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const Dy="ng-template";function PD(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==pn(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Lr(s){return 4===s.type&&s.value!==Dy}function fR(s,o,u){return o===(4!==s.type||u?s.value:Dy)}function Sy(s,o,u){let c=4;const h=s.attrs||[],p=function Ay(s){for(let o=0;o<s.length;o++)if($i(s[o]))return o;return s.length}(h);let y=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!fR(s,I,u)||""===I&&1===o.length){if(_e(c))return!1;y=!0}}else{const A=8&c?I:o[++E];if(8&c&&null!==s.attrs){if(!PD(s.attrs,A,u)){if(_e(c))return!1;y=!0}continue}const V=OD(8&c?"class":I,h,Lr(s),u);if(-1===V){if(_e(c))return!1;y=!0;continue}if(""!==A){let K;K=V>p?"":h[V+1].toLowerCase();const ne=8&c?K:null;if(ne&&-1!==pn(ne,A,0)||2&c&&A!==K){if(_e(c))return!1;y=!0}}}}else{if(!y&&!_e(c)&&!_e(I))return!1;if(y&&_e(I))continue;y=!1,c=I|1&c}}return _e(c)||y}function _e(s){return 0==(1&s)}function OD(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function Ot(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Ea(s,o,u=!1){for(let c=0;c<o.length;c++)if(Sy(s,o[c],u))return!0;return!1}function Hg(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Mf(s,o){return s?":not("+o.trim()+")":o}function kf(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!_e(y)&&(o+=Mf(p,h),h=""),c=y,p=p||!_e(c);u++}return""!==h&&(o+=Mf(p,h)),o}const Vt={};function ME(s){kE(Gt(),Me(),Sr()+s,Xa())}function kE(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&xs(o,p,u)}else{const p=s.preOrderHooks;null!==p&&iu(o,p,0,u)}As(u)}function dc(s,o){return s<<17|o<<2}function Pn(s){return s>>17&32767}function $g(s){return 2|s}function Bo(s){return(131068&s)>>2}function Gg(s,o){return-131069&s|o<<2}function Ry(s){return 1|s}function jy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];Kl(h),y.contentQueries(2,o[p],p)}}}function fc(s,o,u,c,h,p,y,E,I,A){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,Js(R),R[3]=R[15]=s,R[8]=u,R[10]=y||s&&s[10],R[11]=E||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function sl(s,o,u,c,h){let p=s.data[o];if(null===p)p=function Ur(s,o,u,c,h){const p=eo(),y=ql(),I=s.data[o]=function Zy(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,h),function eu(){return bt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const y=function Ja(){const s=bt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ni(p,!0),p}function vr(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function ol(s,o,u){vo(o);try{const c=s.viewQuery;null!==c&&$d(1,c,u);const h=s.template;null!==h&&HE(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&jy(s,o),s.staticViewQueries&&$d(2,s.viewQuery,u);const p=s.components;null!==p&&function Hy(s,o){for(let u=0;u<o.length;u++)zD(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ra()}}function al(s,o,u,c){const h=o[2];if(256==(256&h))return;vo(o);const p=Xa();try{Js(o),function Zl(s){return bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&HE(s,o,u,2,c);const y=3==(3&h);if(!p)if(y){const A=s.preOrderCheckHooks;null!==A&&xs(o,A,null)}else{const A=s.preOrderHooks;null!==A&&iu(o,A,0,null),Gu(o,0)}if(function im(s){for(let o=Sf(s);null!==o;o=Ug(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&Xs(p,1),h[2]|=1024}}}(o),function Jy(s){for(let o=Sf(s);null!==o;o=Ug(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];ss(c)&&al(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&jy(s,o),!p)if(y){const A=s.contentCheckHooks;null!==A&&xs(o,A)}else{const A=s.contentHooks;null!==A&&iu(o,A,1),Gu(o,1)}!function By(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)As(~h);else{const p=h,y=u[++c],E=u[++c];tu(y,p),E(2,o[p])}}}finally{As(-1)}}(s,o);const E=s.components;null!==E&&function HD(s,o){for(let u=0;u<o.length;u++)Hf(s,o[u])}(o,E);const I=s.viewQuery;if(null!==I&&$d(2,I,c),!p)if(y){const A=s.viewCheckHooks;null!==A&&xs(o,A)}else{const A=s.viewHooks;null!==A&&iu(o,A,2),Gu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Xs(o[3],-1))}finally{ra()}}function $D(s,o,u,c){const h=o[10],p=!Xa(),y=ta(o);try{p&&!y&&h.begin&&h.begin(),y&&ol(s,o,c),al(s,o,u,c)}finally{p&&!y&&h.end&&h.end()}}function HE(s,o,u,c,h){const p=Sr(),y=2&c;try{As(-1),y&&o.length>20&&kE(s,o,20,Xa()),u(c,h)}finally{As(p)}}function Gy(s,o,u){!Gl()||(function KE(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||wn(u,o),Pi(c,o);const y=u.initialInputs;for(let E=h;E<p;E++){const I=s.data[E],A=xi(I);A&&QE(o,u,I);const R=So(o,s,E,u);Pi(R,o),null!==y&&JE(0,E-h,R,I,0,y),A&&(Dr(u.index,o)[8]=R)}}(s,o,u,Tr(u,o)),128==(128&u.flags)&&function tm(s,o,u){const c=u.directiveStart,h=u.directiveEnd,y=u.index,E=function md(){return bt.lFrame.currentDirectiveIndex}();try{As(y);for(let I=c;I<h;I++){const A=s.data[I],R=o[I];yo(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Yy(A,R)}}finally{As(-1),yo(E)}}(s,o,u))}function qy(s,o,u=Tr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[h++]=E}}}function Wy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Bd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Bd(s,o,u,c,h,p,y,E,I,A){const R=20+c,V=R+h,K=function GD(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Vt);return u}(R,V),ne="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:u,queries:null,viewQuery:E,declTNode:o,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function Uf(s,o,u,c){const h=lm(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&rb(s).push(c,h.length-1))}function em(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function vi(s,o,u,c,h,p,y,E){const I=Tr(o,u);let R,A=o.inputs;!E&&null!=A&&(R=A[c])?(tv(s,u,R,c,h),Fu(o)&&function qE(s,o){const u=Dr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function WD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,Cn(p)?p.setProperty(I,c,h):Wr(c)||(I.setProperty?I.setProperty(c,h):I[c]=h))}function Ky(s,o,u,c){let h=!1;if(Gl()){const p=function Vf(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];Ea(u,y.selectors,!1)&&(h||(h=[]),au(wn(u,o),s,y.type),xi(y)?(Qy(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==p){h=!0,Hd(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const V=p[R];V.providersResolver&&V.providersResolver(V)}let E=!1,I=!1,A=vr(s,o,p.length,null);for(let R=0;R<p.length;R++){const V=p[R];u.mergedAttrs=yr(u.mergedAttrs,V.hostAttrs),Bf(s,u,o,A,V),YE(A,V,y),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const K=V.type.prototype;!E&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!I&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}!function GE(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,y=[];let E=null,I=null;for(let A=o.directiveStart;A<c;A++){const R=h[A],V=R.inputs,K=null===p||Lr(o)?null:jf(V,p);y.push(K),E=em(V,A,E),I=em(R.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=I}(s,u)}y&&function Zi(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Le(-301,!1);c.push(o[h],p)}}}(u,c,y)}return u.mergedAttrs=yr(u.mergedAttrs,u.attrs),h}function zE(s,o,u,c,h,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function pc(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=I&&E.push(I),E.push(c,h,y)}}function Yy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Qy(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function YE(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;xi(o)&&(u[""]=s)}}function Hd(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Bf(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=Ri(h.type)),y=new ia(p,xi(h),null);s.blueprint[c]=y,u[c]=y,zE(s,o,0,c,vr(s,u,h.hostVars,Vt),h)}function QE(s,o,u){const c=Tr(o,s),h=Wy(u),p=s[10],y=gc(s,fc(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=y}function so(s,o,u,c,h,p){const y=Tr(s,o);!function nm(s,o,u,c,h,p,y){if(null==p)Cn(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const E=null==y?ve(p):y(p,c||"",h);Cn(s)?s.setAttribute(o,h,E,u):u?o.setAttributeNS(u,h,E):o.setAttribute(h,E)}}(o[11],y,p,s.value,u,c,h)}function JE(s,o,u,c,h,p){const y=p[o];if(null!==y){const E=c.setInput;for(let I=0;I<y.length;){const A=y[I++],R=y[I++],V=y[I++];null!==E?c.setInput(u,V,A,R):u[R]=V}}}function jf(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function rm(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Hf(s,o){const u=Dr(o,s);if(ss(u)){const c=u[1];80&u[2]?al(c,u,c.template,u[8]):u[5]>0&&sm(u)}}function sm(s){for(let c=Sf(s);null!==c;c=Ug(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const y=p[1];al(y,p,y.template,p[8])}else p[5]>0&&sm(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=Dr(u[c],s);ss(h)&&h[5]>0&&sm(h)}}function zD(s,o){const u=Dr(o,s),c=u[1];(function Xy(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),ol(c,u,u[8])}function gc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function $f(s){for(;s;){s[2]|=64;const o=Df(s);if(td(s)&&!o)return s;s=o}return null}function am(s,o,u){const c=o[10];c.begin&&c.begin();try{al(s,o,s.template,u)}catch(h){throw ev(o,h),h}finally{c.end&&c.end()}}function tb(s){!function om(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=dy(u),h=c[1];$D(h,c,h.template,u)}}(s[8])}function $d(s,o,u){Kl(0),o(s,u)}const mc=(()=>Promise.resolve(null))();function lm(s){return s[7]||(s[7]=[])}function rb(s){return s.cleanup||(s.cleanup=[])}function ev(s,o){const u=s[9],c=u?u.get(Og,null):null;c&&c.handleError(o)}function tv(s,o,u,c,h){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],I=o[y],A=s.data[y];null!==A.setInput?A.setInput(I,h,c,E):I[E]=h}}function Eu(s,o,u){const c=_o(o,s);!function gy(s,o,u){Cn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function ba(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?h=pe(h,E):2==p&&(c=pe(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const dm=new Kn("INJECTOR",-1);class Yn{get(o,u=No){if(u===No){const c=new Error(`NullInjectorError: No provider for ${ee(o)}!`);throw c.name="NullInjectorError",c}return u}}const Gd=new Kn("Set Injector scope."),Cu={},qf={};let rv;function iv(){return void 0===rv&&(rv=new Yn),rv}function sb(s,o=null,u=null,c){const h=ob(s,o,u,c);return h._resolveInjectorDefTypes(),h}function ob(s,o=null,u=null,c){return new KD(s,u,o||iv(),c)}class KD{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&pi(u,E=>this.processProvider(E,o,u)),pi([o],E=>this.processInjectorType(E,[],p)),this.records.set(dm,_c(void 0,this));const y=this.records.get(Gd);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof o?null:ee(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=No,c=Et.Default){this.assertNotDestroyed();const h=ks(this),p=hn(void 0);try{if(!(c&Et.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function lb(s){return"function"==typeof s||"object"==typeof s&&s instanceof Kn}(o)&&kn(o);E=I&&this.injectableDefInScope(I)?_c(sv(o),Cu):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Et.Self?iv():this.parent).get(o,u=c&Et.Optional&&u===No?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Po]=y[Po]||[]).unshift(ee(o)),h)throw y;return function Ze(s,o,u,c){const h=s[Po];throw o[fu]&&h.unshift(o[fu]),s.message=function yt(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ee(o);if(Array.isArray(o))h=o.map(ee).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):ee(E)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(tc,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Po]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{hn(p),ks(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ee(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,u,c){if(!(o=ie(o)))return!1;let h=ns(o);const p=null==h&&o.ngModule||void 0,y=void 0===p?o:p,E=-1!==c.indexOf(y);if(void 0!==p&&(h=ns(p)),null==h)return!1;if(null!=h.imports&&!E){let R;c.push(y);try{pi(h.imports,V=>{this.processInjectorType(V,u,c)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:K,providers:ne}=R[V];pi(ne,Ce=>this.processProvider(Ce,K,ne||_t))}}this.injectorDefTypes.add(y);const I=Ri(y)||(()=>new y);this.records.set(y,_c(I,Cu));const A=h.providers;if(null!=A&&!E){const R=o;pi(A,V=>this.processProvider(V,R,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=Wd(o=ie(o))?o:ie(o&&o.provide);const p=function ul(s,o,u){return av(s)?_c(void 0,s.useValue):_c(ov(s),Cu)}(o);if(Wd(o)||!0!==o.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=_c(void 0,Cu,!0),y.factory=()=>J(y.multi),this.records.set(h,y)),h=o,y.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===Cu&&(u.value=qf,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ub(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ie(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function sv(s){const o=kn(s),u=null!==o?o.factory:Ri(s);if(null!==u)return u;if(s instanceof Kn)throw new Le(204,!1);if(s instanceof Function)return function Wf(s){const o=s.length;if(o>0)throw pa(o,"?"),new Le(204,!1);const u=function oi(s){const o=s&&(s[Ti]||s[$n]);if(o){const u=function Fn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Le(204,!1)}function ov(s,o,u){let c;if(Wd(s)){const h=ie(s);return Ri(h)||sv(h)}if(av(s))c=()=>ie(s.useValue);else if(function YD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...J(s.deps||[]));else if(function qd(s){return!(!s||!s.useExisting)}(s))c=()=>D(ie(s.useExisting));else{const h=ie(s&&(s.useClass||s.provide));if(!function QD(s){return!!s.deps}(s))return Ri(h)||sv(h);c=()=>new h(...J(s.deps))}return c}function _c(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function av(s){return null!==s&&"object"==typeof s&&Sd in s}function Wd(s){return"function"==typeof s}let Ls=(()=>{class s{static create(u,c){var h;if(Array.isArray(u))return sb({name:""},c,u,"");{const p=null!==(h=u.name)&&void 0!==h?h:"";return sb({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=No,s.NULL=new Yn,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>D(dm)}),s.__NG_ELEMENT_ID__=-1,s})();function pb(s,o){ru(dy(s)[1],Zn())}function gm(s){let o=function Zd(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(xi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Le(903,"");h=o.\u0275dir}if(h){if(u){c.push(h);const y=s;y.inputs=zd(s.inputs),y.declaredInputs=zd(s.declaredInputs),y.outputs=zd(s.outputs);const E=h.hostBindings;E&&rS(s,E);const I=h.viewQuery,A=h.contentQueries;if(I&&mb(s,I),A&&mm(s,A),X(s.inputs,h.inputs),X(s.declaredInputs,h.declaredInputs),X(s.outputs,h.outputs),xi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===gm&&(u=!1)}}o=Object.getPrototypeOf(o)}!function pv(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=yr(h.hostAttrs,u=yr(u,h.hostAttrs))}}(c)}function zd(s){return s===gn?{}:s===_t?[]:s}function mb(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function mm(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function rS(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Xf=null;function ll(){if(!Xf){const s=Kt.Symbol;if(s&&s.iterator)Xf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Xf=c)}}}return Xf}function Kd(s){return!!ym(s)&&(Array.isArray(s)||!(s instanceof Map)&&ll()in s)}function ym(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Oi(s,o,u){return s[o]=u}function wi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function cl(s,o,u,c){const h=wi(s,o,u);return wi(s,o+1,c)||h}function Ki(s,o,u,c){const h=Me();return wi(h,os(),o)&&(Gt(),so(Ln(),h,s,o,u,c)),Ki}function vc(s,o,u,c){return wi(s,os(),u)?o+ve(u)+c:Vt}function jo(s,o,u,c,h,p){const E=cl(s,function Hi(){return bt.lFrame.bindingIndex}(),u,h);return Ss(2),E?o+ve(u)+c+ve(h)+p:Vt}function wr(s,o,u,c,h,p,y,E){const I=Me(),A=Gt(),R=s+20,V=A.firstCreatePass?function Ve(s,o,u,c,h,p,y,E,I){const A=o.consts,R=sl(o,s,4,y||null,li(A,E));Ky(o,u,R,li(A,I)),ru(o,R);const V=R.tViews=Bd(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,A,I,o,u,c,h,p,y):A.data[R];ni(V,!1);const K=I[11].createComment("");Bg(A,I,K,V),Pi(K,I),gc(I,I[R]=rm(K,I,K,V)),Ks(V)&&Gy(A,I,V),null!=y&&qy(I,V,E)}function wm(s){return Ds(function pd(){return bt.lFrame.contextLView}(),20+s)}function Dc(s,o=Et.Default){const u=Me();return null===u?D(s,o):uu(Zn(),u,ie(s),o)}function he(){throw new Error("invalid")}function nh(s,o,u){const c=Me();return wi(c,os(),o)&&vi(Gt(),Ln(),c,s,o,c[11],u,!1),nh}function Us(s,o,u,c,h){const y=h?"class":"style";tv(s,u,o.inputs[y],y,c)}function hl(s,o,u,c){const h=Me(),p=Gt(),y=20+s,E=h[11],I=h[y]=my(E,o,function yd(){return bt.lFrame.currentNamespace}()),A=p.firstCreatePass?function cS(s,o,u,c,h,p,y){const E=o.consts,A=sl(o,s,2,h,li(E,p));return Ky(o,u,A,li(E,y)),null!==A.attrs&&ba(A,A.attrs,!1),null!==A.mergedAttrs&&ba(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,h,0,o,u,c):p.data[y];ni(A,!0);const R=A.mergedAttrs;null!==R&&rt(E,I,R);const V=A.classes;null!==V&&cc(E,I,V);const K=A.styles;return null!==K&&io(E,I,K),64!=(64&A.flags)&&Bg(p,h,I,A),0===function za(){return bt.lFrame.elementDepthCount}()&&Pi(I,h),function hd(){bt.lFrame.elementDepthCount++}(),Ks(A)&&(Gy(p,h,A),function $y(s,o,u){if(ed(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}(p,A,h)),null!==c&&qy(h,A),hl}function Ho(){let s=Zn();ql()?Wl():(s=s.parent,ni(s,!1));const o=s;!function Ka(){bt.lFrame.elementDepthCount--}();const u=Gt();return u.firstCreatePass&&(ru(u,s),ed(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function af(s){return 0!=(16&s.flags)}(o)&&Us(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function bg(s){return 0!=(32&s.flags)}(o)&&Us(u,o,Me(),o.stylesWithoutHost,!1),Ho}function Cv(s,o,u,c){return hl(s,o,u,c),Ho(),Cv}function Qi(){return Me()}function Tm(s){return!!s&&"function"==typeof s.then}function fl(s){return!!s&&"function"==typeof s.subscribe}const Tv=fl;function rr(s,o,u,c){const h=Me(),p=Gt(),y=Zn();return function Mn(s,o,u,c,h,p,y,E){const I=Ks(c),R=s.firstCreatePass&&rb(s),V=o[8],K=lm(o);let ne=!0;if(3&c.type||E){const Qe=Tr(c,o),ot=E?E(Qe):Qe,ke=K.length,Dt=E?Xt=>E(_n(Xt[c.index])):c.index;if(Cn(u)){let Xt=null;if(!E&&I&&(Xt=function Ei(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===u&&h[p+1]===c){const E=o[7],I=h[p+2];return E.length>I?E[I]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==Xt)(Xt.__ngLastListenerFn__||Xt).__ngNextListenerFn__=p,Xt.__ngLastListenerFn__=p,ne=!1;else{p=pl(c,o,V,p,!1);const In=u.listen(ot,h,p);K.push(p,In),R&&R.push(h,Dt,ke,ke+1)}}else p=pl(c,o,V,p,!0),ot.addEventListener(h,p,y),K.push(p),R&&R.push(h,Dt,ke,y)}else p=pl(c,o,V,p,!1);const Ce=c.outputs;let He;if(ne&&null!==Ce&&(He=Ce[h])){const Qe=He.length;if(Qe)for(let ot=0;ot<Qe;ot+=2){const Xi=o[He[ot]][He[ot+1]].subscribe(p),Wc=K.length;K.push(p,Xi),R&&R.push(h,c.index,Wc,-(Wc+1))}}}(p,h,h[11],y,s,o,!!u,c),rr}function Dv(s,o,u,c){try{return!1!==u(c)}catch(h){return ev(s,h),!1}}function pl(s,o,u,c,h){return function p(y){if(y===Function)return c;const E=2&s.flags?Dr(s.index,o):o;0==(32&o[2])&&$f(E);let I=Dv(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)I=Dv(o,0,A,y)&&I,A=A.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function fs(s=1){return function as(s){return(bt.lFrame.contextLView=function nf(s,o){for(;s>0;)o=o[15],s--;return o}(s,bt.lFrame.contextLView))[8]}(s)}function dS(s,o){let u=null;const c=function wt(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?Ea(s,p,!0):Hg(c,p))return h}else u=h}return u}function Vr(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=pa(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const y=s?dS(p,s):0;null!==y&&(h[y]?h[y].projectionNext=p:c[y]=p,h[y]=p),p=p.next}}}function xb(s,o=0,u){const c=Me(),h=Gt(),p=sl(h,20+s,16,null,u||null);null===p.projection&&(p.projection=o),Wl(),64!=(64&p.flags)&&function ND(s,o,u){L(o[11],0,o,u,Vg(s,u,o),DE(u.parent||o[6],u,o))}(h,c,p)}function Ia(s,o,u){return Qn(s,"",o,"",u),Ia}function Qn(s,o,u,c,h){const p=Me(),y=vc(p,o,u,c);return y!==Vt&&vi(Gt(),Ln(),p,s,y,p[11],h,!1),Qn}function _l(s,o,u,c,h){const p=s[u+1],y=null===o;let E=c?Pn(p):Bo(p),I=!1;for(;0!==E&&(!1===I||y);){const R=s[E+1];Ta(s[E],o)&&(I=!0,s[E+1]=c?Ry(R):$g(R)),E=c?Pn(R):Bo(R)}I&&(s[u+1]=c?$g(p):Ry(p))}function Ta(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&cs(s,o)>=0}function Mm(s,o){return function ao(s,o,u,c){const h=Me(),p=Gt(),y=Ss(2);p.firstUpdatePass&&function ch(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[Sr()],y=function Fb(s,o){return o>=s.expandoStartIndex}(s,u);(function Su(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function km(s,o,u,c){const h=function zl(s){const o=bt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=op(u=Qr(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Qr(h,s,o,u,c),null===p){let I=function Nm(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Bo(c))return s[Pn(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Qr(null,s,o,I[1],c),I=op(I,o.attrs,c),function Lb(s,o,u,c){s[Pn(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function Ub(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=op(c,s[p].hostAttrs,u);return op(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function ml(s,o,u,c,h,p){let y=p?o.classBindings:o.styleBindings,E=Pn(y),I=Bo(y);s[c]=u;let R,A=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||cs(V,R)>0)&&(A=!0)}else R=u;if(h)if(0!==I){const K=Pn(s[E+1]);s[c+1]=dc(K,E),0!==K&&(s[K+1]=Gg(s[K+1],c)),s[E+1]=function LD(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=dc(E,0),0!==E&&(s[E+1]=Gg(s[E+1],c)),E=c;else s[c+1]=dc(I,0),0===E?E=c:s[I+1]=Gg(s[I+1],c),I=c;A&&(s[c+1]=$g(s[c+1])),_l(s,R,c,!0),_l(s,R,c,!1),function Sm(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&cs(p,o)>=0&&(u[c+1]=Ry(u[c+1]))}(o,R,s,c,p),y=dc(E,I),p?o.classBindings=y:o.styleBindings=y}(h,p,o,u,y,c)}}(p,s,y,c),o!==Vt&&wi(h,y,o)&&function jb(s,o,u,c,h,p,y,E){if(!(3&o.type))return;const I=s.data,A=I[E+1];Pm(function yi(s){return 1==(1&s)}(A)?Hb(I,o,u,h,Bo(A),y):void 0)||(Pm(p)||function yu(s){return 2==(2&s)}(A)&&(p=Hb(I,null,u,h,E,y)),function Vo(s,o,u,c,h){const p=Cn(s);if(o)h?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:wa.DashCase;if(null==h)p?s.removeStyle(u,c,y):u.style.removeProperty(c);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),y|=wa.Important),p?s.setStyle(u,c,h,y):u.style.setProperty(c,h,E?"important":"")}}}(c,y,_o(Sr(),u),h,p))}(p,p.data[Sr()],h,h[11],s,h[y+1]=function pS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ee(no(s)))),s}(o,u),c,y)}(s,o,null,!0),Mm}function Qr(s,o,u,c,h){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=op(c,p.hostAttrs,h),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function op(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Bn(s,y,!!u||o[++p]))}return void 0===s?null:s}function Hb(s,o,u,c,h,p){const y=null===o;let E;for(;h>0;){const I=s[h],A=Array.isArray(I),R=A?I[1]:I,V=null===R;let K=u[h+1];K===Vt&&(K=V?_t:void 0);let ne=V?ko(K,c):R===c?K:void 0;if(A&&!Pm(ne)&&(ne=ko(I,c)),Pm(ne)&&(E=ne,y))return E;const Ce=s[h+1];h=y?Pn(Ce):Bo(Ce)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=ko(I,c))}return E}function Pm(s){return void 0!==s}function xc(s,o=""){const u=Me(),c=Gt(),h=s+20,p=c.firstCreatePass?sl(c,h,1,o,null):c.data[h],y=u[h]=function py(s,o){return Cn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Bg(c,u,y,p),ni(p,!1)}function xv(s){return ap("",s,""),xv}function ap(s,o,u){const c=Me(),h=vc(c,s,o,u);return h!==Vt&&Eu(c,Sr(),h),ap}function Om(s,o,u,c,h){const p=Me(),y=jo(p,s,o,u,c,h);return y!==Vt&&Eu(p,Sr(),y),Om}const Aa=void 0;var Jb=["en",[["a","p"],["AM","PM"],Aa],[["AM","PM"],Aa,Aa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Aa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Aa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Aa,"{1} 'at' {0}",Aa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jm(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ph={};function Uv(s){const o=function Xb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=xa(o);if(u)return u;const c=o.split("-")[0];if(u=xa(c),u)return u;if("en"===c)return Jb;throw new Error(`Missing locale data for the locale "${s}".`)}function kc(s){return Uv(s)[St.PluralCase]}function xa(s){return s in ph||(ph[s]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[s]),ph[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const $m="en-US";let eC=$m;function Jv(s,o,u,c,h){if(s=ie(s),Array.isArray(s))for(let p=0;p<s.length;p++)Jv(s[p],o,u,c,h);else{const p=Gt(),y=Me();let E=Wd(s)?s:ie(s.provide),I=ov(s);const A=Zn(),R=1048575&A.providerIndexes,V=A.directiveStart,K=A.providerIndexes>>20;if(Wd(s)||!s.multi){const ne=new ia(I,h,Dc),Ce=yp(E,o,h?R:R+K,V);-1===Ce?(au(wn(A,y),p,E),_p(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(ne),y.push(ne)):(u[Ce]=ne,y[Ce]=ne)}else{const ne=yp(E,o,R+K,V),Ce=yp(E,o,R,R+K),He=ne>=0&&u[ne],Qe=Ce>=0&&u[Ce];if(h&&!Qe||!h&&!He){au(wn(A,y),p,E);const ot=function bC(s,o,u,c,h){const p=new ia(s,u,Dc);return p.multi=[],p.index=o,p.componentProviders=0,Xr(p,h,c&&!u),p}(h?e0:Xv,u.length,h,c,I);!h&&Qe&&(u[Ce].providerFactory=ot),_p(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(ot),y.push(ot)}else _p(p,s,ne>-1?ne:Ce,Xr(u[h?Ce:ne],I,!h&&c));!h&&c&&Qe&&u[Ce].componentProviders++}}}function _p(s,o,u,c){const h=Wd(o),p=function ab(s){return!!s.useClass}(o);if(h||p){const I=(p?ie(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=A.indexOf(u);-1===R?A.push(u,[c,I]):A[R+1].push(c,I)}else A.push(u,I)}}}function Xr(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function yp(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function Xv(s,o,u,c){return Ra(this.multi,[])}function e0(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=So(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),Ra(h,p);for(let I=y;I<E.length;I++)p.push(E[I])}else p=[],Ra(h,p);return p}function Ra(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function CC(s,o=[]){return u=>{u.providersResolver=(c,h)=>function EC(s,o,u){const c=Gt();if(c.firstCreatePass){const h=xi(s);Jv(u,c.data,c.blueprint,h,!0),Jv(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class vp{}class wp{resolveComponentFactory(o){throw function Oc(s){const o=Error(`No component factory found for ${ee(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ep=(()=>{class s{}return s.NULL=new wp,s})();function t0(){return bl(Zn(),Me())}function bl(s,o){return new Ch(Tr(s,o))}let Ch=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=t0,s})();function TC(s){return s instanceof Ch?s.nativeElement:s}class n0{}let DC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function bp(){const s=Me(),u=Dr(Zn().index,s);return function Zm(s){return s[11]}(Bi(u)?u:s)}(),s})(),Fc=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class SC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const r0=new SC("13.2.7"),s0={};function zm(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(_n(p)),Ai(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&zm(I[1],I,A,c)}const y=u.type;if(8&y)zm(s,o,u.child,c);else if(32&y){const E=Fg(u,o);let I;for(;I=E();)c.push(I)}else if(16&y){const E=xE(o,u);if(Array.isArray(E))c.push(...E);else{const I=Df(o[16]);zm(I[1],I,E,c,!0)}}u=h?u.projectionNext:u.next}return c}class Cp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return zm(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ai(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(_y(o,c),hu(u,c))}this._attachedToViewContainer=!1}yy(this._lView[1],this._lView)}onDestroy(o){Uf(this._lView[1],this._lView,null,o)}markForCheck(){$f(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){am(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Gf(s,o,u){na(!0);try{am(s,o,u)}finally{na(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function EE(s,o){jg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class Ip extends Cp{constructor(o){super(o),this._view=o}detectChanges(){tb(this._view)}checkNoChanges(){!function nb(s){na(!0);try{tb(s)}finally{na(!1)}}(this._view)}get context(){return null}}class Cl extends Ep{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=tt(o);return new o0(u,this.ngModule)}}function Il(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class o0 extends vp{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function FD(s){return s.map(kf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Il(this.componentDef.inputs)}get outputs(){return Il(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function GS(s,o){return{get:(u,c,h)=>{const p=s.get(u,s0,h);return p!==s0||c===s0?p:o.get(u,c,h)}}}(o,h.injector):o,y=p.get(n0,qa),E=p.get(Fc,null),I=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function $E(s,o,u){if(Cn(s))return s.selectRootElement(o,u===zt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):my(y.createRenderer(null,this.componentDef),A,function AC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),V=this.componentDef.onPush?576:528,K=function fv(s,o){return{components:[],scheduler:s||CD,clean:mc,playerHandler:o||null,flags:0}}(),ne=Bd(0,null,null,1,0,null,null,null,null,null),Ce=fc(null,ne,K,V,null,null,y,I,E,p);let He,Qe;vo(Ce);try{const ot=function hv(s,o,u,c,h,p){const y=u[1];u[20]=s;const I=sl(y,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(ba(I,A,!0),null!==s&&(rt(h,s,A),null!==I.classes&&cc(h,s,I.classes),null!==I.styles&&io(h,s,I.styles)));const R=c.createRenderer(s,o),V=fc(u,Wy(o),null,o.onPush?64:16,u[20],I,c,R,p||null,null);return y.firstCreatePass&&(au(wn(I,u),y,o.type),Qy(y,I),Hd(I,u.length,1)),gc(u,V),u[20]=V}(R,this.componentDef,Ce,y,I);if(R)if(c)rt(I,R,["ng-version",r0.full]);else{const{attrs:ke,classes:Dt}=function xy(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!_e(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);ke&&rt(I,R,ke),Dt&&Dt.length>0&&cc(I,R,Dt.join(" "))}if(Qe=Wn(ne,20),void 0!==u){const ke=Qe.projection=[];for(let Dt=0;Dt<this.ngContentSelectors.length;Dt++){const Xt=u[Dt];ke.push(null!=Xt?Array.from(Xt):null)}}He=function Ca(s,o,u,c,h){const p=u[1],y=function jd(s,o,u){const c=Zn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Bf(s,c,o,vr(s,o,1,null),u));const h=So(o,s,c.directiveStart,c);Pi(h,o);const p=Tr(c,o);return p&&Pi(p,o),h}(p,u,o);if(c.components.push(y),s[8]=y,h&&h.forEach(I=>I(y,o)),o.contentQueries){const I=Zn();o.contentQueries(1,y,I.directiveStart)}const E=Zn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(As(E.index),zE(u[1],E,0,E.directiveStart,E.directiveEnd,o),Yy(o,y)),y}(ot,this.componentDef,Ce,K,[pb]),ol(ne,Ce,null)}finally{ra()}return new qS(this.componentType,He,bl(Qe,Ce),Ce,Qe)}}class qS extends class IC{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Ip(h),this.componentType=o}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ma{}class Tp{}const ka=new Map;class d0 extends Ma{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Cl(this);const c=st(o);this._bootstrapComponents=Uo(c.bootstrap),this._r3Injector=ob(o,u,[{provide:Ma,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver}],ee(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Ls.THROW_IF_NOT_FOUND,c=Et.Default){return o===Ls||o===Ma||o===dm?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Na extends Tp{constructor(o){super(),this.moduleType=o,null!==st(o)&&function gs(s){const o=new Set;!function u(c){const h=st(c,!0),p=h.id;null!==p&&(function l0(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ee(o)} vs ${ee(o.name)}`)}(p,ka.get(p),c),ka.set(p,c));const y=Uo(h.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new d0(this.moduleType,o)}}function MC(s,o,u,c,h,p){return function h0(s,o,u,c,h,p,y,E){const I=o+u;return function ep(s,o,u,c,h){const p=cl(s,o,u,c);return wi(s,o+2,h)||p}(s,I,h,p,y)?Oi(s,I+3,E?c.call(E,h,p,y):c(h,p,y)):Sp(s,I+3)}(Me(),_r(),s,o,u,c,h,p)}function Sp(s,o){const u=s[o];return u===Vt?void 0:u}function FC(s,o){const u=Gt();let c;const h=s+20;u.firstCreatePass?(c=function LC(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=Ri(c.type)),y=hn(Dc);try{const E=us(!1),I=p();return us(E),function bc(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Me(),h,I),I}finally{hn(y)}}function Dh(s,o,u,c){const h=s+20,p=Me(),y=Ds(p,h);return function Sh(s,o){return s[1].data[o].pure}(p,h)?function Ap(s,o,u,c,h,p,y){const E=o+u;return cl(s,E,h,p)?Oi(s,E+2,y?c.call(y,h,p):c(h,p)):Sp(s,E+2)}(p,_r(),o,y.transform,u,c,y):y.transform(u,c)}function p0(s){return o=>{setTimeout(s,void 0,o)}}const uo=class QS extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,y;let E=o,I=u||(()=>null),A=c;if(o&&"object"==typeof o){const V=o;E=null===(h=V.next)||void 0===h?void 0:h.bind(V),I=null===(p=V.error)||void 0===p?void 0:p.bind(V),A=null===(y=V.complete)||void 0===y?void 0:y.bind(V)}this.__isAsync&&(I=p0(I),E&&(E=p0(E)),A&&(A=p0(A)));const R=super.subscribe({next:E,error:I,complete:A});return o instanceof $.w0&&o.add(R),R}};function si(){return this._results[ll()]()}class g0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ll(),c=g0.prototype;c[u]||(c[u]=si)}get changes(){return this._changes||(this._changes=new uo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=ri(o);(this._changesDetected=!function cf(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xp=(()=>{class s{}return s.__NG_ELEMENT_ID__=BC,s})();const JS=xp,XS=class extends JS{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=fc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),ol(u,c,o),new Cp(c)}};function BC(){return Km(Zn(),Me())}function Km(s,o){return 4&s.type?new XS(o,s,bl(s,o)):null}let Vc=(()=>{class s{}return s.__NG_ELEMENT_ID__=eA,s})();function eA(){return Rp(Zn(),Me())}const jC=Vc,Ym=class extends jC{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){const o=Rs(this._hostTNode,this._hostLView);if(sa(o)){const u=Co(o,this._hostLView),c=oa(o);return new Ao(u[1].data[c+8],u)}return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Qm(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const y=o&&!function fa(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const V=u||{};E=V.index,c=V.injector,h=V.projectableNodes,p=V.ngModuleRef}const I=y?o:new o0(tt(o)),A=c||this.parentInjector;if(!p&&null==I.ngModule){const K=(y?A:this.parentInjector).get(Ma,null);K&&(p=K)}const R=I.create(A,h,void 0,p);return this.insert(R.hostView,E),R}insert(o,u){const c=o._lView,h=c[1];if(function $l(s){return Ai(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],K=new Ym(V,V[6],V[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function xf(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],du(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Ud(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,c,y,p);const E=Cy(p,y),I=c[11],A=Rf(I,y[7]);return null!==A&&function xD(s,o,u,c,h,p){c[0]=h,c[6]=o,jg(s,c,u,1,h,p)}(h,y[6],I,c,A,E),o.attachToViewContainerRef(),du(Bc(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Qm(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=_y(this._lContainer,u);c&&(hu(Bc(this._lContainer),u),yy(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=_y(this._lContainer,u);return c&&null!=hu(Bc(this._lContainer),u)?new Cp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Qm(s){return s[8]}function Bc(s){return s[8]||(s[8]=[])}function Rp(s,o){let u;const c=o[s.index];if(Ai(c))u=c;else{let h;if(8&s.type)h=_n(c);else{const p=o[11];h=p.createComment("");const y=Tr(s,o);Os(p,Rf(p,y),h,function kD(s,o){return Cn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=u=rm(c,o,h,s),gc(o,u)}return new Ym(u,s,o)}class y0{constructor(o){this.queryList=o,this.matches=null}clone(){return new y0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new Jm(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==n_(o,u).matches&&this.queries[u].setDirty()}}class v0{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Mp{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new Mp(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class w0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new w0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,HC(u,p)),this.matchTNodeWithReadOption(o,u,Gi(u,o,p,!1,!1))}else c===xp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Gi(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Ch||h===Vc||h===xp&&4&u.type)this.addMatch(u.index,-2);else{const p=Gi(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function HC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function $C(s,o,u,c){return-1===u?function nA(s,o){return 11&s.type?bl(s,o):4&s.type?Km(s,o):null}(o,s):-2===u?function rA(s,o,u){return u===Ch?bl(o,s):u===xp?Km(o,s):u===Vc?Rp(o,s):void 0}(s,o,c):So(s,s[1],u,o)}function jc(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=u.matches,E=[];for(let I=0;I<y.length;I+=2){const A=y[I];E.push(A<0?null:$C(o,p[A],y[I+1],u.metadata.read))}h.matches=E}return h.matches}function Dl(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const y=jc(s,o,h,u);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(y[E/2]);else{const A=p[E+1],R=o[-I];for(let V=10;V<R.length;V++){const K=R[V];K[17]===K[3]&&Dl(K[1],K,A,c)}if(null!==R[9]){const V=R[9];for(let K=0;K<V.length;K++){const ne=V[K];Dl(ne[1],ne,A,c)}}}}}return c}function Xm(s){const o=Me(),u=Gt(),c=nu();Kl(c+1);const h=n_(u,c);if(s.dirty&&ta(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Dl(u,o,c,[]):jc(u,o,h,c);s.reset(p,TC),s.notifyOnChanges()}return!0}return!1}function E0(s,o,u,c){const h=Gt();if(h.firstCreatePass){const p=Zn();(function t_(s,o,u){null===s.queries&&(s.queries=new Mp),s.queries.track(new w0(o,u))})(h,new v0(o,u,c),p.index),function iA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function qC(s,o,u){const c=new g0(4==(4&u));Uf(s,o,c,c.destroy),null===o[19]&&(o[19]=new Jm),o[19].queries.push(new y0(c))}(h,Me(),u)}function b0(){return function GC(s,o){return s[19].queries[o].queryList}(Me(),nu())}function n_(s,o){return s.queries.getByIndex(o)}function xh(...s){}const d_=new Kn("Application Initializer");let L0=(()=>{class s{constructor(u){this.appInits=u,this.resolve=xh,this.reject=xh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Tm(p))u.push(p);else if(Tv(p)){const y=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(D(d_,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const h_=new Kn("AppId",{providedIn:"root",factory:function iI(){return`${f_()}${f_()}${f_()}`}});function f_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const p_=new Kn("Platform Initializer"),g_=new Kn("Platform ID"),m_=new Kn("appBootstrapListener");let xu=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const Al=new Kn("LocaleId",{providedIn:"root",factory:()=>j(Al,Et.Optional|Et.SkipSelf)||function U0(){return"undefined"!=typeof $localize&&$localize.locale||$m}()}),Rh=new Kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let V0=(()=>{class s{compileModuleSync(u){return new Na(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Uo(st(u).declarations).reduce((y,E)=>{const I=tt(E);return I&&y.push(new o0(I)),y},[]);return new hA(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const j0=(()=>Promise.resolve(0))();function H0(s){"undefined"==typeof Zone?j0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Vs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uo(!1),this.onMicrotaskEmpty=new uo(!1),this.onStable=new uo(!1),this.onError=new uo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function fA(){let s=Kt.requestAnimationFrame,o=Kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function pA(s){const o=()=>{!function aI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,__(s),s.isCheckStableRunning=!0,G0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),__(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,y,E)=>{try{return q0(s),u.invokeTask(h,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),W0(s)}},onInvoke:(u,c,h,p,y,E,I)=>{try{return q0(s),u.invoke(h,p,y,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),W0(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,__(s),G0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,$0,xh,xh);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const $0={};function G0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function __(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function q0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function W0(s){s._nesting--,G0(s)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uo,this.onMicrotaskEmpty=new uo,this.onStable=new uo,this.onError=new uo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let lI=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),H0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())H0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(D(Vs))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),cI=(()=>{class s{constructor(){this._applications=new Map,Vp.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Vp.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();class gA{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function mA(s){Vp=s}let Bs,Vp=new gA;const dI=new Kn("AllowMultipleToken");class K0{constructor(o,u){this.name=o,this.token=u}}function y_(s,o,u=[]){const c=`Platform: ${o}`,h=new Kn(c);return(p=[])=>{let y=v_();if(!y||y.injector.get(dI,!1))if(s)s(u.concat(p).concat({provide:h,useValue:!0}));else{const E=u.concat(p).concat({provide:h,useValue:!0},{provide:Gd,useValue:"platform"});!function hI(s){if(Bs&&!Bs.destroyed&&!Bs.injector.get(dI,!1))throw new Le(400,"");Bs=s.get(pI);const o=s.get(p_,null);o&&o.forEach(u=>u())}(Ls.create({providers:E,name:c}))}return function fI(s){const o=v_();if(!o)throw new Le(401,"");return o}()}}function v_(){return Bs&&!Bs.destroyed?Bs:null}let pI=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function Y0(s,o){let u;return u="noop"===s?new uI:("zone.js"===s?void 0:s)||new Vs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Vs,useValue:E}];return E.run(()=>{const A=Ls.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(A),V=R.injector.get(Og,null);if(!V)throw new Le(402,"");return E.runOutsideAngular(()=>{const K=E.onError.subscribe({next:ne=>{V.handleError(ne)}});R.onDestroy(()=>{Bp(this._modules,R),K.unsubscribe()})}),function _A(s,o,u){try{const c=u();return Tm(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,E,()=>{const K=R.injector.get(L0);return K.runInitializers(),K.donePromise.then(()=>(function ps(s){Lt(s,"Expected localeId to be defined"),"string"==typeof s&&(eC=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Al,$m)||$m),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const h=w_({},c);return function Z0(s,o,u){const c=new Na(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(Q0);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Le(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(D(Ls))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function w_(s,o){return Array.isArray(o)?o.reduce(w_,s):Object.assign(Object.assign({},s),o)}let Q0=(()=>{class s{constructor(u,c,h,p,y){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new N.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new N.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),H0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,ce.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Le(405,"");let h;h=u instanceof vp?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function z0(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Ma),E=h.create(Ls.NULL,[],c||h.selector,p),I=E.location.nativeElement,A=E.injector.get(lI,null),R=A&&E.injector.get(cI);return A&&R&&R.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Bp(this.components,E),R&&R.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Bp(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(m_,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(D(Vs),D(Ls),D(Og),D(Ep),D(L0))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Bp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let qc=!0,X0=!1;function ew(){return X0=!0,qc}function yA(){if(X0)throw new Error("Cannot enable prod mode after platform setup.");qc=!1}let vA=(()=>{class s{}return s.__NG_ELEMENT_ID__=tw,s})();function tw(s){return function wA(s,o,u){if(Fu(s)&&!u){const c=Dr(s.index,o);return new Cp(c,c)}return 47&s.type?new Cp(o[16],o):null}(Zn(),Me(),16==(16&s))}class T_{constructor(){}supports(o){return Kd(o)}create(o){return new wI(o)}}const sw=(s,o)=>o;class wI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||sw}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<Jt(c,h,p)?u:c,E=Jt(y,h,p),I=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{p||(p=[]);const A=E-h,R=I-h;if(A!=R){for(let K=0;K<A;K++){const ne=K<p.length?p[K]:p[K]=0,Ce=ne+K;R<=Ce&&Ce<A&&(p[K]=ne+1)}p[y.previousIndex]=R-A}}E!==I&&o(y,E,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Kd(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else h=0,function vb(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[ll()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(h,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,h)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new EI(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Gp),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gp),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class EI{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Gp{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new bI,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jt(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class ow{constructor(){}supports(o){return o instanceof Map||ym(o)}create(){return new CI}}class CI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||ym(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new II(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class II{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kh(){return new D_([new T_])}let D_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||kh()),deps:[[s,new tr,new kt]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Le(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:kh}),s})();function Ii(){return new lo([new ow])}let lo=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ii()),deps:[[s,new tr,new kt]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Le(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Ii}),s})();const SI=y_(null,"core",[{provide:g_,useValue:"unknown"},{provide:pI,deps:[Ls]},{provide:cI,deps:[]},{provide:xu,deps:[]}]);let S_=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(D(Q0))},s.\u0275mod=H({type:s}),s.\u0275inj=Yt({}),s})()},3942:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Z:()=>Le});var d=O(2090),$=O(4859),N=O(9681),oe=O(1877);class ce{constructor(ve,De){this._delegate=ve,this.firebase=De,(0,N._addComponent)(ve,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ve,De=N._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(ve);return!Ge.isInitialized()&&"EXPLICIT"===(null===(We=Ge.getComponent())||void 0===We?void 0:We.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:De})}_removeServiceInstance(ve,De=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(De)}_addComponent(ve){(0,N._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,N._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const X=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function pe(){const $e=function ee($e){const ve={},De={__esModule:!0,initializeApp:function Pe(se,ye={}){const be=N.initializeApp(se,ye);if((0,d.r3)(ve,be.name))return ve[be.name];const Q=new $e(be,De);return ve[be.name]=Q,Q},app:Ge,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Te(se){const ye=se.name,be=ye.replace("-compat","");if(N._registerComponent(se)&&"PUBLIC"===se.type){const Q=(re=Ge())=>{if("function"!=typeof re[be])throw X.create("invalid-app-argument",{appName:ye});return re[be]()};void 0!==se.serviceProps&&(0,d.ZB)(Q,se.serviceProps),De[be]=Q,$e.prototype[be]=function(...re){return this._getService.bind(this,ye).apply(this,se.multipleInstances?re:[])}}return"PUBLIC"===se.type?De[be]:null},removeApp:function We(se){delete ve[se]},useAsService:function qe(se,ye){return"serverAuth"===ye?null:ye},modularAPIs:N}};function Ge(se){if(!(0,d.r3)(ve,se=se||N._DEFAULT_ENTRY_NAME))throw X.create("no-app",{appName:se});return ve[se]}return De.default=De,Object.defineProperty(De,"apps",{get:function Re(){return Object.keys(ve).map(se=>ve[se])}}),Ge.App=$e,De}(ce);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ve(De){(0,d.ZB)($e,De)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),$e}(),q=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=W;!function Ae($e){(0,N.registerVersion)("@firebase/app-compat","0.1.39",$e)}()},9681:(Ke,Ee,O)=>{"use strict";O.r(Ee),O.d(Ee,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>dn,_addOrOverwriteComponent:()=>rn,_apps:()=>cn,_clearComponents:()=>ei,_components:()=>Dn,_getProvider:()=>Yt,_registerComponent:()=>Ht,_removeServiceInstance:()=>kn,deleteApp:()=>Et,getApp:()=>$n,getApps:()=>rs,initializeApp:()=>Di,onLog:()=>hn,registerVersion:()=>bn,setLogLevel:()=>Pr});var d=O(5861),$=O(4859),N=O(1877),oe=O(2090),ce=O(8766);class ae{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(ze=>{if(function X(Xe){const Se=Xe.getComponent();return"VERSION"===(null==Se?void 0:Se.type)}(ze)){const It=ze.getImmediate();return`${It.library}/${It.version}`}return null}).filter(ze=>ze).join(" ")}}const ee="@firebase/app",W=new N.Yd("@firebase/app"),Lt="[DEFAULT]",Je={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Dn=new Map;function dn(Xe,Se){try{Xe.container.addComponent(Se)}catch(ze){W.debug(`Component ${Se.name} failed to register with FirebaseApp ${Xe.name}`,ze)}}function rn(Xe,Se){Xe.container.addOrOverwriteComponent(Se)}function Ht(Xe){const Se=Xe.name;if(Dn.has(Se))return W.debug(`There were multiple attempts to register component ${Se}.`),!1;Dn.set(Se,Xe);for(const ze of cn.values())dn(ze,Xe);return!0}function Yt(Xe,Se){const ze=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return ze&&ze.triggerHeartbeat(),Xe.container.getProvider(Se)}function kn(Xe,Se,ze=Lt){Yt(Xe,Se).clearInstance(ze)}function ei(){Dn.clear()}const Fn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ns{constructor(Se,ze,It){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},ze),this._name=ze.name,this._automaticDataCollectionEnabled=ze.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}const Ti="9.14.0";function Di(Xe,Se={}){let ze=Xe;"object"!=typeof Se&&(Se={name:Se});const It=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},Se),Ct=It.name;if("string"!=typeof Ct||!Ct)throw Fn.create("bad-app-name",{appName:String(Ct)});if(ze||(ze=(0,oe.aH)()),!ze)throw Fn.create("no-options");const sn=cn.get(Ct);if(sn){if((0,oe.vZ)(ze,sn.options)&&(0,oe.vZ)(It,sn.config))return sn;throw Fn.create("duplicate-app",{appName:Ct})}const Z=new $.H0(Ct);for(const Y of Dn.values())Z.addComponent(Y);const G=new ns(ze,It,Z);return cn.set(Ct,G),G}function $n(Xe=Lt){const Se=cn.get(Xe);if(!Se&&Xe===Lt)return Di();if(!Se)throw Fn.create("no-app",{appName:Xe});return Se}function rs(){return Array.from(cn.values())}function Et(Xe){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,d.Z)(function*(Xe){const Se=Xe.name;cn.has(Se)&&(cn.delete(Se),yield Promise.all(Xe.container.getProviders().map(ze=>ze.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function bn(Xe,Se,ze){var It;let Ct=null!==(It=Je[Xe])&&void 0!==It?It:Xe;ze&&(Ct+=`-${ze}`);const sn=Ct.match(/\s|\//),Z=Se.match(/\s|\//);if(sn||Z){const G=[`Unable to register library "${Ct}" with version "${Se}":`];return sn&&G.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),sn&&Z&&G.push("and"),Z&&G.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void W.warn(G.join(" "))}Ht(new $.wA(`${Ct}-version`,()=>({library:Ct,version:Se}),"VERSION"))}function hn(Xe,Se){if(null!==Xe&&"function"!=typeof Xe)throw Fn.create("invalid-log-argument");(0,N.Am)(Xe,Se)}function Pr(Xe){(0,N.Ub)(Xe)}const Sn="firebase-heartbeat-store";let gr=null;function vs(){return gr||(gr=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,Se)=>{0===Se&&Xe.createObjectStore(Sn)}}).catch(Xe=>{throw Fn.create("idb-open",{originalErrorMessage:Xe.message})})),gr}function pt(){return(pt=(0,d.Z)(function*(Xe){var Se;try{return(yield vs()).transaction(Sn).objectStore(Sn).get($r(Xe))}catch(ze){if(ze instanceof oe.ZR)W.warn(ze.message);else{const It=Fn.create("idb-get",{originalErrorMessage:null===(Se=ze)||void 0===Se?void 0:Se.message});W.warn(It.message)}}})).apply(this,arguments)}function it(Xe,Se){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(Xe,Se){var ze;try{const Ct=(yield vs()).transaction(Sn,"readwrite");return yield Ct.objectStore(Sn).put(Se,$r(Xe)),Ct.done}catch(It){if(It instanceof oe.ZR)W.warn(It.message);else{const Ct=Fn.create("idb-set",{originalErrorMessage:null===(ze=It)||void 0===ze?void 0:ze.message});W.warn(Ct.message)}}})).apply(this,arguments)}function $r(Xe){return`${Xe.name}!${Xe.options.appId}`}class Gn{constructor(Se){this.container=Se,this._heartbeatsCache=null;const ze=this.container.getProvider("app").getImmediate();this._storage=new ai(ze),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var Se=this;return(0,d.Z)(function*(){const It=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=gn();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!Se._heartbeatsCache.heartbeats.some(sn=>sn.date===Ct))return Se._heartbeatsCache.heartbeats.push({date:Ct,agent:It}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(sn=>{const Z=new Date(sn.date).valueOf();return Date.now()-Z<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,d.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const ze=gn(),{heartbeatsToSend:It,unsentEntries:Ct}=function _t(Xe,Se=1024){const ze=[];let It=Xe.slice();for(const Ct of Xe){const sn=ze.find(Z=>Z.agent===Ct.agent);if(sn){if(sn.dates.push(Ct.date),$t(ze)>Se){sn.dates.pop();break}}else if(ze.push({agent:Ct.agent,dates:[Ct.date]}),$t(ze)>Se){ze.pop();break}It=It.slice(1)}return{heartbeatsToSend:ze,unsentEntries:It}}(Se._heartbeatsCache.heartbeats),sn=(0,oe.L)(JSON.stringify({version:2,heartbeats:It}));return Se._heartbeatsCache.lastSentHeartbeatDate=ze,Ct.length>0?(Se._heartbeatsCache.heartbeats=Ct,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),sn})()}}function gn(){return(new Date).toISOString().substring(0,10)}class ai{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,d.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function zt(Xe){return pt.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var ze=this;return(0,d.Z)(function*(){var It;if(yield ze._canUseIndexedDBPromise){const sn=yield ze.read();return it(ze.app,{lastSentHeartbeatDate:null!==(It=Se.lastSentHeartbeatDate)&&void 0!==It?It:sn.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var ze=this;return(0,d.Z)(function*(){var It;if(yield ze._canUseIndexedDBPromise){const sn=yield ze.read();return it(ze.app,{lastSentHeartbeatDate:null!==(It=Se.lastSentHeartbeatDate)&&void 0!==It?It:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...Se.heartbeats]})}})()}}function $t(Xe){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function ar(Xe){Ht(new $.wA("platform-logger",Se=>new ae(Se),"PRIVATE")),Ht(new $.wA("heartbeat",Se=>new Gn(Se),"PRIVATE")),bn(ee,"0.8.4",Xe),bn(ee,"0.8.4","esm2017"),bn("fire-js","")}("")},4859:(Ke,Ee,O)=>{"use strict";O.d(Ee,{wA:()=>N,H0:()=>ee,zt:()=>ce});var d=O(5861),$=O(2090);class N{constructor(W,q,ie){this.name=W,this.instanceFactory=q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const oe="[DEFAULT]";class ce{constructor(W,q){this.name=W,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const q=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(q)){const ie=new $.BH;if(this.instancesDeferred.set(q,ie),this.isInitialized(q)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:q});Be&&ie.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(q).promise}getImmediate(W){var q;const ie=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Be=null!==(q=null==W?void 0:W.optional)&&void 0!==q&&q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ae){if(Be)return null;throw Ae}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function X(pe){return"EAGER"===pe.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(q){}for(const[q,ie]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(q);try{const Ae=this.getOrInitializeService({instanceIdentifier:Be});ie.resolve(Ae)}catch(Ae){}}}}clearInstance(W=oe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,d.Z)(function*(){const q=Array.from(W.instances.values());yield Promise.all([...q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=oe){return this.instances.has(W)}getOptions(W=oe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:q={}}=W,ie=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:ie,options:q});for(const[Ae,Le]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ae)&&Le.resolve(Be);return Be}onInit(W,q){var ie;const Be=this.normalizeInstanceIdentifier(q),Ae=null!==(ie=this.onInitCallbacks.get(Be))&&void 0!==ie?ie:new Set;Ae.add(W),this.onInitCallbacks.set(Be,Ae);const Le=this.instances.get(Be);return Le&&W(Le,Be),()=>{Ae.delete(W)}}invokeOnInitCallbacks(W,q){const ie=this.onInitCallbacks.get(q);if(ie)for(const Be of ie)try{Be(W,q)}catch(Ae){}}getOrInitializeService({instanceIdentifier:W,options:q={}}){let ie=this.instances.get(W);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=W,pe===oe?void 0:pe),options:q}),this.instances.set(W,ie),this.instancesOptions.set(W,q),this.invokeOnInitCallbacks(ie,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ie)}catch(Be){}var pe;return ie||null}normalizeInstanceIdentifier(W=oe){return this.component?this.component.multipleInstances?W:oe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const q=this.getProvider(W.name);if(q.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);q.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const q=new ce(W,this);return this.providers.set(W,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(Ke,Ee,O)=>{"use strict";O.d(Ee,{in:()=>$,Yd:()=>X,Ub:()=>ee,Am:()=>pe});const d=[];var $=(()=>{return(W=$||($={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",$;var W})();const N={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},oe=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ae=(W,q,...ie)=>{if(q<W.logLevel)return;const Be=(new Date).toISOString(),Ae=ce[q];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ae](`[${Be}]  ${W.name}:`,...ie)};class X{constructor(q){this.name=q,this._logLevel=oe,this._logHandler=ae,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in $))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...q),this._logHandler(this,$.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...q),this._logHandler(this,$.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,$.INFO,...q),this._logHandler(this,$.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,$.WARN,...q),this._logHandler(this,$.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...q),this._logHandler(this,$.ERROR,...q)}}function ee(W){d.forEach(q=>{q.setLogLevel(W)})}function pe(W,q){for(const ie of d){let Be=null;q&&q.level&&(Be=N[q.level]),ie.userLogHandler=null===W?null:(Ae,Le,...$e)=>{const ve=$e.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(We){return null}}).filter(De=>De).join(" ");Le>=(null!=Be?Be:Ae.logLevel)&&W({level:$[Le].toLowerCase(),message:ve,args:$e,type:Ae.name})}}}},8766:(Ke,Ee,O)=>{"use strict";O.d(Ee,{Lj:()=>Pe,X3:()=>Ge});var d=O(5861);let N,oe;const X=new WeakMap,ee=new WeakMap,pe=new WeakMap,W=new WeakMap,q=new WeakMap;let Ae={get(ye,be,Q){if(ye instanceof IDBTransaction){if("done"===be)return ee.get(ye);if("objectStoreNames"===be)return ye.objectStoreNames||pe.get(ye);if("store"===be)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return De(ye[be])},set:(ye,be,Q)=>(ye[be]=Q,!0),has:(ye,be)=>ye instanceof IDBTransaction&&("done"===be||"store"===be)||be in ye};function ve(ye){return"function"==typeof ye?function $e(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...be){return ye.apply(We(this),be),De(X.get(this))}:function(...be){return De(ye.apply(We(this),be))}:function(be,...Q){const re=ye.call(We(this),be,...Q);return pe.set(re,be.sort?be.sort():[be]),De(re)}}(ye):(ye instanceof IDBTransaction&&function Be(ye){if(ee.has(ye))return;const be=new Promise((Q,re)=>{const ue=()=>{ye.removeEventListener("complete",we),ye.removeEventListener("error",fe),ye.removeEventListener("abort",fe)},we=()=>{Q(),ue()},fe=()=>{re(ye.error||new DOMException("AbortError","AbortError")),ue()};ye.addEventListener("complete",we),ye.addEventListener("error",fe),ye.addEventListener("abort",fe)});ee.set(ye,be)}(ye),((ye,be)=>be.some(Q=>ye instanceof Q))(ye,function ce(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ae):ye)}function De(ye){if(ye instanceof IDBRequest)return function ie(ye){const be=new Promise((Q,re)=>{const ue=()=>{ye.removeEventListener("success",we),ye.removeEventListener("error",fe)},we=()=>{Q(De(ye.result)),ue()},fe=()=>{re(ye.error),ue()};ye.addEventListener("success",we),ye.addEventListener("error",fe)});return be.then(Q=>{Q instanceof IDBCursor&&X.set(Q,ye)}).catch(()=>{}),q.set(be,ye),be}(ye);if(W.has(ye))return W.get(ye);const be=ve(ye);return be!==ye&&(W.set(ye,be),q.set(be,ye)),be}const We=ye=>q.get(ye);function Ge(ye,be,{blocked:Q,upgrade:re,blocking:ue,terminated:we}={}){const fe=indexedDB.open(ye,be),Ue=De(fe);return re&&fe.addEventListener("upgradeneeded",ft=>{re(De(fe.result),ft.oldVersion,ft.newVersion,De(fe.transaction))}),Q&&fe.addEventListener("blocked",()=>Q()),Ue.then(ft=>{we&&ft.addEventListener("close",()=>we()),ue&&ft.addEventListener("versionchange",()=>ue())}).catch(()=>{}),Ue}function Pe(ye,{blocked:be}={}){const Q=indexedDB.deleteDatabase(ye);return be&&Q.addEventListener("blocked",()=>be()),De(Q).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],qe=new Map;function se(ye,be){if(!(ye instanceof IDBDatabase)||be in ye||"string"!=typeof be)return;if(qe.get(be))return qe.get(be);const Q=be.replace(/FromIndex$/,""),re=be!==Q,ue=Te.includes(Q);if(!(Q in(re?IDBIndex:IDBObjectStore).prototype)||!ue&&!Re.includes(Q))return;const we=function(){var fe=(0,d.Z)(function*(Ue,...ft){const nn=this.transaction(Ue,ue?"readwrite":"readonly");let Lt=nn.store;return re&&(Lt=Lt.index(ft.shift())),(yield Promise.all([Lt[Q](...ft),ue&&nn.done]))[0]});return function(ft){return fe.apply(this,arguments)}}();return qe.set(be,we),we}!function Le(ye){Ae=ye(Ae)}(ye=>CF(bF({},ye),{get:(be,Q,re)=>se(be,Q)||ye.get(be,Q,re),has:(be,Q)=>!!se(be,Q)||ye.has(be,Q)}))},5861:(Ke,Ee,O)=>{"use strict";function d(N,oe,ce,ae,X,ee,pe){try{var W=N[ee](pe),q=W.value}catch(ie){return void ce(ie)}W.done?oe(q):Promise.resolve(q).then(ae,X)}function $(N){return function(){var oe=this,ce=arguments;return new Promise(function(ae,X){var ee=N.apply(oe,ce);function pe(q){d(ee,ae,X,pe,W,"next",q)}function W(q){d(ee,ae,X,pe,W,"throw",q)}pe(void 0)})}}O.d(Ee,{Z:()=>$})},4684:Ke=>{"use strict";Ke.exports=JSON.parse('["color","title","message","icon","duration","positionX","positionY","fontColor","fontTone","shape","speed"]')}},Ke=>{Ke(Ke.s=6465)}]);